===== PROJECT TREE =====
.
â”œâ”€â”€ FLUTTER_DEPENDENCIES_BACKUP.md
â”œâ”€â”€ PROJECT_REVIEW.txt
â”œâ”€â”€ README.md
â”œâ”€â”€ admin
â”‚Â Â  â”œâ”€â”€ admin_service.dart
â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”œâ”€â”€ ui
â”‚Â Â  â”‚Â Â  â””â”€â”€ admin_dashboard.dart
â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â      â”œâ”€â”€ admin_wallet_page.dart
â”‚Â Â      â””â”€â”€ admin_wallet_service.dart
â”œâ”€â”€ assets
â”‚Â Â  â”œâ”€â”€ animations
â”‚Â Â  â”œâ”€â”€ app_icon.png
â”‚Â Â  â”œâ”€â”€ images
â”‚Â Â  â””â”€â”€ lottie
â”œâ”€â”€ auth
â”‚Â Â  â””â”€â”€ auth_service.dart
â”œâ”€â”€ check_flutter_embedding.sh
â”œâ”€â”€ codemagic.yaml
â”œâ”€â”€ core
â”‚Â Â  â”œâ”€â”€ ads
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ad_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ad_service.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ ads_banner.dart
â”‚Â Â  â”œâ”€â”€ animations
â”‚Â Â  â”‚Â Â  â””â”€â”€ fade_slide_transition.dart
â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_guard.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ user_role.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ auth_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user_guard.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user_role.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ vip_guard.dart
â”‚Â Â  â”œâ”€â”€ constants
â”‚Â Â  â”‚Â Â  â””â”€â”€ feature_flags.dart
â”‚Â Â  â”œâ”€â”€ errors
â”‚Â Â  â”œâ”€â”€ feature_flags
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ feature_flags.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ flags.dart
â”‚Â Â  â”œâ”€â”€ firebase
â”‚Â Â  â”‚Â Â  â””â”€â”€ firebase_service.dart
â”‚Â Â  â”œâ”€â”€ language
â”‚Â Â  â”‚Â Â  â””â”€â”€ language_cubit.dart
â”‚Â Â  â”œâ”€â”€ localization
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ar.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ en.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ language_cubit.dart
â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_transaction.dart
â”‚Â Â  â”œâ”€â”€ navigation
â”‚Â Â  â”‚Â Â  â””â”€â”€ role_router.dart
â”‚Â Â  â”œâ”€â”€ network
â”‚Â Â  â”œâ”€â”€ notifications
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_notifications_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ notification_service.dart
â”‚Â Â  â”œâ”€â”€ routes
â”‚Â Â  â”‚Â Â  â””â”€â”€ app_routes.dart
â”‚Â Â  â”œâ”€â”€ routes.dart
â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_service.dart
â”‚Â Â  â”œâ”€â”€ theme
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_theme.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ theme_cubit.dart
â”‚Â Â  â””â”€â”€ utils
â”œâ”€â”€ efo_check.sh
â”œâ”€â”€ efo_home_products.sh
â”œâ”€â”€ features
â”‚Â Â  â”œâ”€â”€ admin
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ admin_dashboard_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_product_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ seller_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_dashboard_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ads
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ review_products_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ review_sellers_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ reports
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_report_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_report_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_reports_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ report_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ report_service.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ admin_ads_service.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ admin_service.dart
â”‚Â Â  â”œâ”€â”€ ai_concierge
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ai_suggestion.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ai_concierge_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ ai_concierge_service.dart
â”‚Â Â  â”œâ”€â”€ ai_offers
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ ai_offer_service.dart
â”‚Â Â  â”œâ”€â”€ analytics
â”‚Â Â  â”‚Â Â  â””â”€â”€ analytics_service.dart
â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ user_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ app_user.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ code_login_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ login_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ auth_service.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ user_firestore_service.dart
â”‚Â Â  â”œâ”€â”€ cart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart_item_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ cart_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ cart_page.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ cubit
â”‚Â Â  â”œâ”€â”€ categories
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ category_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ admin_categories_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ category_service.dart
â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ chat_message.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chat_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ ai_adapter.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ chatbot_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ language_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ price_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ product_service.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ rasa_chat_service.dart
â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ admin_dashboard_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ admin_stats_service.dart
â”‚Â Â  â”œâ”€â”€ discounts
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discount_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ discount.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discounts_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ discount_service.dart
â”‚Â Â  â”œâ”€â”€ map
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ store_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ store_service.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ map_page.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ store_card.dart
â”‚Â Â  â”œâ”€â”€ marketplace
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ service_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ service_details_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ service_stats.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â      â””â”€â”€ section_card.dart
â”‚Â Â  â”œâ”€â”€ notifications
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notification_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ notification_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ notification_service.dart
â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ smart_offer.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ smart_offer_service.dart
â”‚Â Â  â”œâ”€â”€ orders
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ order_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ order_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ orders_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ order_financial_service.dart
â”‚Â Â  â”œâ”€â”€ payments
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_method_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_method.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_record.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_result.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ transaction_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ manual_payment_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ merchant_contract_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_info_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_log_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_summary_widget.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payments_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wallet_image_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wallet_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_settings_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ payment_calculator.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ payment_handler.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ payment_log_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ payment_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ payout_service.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ wallet_image_service.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ wallet_service.dart
â”‚Â Â  â”œâ”€â”€ products
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ product_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ product.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ products_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ product_service.dart
â”‚Â Â  â”œâ”€â”€ reports
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ reports_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ report_service.dart
â”‚Â Â  â”œâ”€â”€ seller
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ seller_contract.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ seller_model.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ add_product_page.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ dashboard_page.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ widgets
â”‚Â Â  â”œâ”€â”€ settings
â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â      â””â”€â”€ settings_page.dart
â”‚Â Â  â”œâ”€â”€ storage
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ storage_service.dart
â”‚Â Â  â”œâ”€â”€ vip
â”‚Â Â  â”‚Â Â  â””â”€â”€ vip_guard.dart
â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â      â””â”€â”€ wallet_service.dart
â”œâ”€â”€ firebase
â”‚Â Â  â””â”€â”€ firebase_options.dart
â”œâ”€â”€ firestore.rules
â”œâ”€â”€ functions
â”‚Â Â  â”œâ”€â”€ index.js
â”‚Â Â  â””â”€â”€ services
â”‚Â Â      â”œâ”€â”€ commission.js
â”‚Â Â      â”œâ”€â”€ notifications.js
â”‚Â Â      â”œâ”€â”€ reports.js
â”‚Â Â      â””â”€â”€ wallet.js
â”œâ”€â”€ injection.dart
â”œâ”€â”€ l10n
â”‚Â Â  â”œâ”€â”€ app_ar.arb
â”‚Â Â  â””â”€â”€ app_en.arb
â”œâ”€â”€ lib
â”‚Â Â  â”œâ”€â”€ admin
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ui
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ admin_dashboard.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ admin_wallet_page.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ admin_wallet_service.dart
â”‚Â Â  â”œâ”€â”€ app
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_bootstrap.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_cubit.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_shell.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_view.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ router
â”‚Â Â  â”œâ”€â”€ app.dart
â”‚Â Â  â”œâ”€â”€ app_shell
â”‚Â Â  â”‚Â Â  â””â”€â”€ root_page.dart
â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â””â”€â”€ auth_service.dart
â”‚Â Â  â”œâ”€â”€ core
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ads
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ad_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ad_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ads_banner.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ animations
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ fade_slide_transition.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_provider.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_guard.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth_helper.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ guest_guard.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ role_guard.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ role_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user_guard.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user_role.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ vip_guard.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart_repository.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ guest_cart_migrator.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ feature_flags.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ constants
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ feature_flags.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ di
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ service_locator.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ errors
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ feature_flags
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ feature_flags.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ flags.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ features
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ feature.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ feature_registry.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase_init.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase_initializer.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ firebase_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firestore
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ firestore_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ language
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ language_cubit.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ localization
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ar.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ en.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ language_cubit.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_transaction.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ navigation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main_nav.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ role_router.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ network
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notifications
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin_notifications_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ notification_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ providers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ cart_provider.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ router
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_router.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ app_routes.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ routes
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ app_routes.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ routes.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ routes.dart.save
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ guest_auth_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ storage
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ theme
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_theme.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ theme_cubit.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ theme_provider.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ utils
â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ glass_card.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ loading_view.dart
â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ moc
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ categories_moc.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers_moc.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ products_moc.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ mock_data.dart
â”‚Â Â  â”œâ”€â”€ features
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ admin
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ reports
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ai
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ai_concierge
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ai_offers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ analytics
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ analytics_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ auth
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ login_screen.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ otp_screen.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ view
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cart_provider.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ model
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ pages
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ service
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ view
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ categories
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ charts
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ charts_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ root_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discounts
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ discount_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ games
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ dashboard
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_screen.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ root_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ view
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ map
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ marketplace
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ categories
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ sections
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ merchant
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ add_product_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ image_picker_helper.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ notifications
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ orders
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ orders_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payments
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ products
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ domain
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_details_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_model.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_service.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ products_grid_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ products_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ upload_product_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ view
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ profile
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ profile_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ reports
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ root
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ root_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ search
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ search_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ search_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ seller
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ cubit
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ view
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ storage
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ vendor
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ vendor_dashboard_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ vendors
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ vip
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ vip_guard.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â      â””â”€â”€ wallet_service.dart
â”‚Â Â  â”œâ”€â”€ firebase
â”‚Â Â  â”‚Â Â  â””â”€â”€ firebase_options.dart
â”‚Â Â  â”œâ”€â”€ injection.dart
â”‚Â Â  â”œâ”€â”€ l10n
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ app_ar.arb
â”‚Â Â  â”‚Â Â  â””â”€â”€ app_en.arb
â”‚Â Â  â”œâ”€â”€ localization
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ lang_controller.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ strings.dart
â”‚Â Â  â”œâ”€â”€ main.dart
â”‚Â Â  â”œâ”€â”€ map
â”‚Â Â  â”‚Â Â  â””â”€â”€ shop_service.dart
â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ category.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_method.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ product_model.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ shop_model.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ user_model.dart
â”‚Â Â  â”œâ”€â”€ modules
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ games
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ games_module.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payments
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_module.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ telecom
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ telecom_module.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ travel
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ travel_module.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ vip
â”‚Â Â  â”‚Â Â      â””â”€â”€ presentation
â”‚Â Â  â”œâ”€â”€ payment
â”‚Â Â  â”‚Â Â  â””â”€â”€ payment_service.dart
â”‚Â Â  â”œâ”€â”€ root
â”‚Â Â  â”‚Â Â  â””â”€â”€ root_page.dart
â”‚Â Â  â”œâ”€â”€ screens
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ chat_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_screen.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ login
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ login_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ login_screen.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ marketplace
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ marketplace_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ navigation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ main_navigation.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ offers_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ services_screen.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ user
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ user_dashboard_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â  â”‚Â Â      â””â”€â”€ wallet_page.dart
â”‚Â Â  â”œâ”€â”€ services
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ ai_chat_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firestore_service.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ guest_auth_service.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ product_service.dart
â”‚Â Â  â”œâ”€â”€ shared
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ animated_banner.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ app_button.dart
â”‚Â Â  â”œâ”€â”€ theme
â”‚Â Â  â”‚Â Â  â””â”€â”€ app_theme.dart
â”‚Â Â  â”œâ”€â”€ trader
â”‚Â Â  â”‚Â Â  â””â”€â”€ trader_service.dart
â”‚Â Â  â”œâ”€â”€ ui
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ add_product
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ add_product_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ layout
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ main_layout.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ main_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ map
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ add_shop_page.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ map_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ marketplace
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ marketplace_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ payment_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ splash
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ splash_page.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ trader
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ add_product_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ category_card.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ pay_button.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ product_card.dart
â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â      â”œâ”€â”€ animated_ad_banner.dart
â”‚Â Â      â”œâ”€â”€ dashboard
â”‚Â Â      â”‚Â Â  â””â”€â”€ stat_card.dart
â”‚Â Â      â”œâ”€â”€ dashboard.dart
â”‚Â Â      â”œâ”€â”€ main_bottom_nav.dart
â”‚Â Â      â””â”€â”€ product_card.dart
â”œâ”€â”€ localization
â”‚Â Â  â”œâ”€â”€ lang_controller.dart
â”‚Â Â  â””â”€â”€ strings.dart
â”œâ”€â”€ main.dart
â”œâ”€â”€ map
â”‚Â Â  â””â”€â”€ shop_service.dart
â”œâ”€â”€ mkdir
â”œâ”€â”€ models
â”‚Â Â  â”œâ”€â”€ payment_method.dart
â”‚Â Â  â”œâ”€â”€ product_model.dart
â”‚Â Â  â”œâ”€â”€ shop_model.dart
â”‚Â Â  â””â”€â”€ user_model.dart
â”œâ”€â”€ modules
â”‚Â Â  â”œâ”€â”€ games
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ games_module.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ presentation
â”‚Â Â  â”œâ”€â”€ payments
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ payment_module.dart
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ payments_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ services
â”‚Â Â  â”‚Â Â      â””â”€â”€ payment_service.dart
â”‚Â Â  â”œâ”€â”€ telecom
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ telecom_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ telecom_module.dart
â”‚Â Â  â”œâ”€â”€ travel
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ presentation
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ travel_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ travel_module.dart
â”‚Â Â  â””â”€â”€ vip
â”‚Â Â      â””â”€â”€ presentation
â”œâ”€â”€ payment
â”‚Â Â  â””â”€â”€ payment_service.dart
â”œâ”€â”€ play_store_description.txt
â”œâ”€â”€ privacy_policy.md
â”œâ”€â”€ pubspec.yaml
â”œâ”€â”€ rasa_bot
â”‚Â Â  â”œâ”€â”€ __pycache__
â”‚Â Â  â”‚Â Â  â””â”€â”€ server.cpython-312.pyc
â”‚Â Â  â”œâ”€â”€ config.yml
â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ nlu.yml
â”‚Â Â  â”‚Â Â  â””â”€â”€ stories.yml
â”‚Â Â  â”œâ”€â”€ domain.yml
â”‚Â Â  â”œâ”€â”€ lib
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ core
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ animations
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ language
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ routes.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ theme
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ features
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ settings
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ ui
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ layout
â”‚Â Â  â”‚Â Â      â””â”€â”€ widgets
â”‚Â Â  â”œâ”€â”€ nlu.yml
â”‚Â Â  â”œâ”€â”€ pubspec.yaml
â”‚Â Â  â”œâ”€â”€ server.py
â”‚Â Â  â””â”€â”€ stories.yml
â”œâ”€â”€ rasa_bot_disabled
â”‚Â Â  â”œâ”€â”€ __pycache__
â”‚Â Â  â”‚Â Â  â””â”€â”€ server.cpython-312.pyc
â”‚Â Â  â”œâ”€â”€ config.yml
â”‚Â Â  â”œâ”€â”€ data
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ nlu.yml
â”‚Â Â  â”‚Â Â  â””â”€â”€ stories.yml
â”‚Â Â  â”œâ”€â”€ domain.yml
â”‚Â Â  â”œâ”€â”€ lib
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ core
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ animations
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ firebase
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ language
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ routes.dart
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ theme
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ features
â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ settings
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ ui
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ layout
â”‚Â Â  â”‚Â Â      â””â”€â”€ widgets
â”‚Â Â  â”œâ”€â”€ nlu.yml
â”‚Â Â  â”œâ”€â”€ pubspec.yaml
â”‚Â Â  â”œâ”€â”€ server.py
â”‚Â Â  â””â”€â”€ stories.yml
â”œâ”€â”€ screens
â”‚Â Â  â”œâ”€â”€ chat
â”‚Â Â  â”‚Â Â  â””â”€â”€ chat_page.dart
â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ home_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ hero_banner.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ home_app_bar.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ home_bottom_nav.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ home_skeleton.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ quick_actions.dart
â”‚Â Â  â”‚Â Â      â”œâ”€â”€ services_grid.dart
â”‚Â Â  â”‚Â Â      â””â”€â”€ top_picks_section.dart
â”‚Â Â  â”œâ”€â”€ home_screen.dart
â”‚Â Â  â”œâ”€â”€ login
â”‚Â Â  â”‚Â Â  â””â”€â”€ login_page.dart
â”‚Â Â  â”œâ”€â”€ login_screen.dart
â”‚Â Â  â”œâ”€â”€ navigation
â”‚Â Â  â”‚Â Â  â””â”€â”€ main_navigation.dart
â”‚Â Â  â”œâ”€â”€ offers
â”‚Â Â  â”‚Â Â  â””â”€â”€ offers_page.dart
â”‚Â Â  â”œâ”€â”€ services_screen.dart
â”‚Â Â  â”œâ”€â”€ user
â”‚Â Â  â”‚Â Â  â””â”€â”€ user_dashboard_page.dart
â”‚Â Â  â””â”€â”€ wallet
â”‚Â Â      â””â”€â”€ wallet_page.dart
â”œâ”€â”€ services
â”‚Â Â  â”œâ”€â”€ ai_chat_service.dart
â”‚Â Â  â”œâ”€â”€ firebase_service.dart
â”‚Â Â  â””â”€â”€ firestore_service.dart
â”œâ”€â”€ shared
â”‚Â Â  â”œâ”€â”€ models
â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â      â”œâ”€â”€ animated_banner.dart
â”‚Â Â      â””â”€â”€ app_button.dart
â”œâ”€â”€ test.txt
â”œâ”€â”€ trader
â”‚Â Â  â””â”€â”€ trader_service.dart
â”œâ”€â”€ ui
â”‚Â Â  â”œâ”€â”€ home
â”‚Â Â  â”‚Â Â  â””â”€â”€ home_page.dart
â”‚Â Â  â”œâ”€â”€ home_page.dart
â”‚Â Â  â”œâ”€â”€ layout
â”‚Â Â  â”‚Â Â  â””â”€â”€ main_layout.dart
â”‚Â Â  â”œâ”€â”€ map
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ add_shop_page.dart
â”‚Â Â  â”‚Â Â  â””â”€â”€ map_page.dart
â”‚Â Â  â”œâ”€â”€ marketplace
â”‚Â Â  â”‚Â Â  â””â”€â”€ marketplace_page.dart
â”‚Â Â  â”œâ”€â”€ payment
â”‚Â Â  â”‚Â Â  â””â”€â”€ payment_page.dart
â”‚Â Â  â”œâ”€â”€ splash
â”‚Â Â  â”‚Â Â  â””â”€â”€ splash_page.dart
â”‚Â Â  â”œâ”€â”€ trader
â”‚Â Â  â”‚Â Â  â””â”€â”€ add_product_page.dart
â”‚Â Â  â””â”€â”€ widgets
â”‚Â Â      â”œâ”€â”€ category_card.dart
â”‚Â Â      â”œâ”€â”€ pay_button.dart
â”‚Â Â      â””â”€â”€ product_card.dart
â””â”€â”€ widgets
    â”œâ”€â”€ animated_ad_banner.dart
    â”œâ”€â”€ dashboard
    â”‚Â Â  â””â”€â”€ stat_card.dart
    â””â”€â”€ main_bottom_nav.dart

419 directories, 391 files

===== MAIN.DART =====
import 'package:flutter/material.dart';

import 'injection.dart';
import 'theme/app_theme.dart';
import 'screens/home/home_page.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await configureDependencies();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Yemen Market',
      theme: AppTheme.light,
      home: const HomePage(),
    );
  }
}

===== HOME PAGE =====
import 'package:flutter/material.dart';

import '../../features/products/presentation/pages/products_page.dart';
import 'widgets/home_bottom_nav.dart';

class HomePage extends StatefulWidget {
  const HomePage({super.key});

  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  int _currentIndex = 0;

  late final List<Widget> _pages = [
    const ProductsPage(), // Ø§Ù„Ø³ÙˆÙ‚
    const Center(child: Text('Ø§Ù„Ø¹Ø±ÙˆØ¶')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ OffersPage
    const Center(child: Text('Ø§Ù„Ù…Ø­ÙØ¸Ø©')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ WalletPage
    const Center(child: Text('Ø­Ø³Ø§Ø¨ÙŠ')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ ProfilePage
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: IndexedStack(
        index: _currentIndex,
        children: _pages,
      ),
      bottomNavigationBar: HomeBottomNav(
        currentIndex: _currentIndex,
        onTap: (index) {
          setState(() {
            _currentIndex = index;
          });
        },
      ),
    );
  }
}

===== HOME BOTTOM NAV =====
import 'package:flutter/material.dart';

class HomeBottomNav extends StatelessWidget {
  final int currentIndex;
  final Function(int) onTap;

  const HomeBottomNav({
    super.key,
    required this.currentIndex,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return BottomNavigationBar(
      currentIndex: currentIndex,
      onTap: onTap,
      selectedItemColor: Colors.blue,
      unselectedItemColor: Colors.grey,
      type: BottomNavigationBarType.fixed,
      items: const [
        BottomNavigationBarItem(
          icon: Icon(Icons.storefront),
          label: 'Ø§Ù„Ø³ÙˆÙ‚',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.local_offer),
          label: 'Ø§Ù„Ø¹Ø±ÙˆØ¶',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.account_balance_wallet),
          label: 'Ø§Ù„Ù…Ø­ÙØ¸Ø©',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.person),
          label: 'Ø­Ø³Ø§Ø¨ÙŠ',
        ),
      ],
    );
  }
}

===== ALL DART FILES (HEAD) =====
class FeatureFlags {
  static const ai = false;
  static const vip = false;
  static const discounts = true;
  static const admin = false;
}
import 'package:flutter/material.dart';

class AppTheme {
  static ThemeData light = ThemeData(
    useMaterial3: true,
    brightness: Brightness.light,
    colorSchemeSeed: Colors.green,
    scaffoldBackgroundColor: Colors.white,
    appBarTheme: const AppBarTheme(
      backgroundColor: Colors.green,
      foregroundColor: Colors.white,
    ),
  );

  static ThemeData dark = ThemeData(
    useMaterial3: true,
    brightness: Brightness.dark,
    colorSchemeSeed: Colors.green,
    scaffoldBackgroundColor: Colors.black,
  );
}
import 'package:flutter/material.dart';

class ThemeCubit extends ChangeNotifier {
  ThemeMode _themeMode = ThemeMode.system;

  ThemeMode get themeMode => _themeMode;

  void setLight() {
    _themeMode = ThemeMode.light;
    notifyListeners();
  }

  void setDark() {
    _themeMode = ThemeMode.dark;
    notifyListeners();
  }

  void setSystem() {
    _themeMode = ThemeMode.system;
    notifyListeners();
  }
}
import 'package:flutter/material.dart';

class ThemeProvider extends ChangeNotifier {
  ThemeMode _themeMode = ThemeMode.system;

  ThemeMode get themeMode => _themeMode;

  ThemeData get lightTheme => ThemeData(
        brightness: Brightness.light,
        primarySwatch: Colors.green,
        useMaterial3: true,
      );

  ThemeData get darkTheme => ThemeData(
        brightness: Brightness.dark,
        useMaterial3: true,
      );

  void toggleTheme(bool isDark) {
    _themeMode = isDark ? ThemeMode.dark : ThemeMode.light;
    notifyListeners();
  }
}
import 'package:flutter/material.dart';

import '../features/ai_concierge/presentation/ai_concierge_page.dart';
import '../features/admin/dashboard/admin_dashboard_page.dart';
import '../features/marketplace/presentation/services_page.dart';

final Map<String, WidgetBuilder> appRoutes = {
  '/services': (_) => const ServicesPage(),
  '/ai-concierge': (_) => const AiConciergePage(),
  '/admin-dashboard': (_) => const AdminDashboardPage(),
};
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

class LanguageCubit extends Cubit<Locale?> {
  LanguageCubit() : super(null); // null = Ù„ØºØ© Ø§Ù„Ù†Ø¸Ø§Ù…

  void setArabic() => emit(const Locale('ar'));
  void setEnglish() => emit(const Locale('en'));
  void followSystem() => emit(null);
}
const Map<String, String> ar = {
  'market': 'Ø§Ù„Ø³ÙˆÙ‚',
  'nearby_stores': 'Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù‚Ø±ÙŠØ¨Ø©',
  'seller_dashboard': 'Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø±',
  'admin_panel': 'Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©',
};
const Map<String, String> en = {
  'market': 'Market',
  'nearby_stores': 'Nearby Stores',
  'seller_dashboard': 'Seller Dashboard',
  'admin_panel': 'Admin Panel',
};
import 'package:flutter/material.dart';

class LanguageCubit extends ChangeNotifier {
  static Locale _locale = const Locale('ar');

  static Locale get currentLocale => _locale;

  void setArabic() {
    _locale = const Locale('ar');
    notifyListeners();
  }

  void setEnglish() {
    _locale = const Locale('en');
    notifyListeners();
  }
}
import 'package:flutter/material.dart';

class FadeSlideTransition extends PageRouteBuilder {
  final Widget page;

  FadeSlideTransition({required this.page})
      : super(
          transitionDuration: const Duration(milliseconds: 350),
          pageBuilder: (context, animation, secondaryAnimation) => page,
          transitionsBuilder: (context, animation, secondaryAnimation, child) {
            final offsetAnimation = Tween<Offset>(
              begin: const Offset(0, 0.1),
              end: Offset.zero,
            ).animate(animation);

            return FadeTransition(
              opacity: animation,
              child: SlideTransition(
                position: offsetAnimation,
                child: child,
              ),
            );
          },
        );
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_storage/firebase_storage.dart';

class FirebaseService {
  static final firestore = FirebaseFirestore.instance;
  static final storage = FirebaseStorage.instance;

  static CollectionReference products =
      firestore.collection('products');

  static CollectionReference vendors =
      firestore.collection('vendors');
}
class FirebaseInit {
  static Future<void> init() async {
    // Firebase.initializeApp();
  }
}
import 'package:firebase_core/firebase_core.dart';

class FirebaseInitializer {
  static Future<void> init() async {
    await Firebase.initializeApp();
  }
}
enum UserRole {
  guest,
  user,
  seller,
  admin,
}
import 'package:flutter/material.dart';
import 'services/auth_service.dart';

class AdminGuard extends StatelessWidget {
  final Widget child;
  const AdminGuard({required this.child, super.key});

  @override
  Widget build(BuildContext context) {
    if (!AuthService.isAdmin) {
      return const Scaffold(
        body: Center(child: Text('ğŸš« Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù† ÙÙ‚Ø·')),
      );
    }
    return child;
  }
}
import 'package:flutter/material.dart';

class VipGuard extends StatelessWidget {
  final Widget child;
  final bool isVip;

  const VipGuard({
    super.key,
    required this.child,
    required this.isVip,
  });

  @override
  Widget build(BuildContext context) {
    if (!isVip) {
      return Scaffold(
        appBar: AppBar(title: const Text('Ø®Ø¯Ù…Ø© VIP')),
        body: const Center(
          child: Text(
            'ğŸ’ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…ØªØ§Ø­Ø© Ù„Ø£Ø¹Ø¶Ø§Ø¡ VIP ÙÙ‚Ø·',
            style: TextStyle(fontSize: 16),
          ),
        ),
      );
    }
    return child;
  }
}
enum UserRole {
  admin,
  user,
  guest,
}
import '../models/user_role.dart';

class AuthService {
  static UserRole currentRole = UserRole.guest;

  static bool loginWithCode(String code) {
    if (code == 'deer') {
      currentRole = UserRole.user;
      return true;
    }
    return false;
  }

  static void loginAsAdmin() {
    currentRole = UserRole.admin;
  }

  static bool get isAdmin => currentRole == UserRole.admin;
  static bool get isUser => currentRole == UserRole.user;
}
import 'package:flutter/material.dart';
import 'services/auth_service.dart';

class UserGuard extends StatelessWidget {
  final Widget child;
  const UserGuard({required this.child, super.key});

  @override
  Widget build(BuildContext context) {
    if (!AuthService.isUser && !AuthService.isAdmin) {
      return const Scaffold(
        body: Center(child: Text('ğŸ”‘ Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      );
    }
    return child;
  }
}
import 'package:firebase_auth/firebase_auth.dart';

class AuthHelper {
  static User? get user => FirebaseAuth.instance.currentUser;

  static bool get isLoggedIn =>
      user != null && !user!.isAnonymous;

  static bool get isGuest =>
      user != null && user!.isAnonymous;
}
import 'package:flutter/material.dart';

class GuestGuard {
  static void check({
    required BuildContext context,
    required VoidCallback onAllowed,
  }) {
    final isGuest = true; // Ù„Ø§Ø­Ù‚Ù‹Ø§ Firebase

    if (isGuest) {
      Navigator.pushNamed(context, '/login');
    } else {
      onAllowed();
    }
  }
}
import 'package:flutter/material.dart';
import 'role_service.dart';
import 'user_role.dart';

class RoleGuard {
  static void check({
    required BuildContext context,
    required UserRole requiredRole,
    required VoidCallback onAllowed,
  }) {
    if (RoleService.currentRole == requiredRole) {
      onAllowed();
    } else {
      ScaffoldMessenger.of(context).showSnackBar(
        const SnackBar(content: Text('Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ÙˆØµÙˆÙ„')),
      );
    }
  }
}
class AuthService {
  static bool isGuest = true;
  static String role = 'guest'; // guest | user | seller | admin | vip

  static Future<void> signInAsUser() async {
    isGuest = false;
    role = 'user';
  }

  static bool hasRole(List<String> roles) {
    return roles.contains(role);
  }
}
import 'user_role.dart';

class RoleService {
  static UserRole currentRole = UserRole.guest;

  static bool get isAdmin => currentRole == UserRole.admin;
  static bool get isSeller => currentRole == UserRole.seller;
  static bool get isUser => currentRole == UserRole.user;

  static void setRole(UserRole role) {
    currentRole = role;
  }
}
import 'package:flutter/material.dart';

import '../../features/marketplace/home/home_page.dart';
import '../../features/seller/presentation/dashboard_page.dart';
import '../../features/admin/presentation/admin_dashboard_page.dart';
import '../auth/user_role.dart';

class RoleRouter extends StatelessWidget {
  final UserRole role;

  const RoleRouter({super.key, required this.role});

  @override
  Widget build(BuildContext context) {
    switch (role) {
      case UserRole.admin:
        return const AdminDashboardPage();
      case UserRole.trader:
        return const SellerDashboardPage();
      default:
        return const HomePage();
    }
  }
}
import 'package:flutter/material.dart';
import '../../features/home/presentation/pages/home_page.dart';
import '../../features/search/presentation/pages/search_page.dart';
import '../../features/cart/presentation/pages/cart_page.dart';
import '../../features/settings/presentation/pages/settings_page.dart';

class MainNav extends StatefulWidget {
  const MainNav({super.key});

  @override
  State<MainNav> createState() => _MainNavState();
}

class _MainNavState extends State<MainNav> {
  int index = 0;

  final pages = const [
    HomePage(),
    SearchPage(),
    CartPage(),
    SettingsPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'),
          BottomNavigationBarItem(icon: Icon(Icons.search), label: 'Ø¨Ø­Ø«'),
          BottomNavigationBarItem(icon: Icon(Icons.shopping_cart), label: 'Ø§Ù„Ø³Ù„Ø©'),
          BottomNavigationBarItem(icon: Icon(Icons.settings), label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'),
        ],
      ),
    );
  }
}
class AdminNotification {
  final String title;
  final String message;
  final DateTime time;

  AdminNotification({
    required this.title,
    required this.message,
    DateTime? time,
  }) : time = time ?? DateTime.now();
}

class NotificationService {
  static final List<AdminNotification> _notifications = [];

  static void notify({
    required String title,
    required String message,
  }) {
    _notifications.insert(
      0,
      AdminNotification(title: title, message: message),
    );
  }

  static List<AdminNotification> get all => _notifications;
}
import 'package:flutter/material.dart';
import 'notification_service.dart';

class AdminNotificationsPage extends StatelessWidget {
  const AdminNotificationsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final notifications = NotificationService.all;

    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©')),
      body: notifications.isEmpty
          ? const Center(child: Text('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª'))
          : ListView.builder(
              itemCount: notifications.length,
              itemBuilder: (context, i) {
                final n = notifications[i];
                return ListTile(
                  leading: const Icon(Icons.notifications),
                  title: Text(n.title),
                  subtitle: Text(n.message),
                  trailing: Text(
                    '${n.time.hour}:${n.time.minute.toString().padLeft(2, '0')}',
                  ),
                );
              },
            ),
    );
  }
}
class AdModel {
  final String title;
  final String subtitle;
  final String lottie;
  final bool active;

  AdModel({
    required this.title,
    required this.subtitle,
    required this.lottie,
    required this.active,
  });
}
import 'ad_model.dart';

class AdService {
  static List<AdModel> ads = [
    AdModel(
      title: 'ğŸ”¥ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      subtitle: 'Ø®ØµÙ… 30% Ø¹Ù„Ù‰ Ø§Ù„Ø¯ÙØ¹',
      lottie: 'assets/lottie/offer.json',
      active: true,
    ),
    AdModel(
      title: 'ğŸ’ VIP',
      subtitle: 'Ø®Ø¯Ù…Ø§Øª Ø­ØµØ±ÙŠØ© Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡',
      lottie: 'assets/lottie/vip.json',
      active: true,
    ),
  ];

  static List<AdModel> getActiveAds() =>
      ads.where((e) => e.active).toList();
}
import 'package:flutter/material.dart';
import 'package:lottie/lottie.dart';
import 'ad_service.dart';

class AdsBanner extends StatelessWidget {
  const AdsBanner({super.key});

  @override
  Widget build(BuildContext context) {
    final ads = AdService.getActiveAds();

    return SizedBox(
      height: 180,
      child: PageView.builder(
        itemCount: ads.length,
        itemBuilder: (_, i) {
          final ad = ads[i];
          return Card(
            margin: const EdgeInsets.all(12),
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(16),
            ),
            child: Row(
              children: [
                Expanded(
                  child: Padding(
                    padding: const EdgeInsets.all(16),
                    child: Column(
                      mainAxisAlignment: MainAxisAlignment.center,
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Text(ad.title,
                            style: const TextStyle(
                                fontSize: 18,
                                fontWeight: FontWeight.bold)),
                        const SizedBox(height: 6),
                        Text(ad.subtitle),
                      ],
                    ),
                  ),
                ),
                SizedBox(
                  width: 120,
                  child: Lottie.asset(ad.lottie),
                )
              ],
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../data/moc/products_moc.dart';

class CartProvider extends ChangeNotifier {
  final List<Product> items = [];

  void add(Product p) {
    items.add(p);
    notifyListeners();
  }

  double get total =>
      items.fold(0, (sum, p) => sum + p.price);
}
import 'package:flutter/material.dart';
import '../data/moc/products_moc.dart';

class Order {
  final List<Product> items;
  final double total;
  final DateTime date;

  Order(this.items, this.total) : date = DateTime.now();
}

class AppProvider extends ChangeNotifier {
  // ğŸ›’ Cart
  final List<Product> cart = [];

  double get cartTotal =>
      cart.fold(0, (sum, p) => sum + p.price);

  void addToCart(Product p) {
    cart.add(p);
    notifyListeners();
  }

  void removeFromCart(Product p) {
    cart.remove(p);
    notifyListeners();
  }

  // ğŸ“¦ Orders
  final List<Order> orders = [];

  void checkout() {
    if (cart.isEmpty) return;
    orders.add(Order(List.from(cart), cartTotal));
    cart.clear();
    notifyListeners();
  }
}
import 'dart:ui';
import 'package:flutter/material.dart';

class GlassCard extends StatelessWidget {
  final Widget child;

  const GlassCard({
    super.key,
    required this.child,
  });

  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(20),
      child: BackdropFilter(
        filter: ImageFilter.blur(sigmaX: 12, sigmaY: 12),
        child: Container(
          padding: const EdgeInsets.all(16),
          decoration: BoxDecoration(
            color: Theme.of(context).cardColor.withOpacity(0.2),
            borderRadius: BorderRadius.circular(20),
            border: Border.all(
              color: Colors.white.withOpacity(0.2),
            ),
          ),
          child: child,
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class LoadingView extends StatelessWidget {
  const LoadingView({super.key});

  @override
  Widget build(BuildContext context) {
    return const Center(child: CircularProgressIndicator());
  }
}
class FeatureFlags {
  static bool ai = false;
  static bool vip = true;
  static bool wallet = true;
  static bool ads = true;
  static bool discounts = true;
}
class FeatureFlags {
  static const bool demoMode = true;
  static const bool enableVip = true;
  static const bool enableAdminAds = false;
}
class WalletTransaction {
  final String id;
  final double amount;
  final String type; // add | spend
  final String title;
  final DateTime date;

  WalletTransaction({
    required this.id,
    required this.amount,
    required this.type,
    required this.title,
    required this.date,
  });
}
import '../../modules/travel/travel_module.dart';
import '../../modules/games/games_module.dart';
import '../../modules/telecom/telecom_module.dart';
import '../../modules/payments/payment_module.dart';

final appRoutes = {
  ...TravelModule.routes(),
  ...GamesModule.routes(),
  ...TelecomModule.routes(),
  ...PaymentModule.routes(),
};
import 'package:firebase_auth/firebase_auth.dart';

class GuestAuthService {
  static Future<User?> signInAsGuest() async {
    final cred = await FirebaseAuth.instance.signInAnonymously();
    return cred.user;
  }
}
import '../models/wallet_transaction.dart';

class WalletService {
  static double _balance = 0;
  static final List<WalletTransaction> _transactions = [];

  static double get balance => _balance;
  static List<WalletTransaction> get transactions => _transactions;

  static void add(double amount, {String title = 'Ø´Ø­Ù† Ø±ØµÙŠØ¯'}) {
    _balance += amount;
    _transactions.insert(
      0,
      WalletTransaction(
        id: DateTime.now().millisecondsSinceEpoch.toString(),
        amount: amount,
        type: 'add',
        title: title,
        date: DateTime.now(),
      ),
    );
  }

  static bool spend(double amount, {String title = 'Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡'}) {
    if (_balance < amount) return false;

    _balance -= amount;
    _transactions.insert(
      0,
      WalletTransaction(
        id: DateTime.now().millisecondsSinceEpoch.toString(),
        amount: amount,
        type: 'spend',
        title: title,
        date: DateTime.now(),
      ),
    );
    return true;
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

class UserService {
  static Future<void> saveUser({bool guest = false}) async {
    final user = FirebaseAuth.instance.currentUser;
    if (user == null) return;

    await FirebaseFirestore.instance
        .collection('users')
        .doc(user.uid)
        .set({
      'uid': user.uid,
      'guest': guest,
      'phone': user.phoneNumber,
      'createdAt': FieldValue.serverTimestamp(),
    }, SetOptions(merge: true));
  }
}
import 'package:get_it/get_it.dart';

import '../../features/home/cubit/home_cubit.dart';
import '../../features/settings/cubit/settings_cubit.dart';

final sl = GetIt.instance;

void setupLocator() {
  sl.registerLazySingleton<HomeCubit>(() => HomeCubit());
  sl.registerLazySingleton<SettingsCubit>(() => SettingsCubit());
}
import 'package:flutter/material.dart';
import '../../ui/main/main_page.dart';

class AppRouter {
  static Route onGenerateRoute(RouteSettings settings) {
    switch (settings.name) {
      case '/':
        return MaterialPageRoute(builder: (_) => const MainPage());
      default:
        return MaterialPageRoute(
          builder: (_) => const Scaffold(
            body: Center(child: Text('Page not found')),
          ),
        );
    }
  }
}
import 'package:flutter/material.dart';
import '../../features/auth/presentation/pages/login_page.dart';
import '../../features/orders/presentation/pages/orders_page.dart';

class AppRoutes {
  static Map<String, WidgetBuilder> routes = {
    '/login': (_) => const LoginPage(),
    '/orders': (_) => const OrdersPage(),
  };
}
import 'package:firebase_auth/firebase_auth.dart';

class CartService {
  static String get cartOwnerId {
    final user = FirebaseAuth.instance.currentUser;
    if (user == null) {
      return 'guest';
    }
    return user.uid;
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

class CartRepository {
  static final _db = FirebaseFirestore.instance;

  static String get _ownerId {
    final user = FirebaseAuth.instance.currentUser;
    return user == null ? 'guest' : user.uid;
  }

  static Future<void> addItem(String productId) async {
    await _db
        .collection('carts')
        .doc(_ownerId)
        .collection('items')
        .doc(productId)
        .set({'qty': 1});
  }
}
import '../../features/cart/services/cart_service.dart';

class GuestCartMigrator {
  static Future<void> migrate() async {
    final guestItems = await CartService.getGuestCart();
    if (guestItems.isEmpty) return;

    // ğŸ”— Ø§Ø±Ø¨Ø·Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ø³Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Firestore / API)
    // for (final item in guestItems) {
    //   await UserCartService.add(item);
    // }

    await CartService.clearGuestCart();
  }
}
class FeatureFlags {
  static bool aiEnabled = true;
  static bool vipEnabled = true;
  static bool walletEnabled = true;
  static bool sellerEnabled = true;
  static bool analyticsEnabled = true;
}
class FirestoreService {
  // Mock Firestore (Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø¨Ù€ Firebase Ù„Ø§Ø­Ù‚Ù‹Ø§)

  static final Map<String, List<Map<String, dynamic>>> _db = {
    'users': [],
    'orders': [],
    'products': [],
  };

  static Future<void> add(String collection, Map<String, dynamic> data) async {
    _db[collection]?.add(data);
  }

  static Future<List<Map<String, dynamic>>> getAll(String collection) async {
    return _db[collection] ?? [];
  }
}
import 'package:flutter/material.dart';

class Feature {
  final String id;
  final String title;
  final IconData icon;
  final Widget page;
  final List<String> roles; // Ù…Ù† ÙŠØ±Ø§Ù‡

  const Feature({
    required this.id,
    required this.title,
    required this.icon,
    required this.page,
    required this.roles,
  });
}
import 'package:flutter/material.dart';
import '../../features/search/search_page.dart';

class Feature {
  final String id;
  final String title;
  final IconData icon;
  final Widget page;
  final List<String> roles;

  const Feature({
    required this.id,
    required this.title,
    required this.icon,
    required this.page,
    required this.roles,
  });
}

class FeatureRegistry {
  static List<Feature> all = [
    Feature(
      id: 'search',
      title: 'Ø¨Ø­Ø«',
      icon: Icons.search,
      page: SearchPage(),
      roles: ['guest', 'user', 'vip'],
    ),
  ];
}
class AppUser {
  final String uid;
  final String email;
  final String role;

  AppUser({
    required this.uid,
    required this.email,
    required this.role,
  });

  factory AppUser.fromMap(Map<String, dynamic> data, String uid) {
    return AppUser(
      uid: uid,
      email: data['email'] ?? '',
      role: data['role'] ?? 'user',
    );
  }

  Map<String, dynamic> toMap() {
    return {
      'email': email,
      'role': role,
      'createdAt': DateTime.now(),
    };
  }
}
import 'package:firebase_auth/firebase_auth.dart';
import 'user_model.dart';

class AuthService {
  final FirebaseAuth _auth = FirebaseAuth.instance;

  Future<UserModel?> login(String email, String password) async {
    final result = await _auth.signInWithEmailAndPassword(
      email: email,
      password: password,
    );

    final user = result.user;
    if (user == null) return null;

    return UserModel(
      uid: user.uid,
      name: user.displayName ?? '',
      email: user.email ?? '',
    );
  }

  Future<UserModel?> register(
    String name,
    String email,
    String password,
  ) async {
    final result = await _auth.createUserWithEmailAndPassword(
      email: email,
      password: password,
    );

    final user = result.user;
    if (user == null) return null;

    await user.updateDisplayName(name);

    return UserModel(
      uid: user.uid,
      name: name,
      email: email,
    );
  }

  Future<void> logout() async {
    await _auth.signOut();
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../presentation/cubit/auth_cubit.dart';
import '../presentation/cubit/auth_state.dart';

class LoginPage extends StatefulWidget {
  const LoginPage({super.key});

  @override
  State<LoginPage> createState() => _LoginPageState();
}

class _LoginPageState extends State<LoginPage> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();

  bool isLogin = true;
  String role = 'user';

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(isLogin ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨'),
        centerTitle: true,
      ),
      body: BlocConsumer<AuthCubit, AuthState>(
        listener: (context, state) {
          if (state is AuthError) {
            ScaffoldMessenger.of(context).showSnackBar(
              SnackBar(content: Text(state.message)),
            );
          }
        },
        builder: (context, state) {
          return Padding(
            padding: const EdgeInsets.all(16),
            child: Column(
              children: [
                TextField(
                  controller: _emailController,
                  decoration: const InputDecoration(
                    labelText: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
                  ),
                ),
                const SizedBox(height: 12),
                TextField(
                  controller: _passwordController,
                  obscureText: true,
                  decoration: const InputDecoration(
                    labelText: 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
                  ),
                ),
                const SizedBox(height: 16),

                if (!isLogin)
                  DropdownButton<String>(
                    value: role,
                    items: const [
                      DropdownMenuItem(
                        value: 'user',
                        child: Text('Ù…Ø³ØªØ®Ø¯Ù…'),
                      ),
                      DropdownMenuItem(
                        value: 'seller',
                        child: Text('ØªØ§Ø¬Ø±'),
                      ),
                    ],
                    onChanged: (value) {
                      setState(() {
                        role = value!;
                      });
                    },
                  ),

                const SizedBox(height: 24),

                if (state is AuthLoading)
                  const CircularProgressIndicator()
                else
                  ElevatedButton(
                    onPressed: () {
                      final email = _emailController.text.trim();
                      final password = _passwordController.text.trim();

                      if (isLogin) {
                        context
                            .read<AuthCubit>()
                            .login(email, password);
                      } else {
                        context
                            .read<AuthCubit>()
                            .register(email, password, role);
                      }
                    },
                    child: Text(isLogin ? 'Ø¯Ø®ÙˆÙ„' : 'ØªØ³Ø¬ÙŠÙ„'),
                  ),

                TextButton(
                  onPressed: () {
                    setState(() {
                      isLogin = !isLogin;
                    });
                  },
                  child: Text(
                    isLogin
                        ? 'Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ù‹Ø§'
                        : 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
                  ),
                ),
              ],
            ),
          );
        },
      ),
    );
  }
}
import '../../models/app_user.dart';

abstract class AuthState {}

class AuthInitial extends AuthState {}

class AuthLoading extends AuthState {}

class AuthAuthenticated extends AuthState {
  final AppUser user;

  AuthAuthenticated(this.user);
}

class AuthUnauthenticated extends AuthState {}

class AuthError extends AuthState {
  final String message;

  AuthError(this.message);
}
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../services/auth_service.dart';
import 'auth_state.dart';

class AuthCubit extends Cubit<AuthState> {
  final AuthService _authService;

  AuthCubit(this._authService) : super(AuthInitial());

  Future<void> login(String email, String password) async {
    emit(AuthLoading());
    try {
      final user = await _authService.login(email, password);
      emit(AuthAuthenticated(user));
    } catch (e) {
      emit(AuthError(e.toString()));
    }
  }

  Future<void> register(String email, String password) async {
    emit(AuthLoading());
    try {
      final user = await _authService.register(email, password);
      emit(AuthAuthenticated(user));
    } catch (e) {
      emit(AuthError(e.toString()));
    }
  }

  Future<void> logout() async {
    await _authService.logout();
    emit(AuthUnauthenticated());
  }
}
import 'package:flutter/material.dart';
import '../../../core/auth/services/auth_service.dart';

class CodeLoginPage extends StatefulWidget {
  const CodeLoginPage({super.key});

  @override
  State<CodeLoginPage> createState() => _CodeLoginPageState();
}

class _CodeLoginPageState extends State<CodeLoginPage> {
  final controller = TextEditingController();
  String error = '';

  void login() {
    final success = AuthService.loginWithCode(controller.text.trim());
    if (success) {
      Navigator.pushReplacementNamed(context, '/');
    } else {
      setState(() => error = 'âŒ Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­');
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: controller,
              decoration: const InputDecoration(labelText: 'Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„'),
            ),
            const SizedBox(height: 12),
            ElevatedButton(onPressed: login, child: const Text('Ø¯Ø®ÙˆÙ„')),
            if (error.isNotEmpty)
              Padding(
                padding: const EdgeInsets.only(top: 8),
                child: Text(error, style: const TextStyle(color: Colors.red)),
              ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../core/auth/auth_service.dart';
import '../../../core/cart/guest_cart_migrator.dart';

class LoginPage extends StatelessWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            await AuthService.signIn();
            await GuestCartMigrator.migrate();
            Navigator.pop(context);
          },
          child: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'),
        ),
      ),
    );
  }
}
import '../../../core/auth/user_role.dart';

class AppUser {
  final String id;
  final String email;
  final UserRole role;

  AppUser({
    required this.id,
    required this.email,
    required this.role,
  });

  factory AppUser.fromMap(String id, Map<String, dynamic> data) {
    return AppUser(
      id: id,
      email: data['email'] ?? '',
      role: UserRoleX.fromString(data['role'] ?? 'user'),
    );
  }
}
import 'package:firebase_auth/firebase_auth.dart';

class AuthService {
  static Future<void> signInAnonymously() async {
    await FirebaseAuth.instance.signInAnonymously();
  }

  static Future<void> signInWithEmail(
    String email,
    String password,
  ) async {
    await FirebaseAuth.instance.signInWithEmailAndPassword(
      email: email,
      password: password,
    );
  }

  static Future<void> registerWithEmail(
    String email,
    String password,
  ) async {
    await FirebaseAuth.instance.createUserWithEmailAndPassword(
      email: email,
      password: password,
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import '../models/app_user.dart';

class UserFirestoreService {
  final _db = FirebaseFirestore.instance;

  Future<AppUser> getUser(String uid) async {
    final doc = await _db.collection('users').doc(uid).get();

    if (!doc.exists) {
      throw Exception('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
    }

    return AppUser.fromMap(doc.id, doc.data()!);
  }

  Future<void> createUser({
    required String uid,
    required String email,
    String role = 'user',
  }) async {
    await _db.collection('users').doc(uid).set({
      'email': email,
      'role': role,
      'createdAt': FieldValue.serverTimestamp(),
      'active': true,
    });
  }
}
import 'package:firebase_auth/firebase_auth.dart';
import 'package:google_sign_in/google_sign_in.dart';

class GoogleAuthService {
  static Future<UserCredential> signIn() async {
    final googleUser = await GoogleSignIn().signIn();
    if (googleUser == null) {
      throw Exception('ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
    }

    final googleAuth = await googleUser.authentication;

    final credential = GoogleAuthProvider.credential(
      accessToken: googleAuth.accessToken,
      idToken: googleAuth.idToken,
    );

    return FirebaseAuth.instance.signInWithCredential(credential);
  }
}
import 'package:flutter/material.dart';
import 'package:firebase_auth/firebase_auth.dart';
import 'otp_screen.dart';
import '../home/home_screen.dart';
import '../../core/services/guest_auth_service.dart';
import '../../core/services/user_service.dart';

class LoginScreen extends StatefulWidget {
  const LoginScreen({super.key});

  @override
  State<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends State<LoginScreen> {
  final phoneController = TextEditingController();
  bool loading = false;

  void sendCode() async {
    setState(() => loading = true);
    await FirebaseAuth.instance.verifyPhoneNumber(
      phoneNumber: '+967${phoneController.text}',
      verificationCompleted: (_) {},
      verificationFailed: (_) => setState(() => loading = false),
      codeSent: (id, _) {
        setState(() => loading = false);
        Navigator.push(
          context,
          MaterialPageRoute(
            builder: (_) => OtpScreen(verificationId: id),
          ),
        );
      },
      codeAutoRetrievalTimeout: (_) {},
    );
  }

  void guestLogin() async {
    await GuestAuthService.signInAsGuest();
    await UserService.saveUser(guest: true);
    Navigator.pushReplacement(
      context,
      MaterialPageRoute(builder: (_) => const HomeScreen()),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: phoneController,
              decoration: const InputDecoration(labelText: 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'),
            ),
            const SizedBox(height: 16),
            ElevatedButton(
              onPressed: loading ? null : sendCode,
              child: const Text('ØªØ³Ø¬ÙŠÙ„ Ø¨Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ'),
            ),
            const Divider(height: 40),
            OutlinedButton(
              onPressed: guestLogin,
              child: const Text('Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ'),
            )
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:firebase_auth/firebase_auth.dart';
import '../home/home_screen.dart';

class OtpScreen extends StatefulWidget {
  final String verificationId;
  const OtpScreen({super.key, required this.verificationId});

  @override
  State<OtpScreen> createState() => _OtpScreenState();
}

class _OtpScreenState extends State<OtpScreen> {
  final codeController = TextEditingController();
  bool loading = false;

  void verifyCode() async {
    setState(() => loading = true);
    final cred = PhoneAuthProvider.credential(
      verificationId: widget.verificationId,
      smsCode: codeController.text,
    );
    await FirebaseAuth.instance.signInWithCredential(cred);
    Navigator.pushReplacement(
      context,
      MaterialPageRoute(builder: (_) => const HomeScreen()),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø²')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: codeController,
              keyboardType: TextInputType.number,
              decoration: const InputDecoration(labelText: 'Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚'),
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: loading ? null : verifyCode,
              child: loading
                  ? const CircularProgressIndicator()
                  : const Text('ØªØ£ÙƒÙŠØ¯'),
            )
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:firebase_auth/firebase_auth.dart';

class LoginPage extends StatelessWidget {
  const LoginPage({super.key});

  Future<void> loginAnonToEmail(BuildContext context) async {
    // Ù…Ø¤Ù‚Øª â€“ Ù„Ø§Ø­Ù‚Ù‹Ø§ Email / Phone / Google
    await FirebaseAuth.instance.signInAnonymously();
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      body: Center(
        child: ElevatedButton(
          onPressed: () => loginAnonToEmail(context),
          child: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class LoginPage extends StatelessWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            Navigator.pop(context);
          },
          child: const Text('Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ'),
        ),
      ),
    );
  }
}
class ProductModel {
  final String id;
  final String name;
  final double price;
  final String imageUrl;

  ProductModel({
    required this.id,
    required this.name,
    required this.price,
    required this.imageUrl,
  });

  factory ProductModel.fromJson(Map<String, dynamic> json, String id) {
    return ProductModel(
      id: id,
      name: json['name'],
      price: (json['price'] as num).toDouble(),
      imageUrl: json['imageUrl'],
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'name': name,
      'price': price,
      'imageUrl': imageUrl,
    };
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'product_model.dart';

class ProductService {
  final _db = FirebaseFirestore.instance.collection('products');

  Stream<List<ProductModel>> getProducts() {
    return _db.snapshots().map((snapshot) {
      return snapshot.docs.map((doc) {
        return ProductModel.fromJson(doc.data(), doc.id);
      }).toList();
    });
  }
}
import 'package:flutter/material.dart';
import '../services/product_service.dart';
import '../models/product.dart';

class ProductsPage extends StatelessWidget {
  ProductsPage({super.key});

  final ProductService _service = ProductService();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Products')),
      body: StreamBuilder<List<Product>>(
        stream: _service.approvedProducts(),
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          final products = snapshot.data!;
          return ListView.builder(
            itemCount: products.length,
            itemBuilder: (_, i) {
              final product = products[i];
              return ListTile(
                title: Text(product.name),
                subtitle: Text('${product.price}'),
              );
            },
          );
        },
      ),
    );
  }
}
import 'package:equatable/equatable.dart';
import '../../models/product.dart';

sealed class ProductsState extends Equatable {
  const ProductsState();

  @override
  List<Object?> get props => [];
}

final class ProductsInitial extends ProductsState {
  const ProductsInitial();
}

final class ProductsLoading extends ProductsState {
  const ProductsLoading();
}

final class ProductsLoaded extends ProductsState {
  final List<Product> products;

  const ProductsLoaded(this.products);

  @override
  List<Object?> get props => [products];
}

final class ProductsError extends ProductsState {
  final String message;

  const ProductsError(this.message);

  @override
  List<Object?> get props => [message];
}
import 'package:flutter_bloc/flutter_bloc.dart';
import 'products_state.dart';
import '../../models/product.dart';

class ProductsCubit extends Cubit<ProductsState> {
  ProductsCubit() : super(const ProductsInitial());

  Future<void> loadProducts() async {
    emit(const ProductsLoading());
    try {
      await Future.delayed(const Duration(seconds: 1));
      emit(ProductsLoaded([
        Product(name: 'Ù…Ù†ØªØ¬ 1', price: 10),
        Product(name: 'Ù…Ù†ØªØ¬ 2', price: 20),
      ]));
    } catch (e) {
      emit(ProductsError(e.toString()));
    }
  }

  void loadMore() {
    if (state is! ProductsLoaded) return;
    final current = (state as ProductsLoaded).products;
    emit(ProductsLoaded([
      ...current,
      Product(name: 'Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯', price: 30),
    ]));
  }
}
import 'package:flutter/material.dart';

class ProductPage extends StatelessWidget {
  const ProductPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Container(
              height: 180,
              decoration: BoxDecoration(
                color: Colors.grey.shade800,
                borderRadius: BorderRadius.circular(16),
              ),
              child: const Center(
                child: Icon(Icons.image, size: 60),
              ),
            ),
            const SizedBox(height: 16),
            const Text(
              'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬',
              style: TextStyle(fontSize: 22, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 8),
            const Text(
              'ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù…Ù†ØªØ¬ Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø± ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª',
              style: TextStyle(color: Colors.white70),
            ),
            const Spacer(),
            SizedBox(
              width: double.infinity,
              child: ElevatedButton.icon(
                icon: const Icon(Icons.add_shopping_cart),
                label: const Text('Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©'),
                onPressed: () {},
              ),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../cubit/products_cubit.dart';
import '../cubit/products_state.dart';

class ProductsGrid extends StatefulWidget {
  const ProductsGrid({super.key});

  @override
  State<ProductsGrid> createState() => _ProductsGridState();
}

class _ProductsGridState extends State<ProductsGrid> {
  final ScrollController controller = ScrollController();

  @override
  void initState() {
    super.initState();
    controller.addListener(() {
      if (controller.position.pixels >=
          controller.position.maxScrollExtent - 300) {
        context.read<ProductsCubit>().loadMore();
      }
    });
  }

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<ProductsCubit, ProductsState>(
      builder: (context, state) {
        if (state is ProductsLoading) {
          return const Center(child: CircularProgressIndicator());
        }

        if (state is ProductsError) {
          return Center(child: Text(state.message));
        }

        if (state is ProductsLoaded) {
          return GridView.builder(
            controller: controller,
            padding: const EdgeInsets.all(12),
            gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
              crossAxisCount: 2,
              childAspectRatio: 0.7,
              crossAxisSpacing: 12,
              mainAxisSpacing: 12,
            ),
            itemCount: state.products.length,
            itemBuilder: (context, index) {
              final p = state.products[index];
              return Card(
                child: Column(
                  children: [
                    const Expanded(child: Placeholder()),
                    Padding(
                      padding: const EdgeInsets.all(8),
                      child: Text(
                        p.name,
                        maxLines: 2,
                        overflow: TextOverflow.ellipsis,
                      ),
                    ),
                    Text(p.price.toString()),
                  ],
                ),
              );
            },
          );
        }

        return const SizedBox.shrink();
      },
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../cubit/products_cubit.dart';
import '../cubit/products_state.dart';

class ProductsBlocBuilder extends StatelessWidget {
  const ProductsBlocBuilder({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<ProductsCubit, ProductsState>(
      builder: (context, state) {
        if (state is ProductsLoading) {
          return const Center(child: CircularProgressIndicator());
        }

        if (state is ProductsError) {
          return Center(child: Text(state.message));
        }

        if (state is ProductsLoaded) {
          return ListView.builder(
            itemCount: state.products.length,
            itemBuilder: (context, index) {
              final product = state.products[index];
              return ListTile(
                title: Text(product.name),
                subtitle: Text(product.price.toString()),
              );
            },
          );
        }

        return const SizedBox.shrink();
      },
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import '../../../../injection.dart';
import '../cubit/products_cubit.dart';
import '../cubit/products_state.dart';

class ProductsPage extends StatelessWidget {
  const ProductsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocProvider(
      create: (_) => sl<ProductsCubit>()..loadProducts(),
      child: const ProductsView(),
    );
  }
}

class ProductsView extends StatelessWidget {
  const ProductsView({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')),
      body: BlocBuilder<ProductsCubit, ProductsState>(
        builder: (context, state) {
          if (state is ProductsLoading) {
            return const Center(child: CircularProgressIndicator());
          }

          if (state is ProductsLoaded) {
            return ListView.builder(
              itemCount: state.products.length,
              itemBuilder: (context, index) {
                final product = state.products[index];
                return ListTile(
                  title: Text(product.name),
                  subtitle: Text(product.price.toString()),
                );
              },
            );
          }

          if (state is ProductsError) {
            return Center(child: Text(state.message));
          }

          return const Center(child: Text('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª'));
        },
      ),
    );
  }
}
class Product {
  final String name;
  final double price;

  Product({
    required this.name,
    required this.price,
  });
}
import 'package:cloud_firestore/cloud_firestore.dart';
import '../models/product.dart';

class ProductService {
  final FirebaseFirestore _firestore = FirebaseFirestore.instance;

  // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ (ØªØ§Ø¬Ø±)
  Future<void> addProduct(Product product) async {
    await _firestore.collection('products').add(product.toMap());
  }

  // Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¹ØªÙ…Ø¯Ø© (Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…)
  Stream<List<Product>> approvedProducts() {
    return _firestore
        .collection('products')
        .where('approved', isEqualTo: true)
        .snapshots()
        .map((snapshot) =>
            snapshot.docs.map((d) => Product.fromMap(d.id, d.data())).toList());
  }

  // Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© (Ù„Ù„Ø£Ø¯Ù…Ù†)
  Stream<List<Product>> pendingProducts() {
    return _firestore
        .collection('products')
        .where('approved', isEqualTo: false)
        .snapshots()
        .map((snapshot) =>
            snapshot.docs.map((d) => Product.fromMap(d.id, d.data())).toList());
  }

  // Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø£Ø¯Ù…Ù†
  Future<void> approveProduct(String productId) async {
    await _firestore
        .collection('products')
        .doc(productId)
        .update({'approved': true});
  }
}
import 'package:equatable/equatable.dart';
import '../models/product.dart';

sealed class ProductsState extends Equatable {
  const ProductsState();

  @override
  List<Object?> get props => [];
}

final class ProductsInitial extends ProductsState {
  const ProductsInitial();
}

final class ProductsLoading extends ProductsState {
  const ProductsLoading();
}

final class ProductsLoaded extends ProductsState {
  final List<Product> products;

  const ProductsLoaded(this.products);

  @override
  List<Object?> get props => [products];
}

final class ProductsError extends ProductsState {
  final String message;

  const ProductsError(this.message);

  @override
  List<Object?> get props => [message];
}
import 'package:flutter_bloc/flutter_bloc.dart';
import 'products_state.dart';
import '../models/product.dart';

class ProductsCubit extends Cubit<ProductsState> {
  ProductsCubit() : super(const ProductsInitial());

  Future<void> loadProducts() async {
    try {
      emit(const ProductsLoading());

      await Future.delayed(const Duration(seconds: 1));

      final products = const [
        Product(name: 'Laptop', price: 1200),
        Product(name: 'Phone', price: 800),
        Product(name: 'Headphones', price: 150),
      ];

      emit(ProductsLoaded(products));
    } catch (e) {
      emit(ProductsError(e.toString()));
    }
  }
}
class Product {
  final String id;
  final String title;
  final double price;
  final List<String> images;
  final String category;
  final String vendorId;
  final String description;

  Product({
    required this.id,
    required this.title,
    required this.price,
    required this.images,
    required this.category,
    required this.vendorId,
    required this.description,
  });

  factory Product.fromMap(String id, Map<String, dynamic> data) {
    return Product(
      id: id,
      title: data['title'] ?? '',
      price: (data['price'] as num).toDouble(),
      images: List<String>.from(data['images'] ?? []),
      category: data['category'] ?? '',
      vendorId: data['vendorId'] ?? '',
      description: data['description'] ?? '',
    );
  }
}
import 'package:flutter/material.dart';
import 'product_model.dart';

class ProductDetailsPage extends StatelessWidget {
  final Product product;

  const ProductDetailsPage({super.key, required this.product});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text(product.name)),
      body: ListView(
        children: [
          SizedBox(
            height: 300,
            child: PageView(
              children: product.images
                  .map((img) => Image.network(img, fit: BoxFit.cover))
                  .toList(),
            ),
          ),
          Padding(
            padding: const EdgeInsets.all(16),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(product.name,
                    style: Theme.of(context).textTheme.titleLarge),
                const SizedBox(height: 8),
                Text('${product.price} YER',
                    style: const TextStyle(
                        fontSize: 20, fontWeight: FontWeight.bold)),
                const SizedBox(height: 16),
                Text(product.description),
              ],
            ),
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class UploadProductPage extends StatelessWidget {
  const UploadProductPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬')),
      body: const Center(
        child: Text('Ù†Ù…ÙˆØ°Ø¬ Ø±ÙØ¹ Ø§Ù„Ù…Ù†ØªØ¬ (Ù‚Ø§Ø¯Ù… Ø§Ù„Ø¢Ù†)'),
      ),
    );
  }
}
import 'dart:io';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_storage/firebase_storage.dart';

class ProductService {
  final FirebaseFirestore _firestore = FirebaseFirestore.instance;
  final FirebaseStorage _storage = FirebaseStorage.instance;

  Future<void> addProduct({
    required String name,
    required double price,
    required String description,
    required File imageFile,
    required String merchantId,
  }) async {
    // Ø¥Ù†Ø´Ø§Ø¡ ID Ù„Ù„Ù…Ù†ØªØ¬
    final productRef = _firestore.collection('products').doc();
    final productId = productRef.id;

    // Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Firebase Storage
    final storageRef = _storage
        .ref()
        .child('products/$merchantId/$productId.jpg');

    await storageRef.putFile(imageFile);

    final imageUrl = await storageRef.getDownloadURL();

    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Firestore
    await productRef.set({
      'name': name,
      'price': price,
      'description': description,
      'imageUrl': imageUrl,
      'merchantId': merchantId,
      'createdAt': FieldValue.serverTimestamp(),
    });
  }
}
import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../../core/firebase/firebase_service.dart';
import 'product_details_page.dart';
import 'product_model.dart';

class ProductsGridPage extends StatelessWidget {
  const ProductsGridPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')),
      body: StreamBuilder<QuerySnapshot>(
        stream: FirebaseService.products.snapshots(),
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          return GridView.builder(
            padding: const EdgeInsets.all(8),
            gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
              crossAxisCount: 2,
              childAspectRatio: 0.7,
              crossAxisSpacing: 8,
              mainAxisSpacing: 8,
            ),
            itemCount: snapshot.data!.docs.length,
            itemBuilder: (context, i) {
              final doc = snapshot.data!.docs[i];
              final product =
                  Product.fromMap(doc.id, doc.data() as Map<String, dynamic>);

              return GestureDetector(
                onTap: () {
                  Navigator.push(
                    context,
                    MaterialPageRoute(
                      builder: (_) => ProductDetailsPage(product: product),
                    ),
                  );
                },
                child: Card(
                  child: Column(
                    children: [
                      Expanded(
                        child: Image.network(
                          product.images.first,
                          fit: BoxFit.cover,
                          width: double.infinity,
                        ),
                      ),
                      Padding(
                        padding: const EdgeInsets.all(8),
                        child: Column(
                          children: [
                            Text(product.name,
                                maxLines: 1,
                                overflow: TextOverflow.ellipsis),
                            const SizedBox(height: 4),
                            Text('${product.price} YER',
                                style: const TextStyle(
                                    fontWeight: FontWeight.bold)),
                          ],
                        ),
                      ),
                    ],
                  ),
                ),
              );
            },
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../widgets/product_card.dart';

class ProductsPage extends StatelessWidget {
  const ProductsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³ÙˆÙ‚')),
      body: GridView.builder(
        padding: const EdgeInsets.all(12),
        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
          crossAxisCount: 2,
          childAspectRatio: 0.75,
          crossAxisSpacing: 12,
          mainAxisSpacing: 12,
        ),
        itemCount: 10,
        itemBuilder: (_, i) => const ProductCard(
          title: 'Ù…Ù†ØªØ¬ ØªØ¬Ø±ÙŠØ¨ÙŠ',
          price: '2500',
        ),
      ),
    );
  }
}
class CartItemModel {
  final String productId;
  final String name;
  final double price;
  final int quantity;

  CartItemModel({
    required this.productId,
    required this.name,
    required this.price,
    required this.quantity,
  });

  Map<String, dynamic> toJson() {
    return {
      'productId': productId,
      'name': name,
      'price': price,
      'quantity': quantity,
    };
  }

  factory CartItemModel.fromJson(Map<String, dynamic> json) {
    return CartItemModel(
      productId: json['productId'],
      name: json['name'],
      price: (json['price'] as num).toDouble(),
      quantity: json['quantity'],
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'cart_item_model.dart';

class CartService {
  final _db = FirebaseFirestore.instance.collection('carts');

  Future<void> addToCart(String userId, CartItemModel item) async {
    await _db
        .doc(userId)
        .collection('items')
        .doc(item.productId)
        .set(item.toJson());
  }

  Stream<List<CartItemModel>> getCart(String userId) {
    return _db.doc(userId).collection('items').snapshots().map(
          (snapshot) => snapshot.docs
              .map((doc) => CartItemModel.fromJson(doc.data()))
              .toList(),
        );
  }
}
import 'package:flutter/material.dart';

class CartPage extends StatelessWidget {
  const CartPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø³Ù„Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª')),
      body: ListView(
        padding: const EdgeInsets.all(16),
        children: [
          _cartItem(),
          _cartItem(),
          const SizedBox(height: 24),
          ElevatedButton(
            onPressed: () {},
            child: const Text('Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡'),
          ),
        ],
      ),
    );
  }

  Widget _cartItem() {
    return Container(
      margin: const EdgeInsets.only(bottom: 12),
      padding: const EdgeInsets.all(12),
      decoration: BoxDecoration(
        color: Colors.grey.shade900,
        borderRadius: BorderRadius.circular(16),
      ),
      child: Row(
        children: const [
          Icon(Icons.shopping_bag),
          SizedBox(width: 12),
          Expanded(child: Text('Ù…Ù†ØªØ¬')),
          Text('10\$'),
        ],
      ),
    );
  }
}
import '../../data/cart_item_model.dart';

abstract class CartState {}

class CartInitial extends CartState {}

class CartLoaded extends CartState {
  final List<CartItemModel> items;
  CartLoaded(this.items);
}
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../data/cart_service.dart';
import 'cart_state.dart';

class CartCubit extends Cubit<CartState> {
  final CartService service;

  CartCubit(this.service) : super(CartInitial());

  void loadCart(String userId) {
    service.getCart(userId).listen(
      (items) => emit(CartLoaded(items)),
    );
  }
}
import 'package:flutter/material.dart';
import '../../services/cart_service.dart';
import '../../../core/auth/guest_guard.dart';

class CartPage extends StatelessWidget {
  const CartPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³Ù„Ø©')),
      body: Column(
        children: [
          const Expanded(
            child: Center(child: Text('Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø©')),
          ),
          ElevatedButton(
            onPressed: () {
              GuestGuard.check(
                context: context,
                onAllowed: () {
                  Navigator.pushNamed(context, '/orders');
                },
              );
            },
            child: const Text('Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡'),
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class CartPage extends StatelessWidget {
  const CartPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³Ù„Ø©')),
      body: const Center(child: Text('Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø©')),
    );
  }
}
import 'package:flutter/material.dart';
import '../../data/moc/products_moc.dart';

class CartProvider extends ChangeNotifier {
  final List<Product> _items = [];

  List<Product> get items => _items;

  double get total =>
      _items.fold(0, (sum, p) => sum + p.price);

  void add(Product p) {
    _items.add(p);
    notifyListeners();
  }

  void remove(Product p) {
    _items.remove(p);
    notifyListeners();
  }
}
class CartItem {
  final String productId;
  final String name;
  final double price;
  final int quantity;

  CartItem({
    required this.productId,
    required this.name,
    required this.price,
    required this.quantity,
  });

  Map<String, dynamic> toMap() {
    return {
      'productId': productId,
      'name': name,
      'price': price,
      'quantity': quantity,
    };
  }

  factory CartItem.fromMap(Map<String, dynamic> map) {
    return CartItem(
      productId: map['productId'],
      name: map['name'],
      price: map['price'],
      quantity: map['quantity'],
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';
import '../model/cart_item.dart';

class CartService {
  static String get uid =>
      FirebaseAuth.instance.currentUser!.uid;

  static CollectionReference get _cartRef =>
      FirebaseFirestore.instance
          .collection('carts')
          .doc(uid)
          .collection('items');

  static Future<void> addToCart(CartItem item) async {
    final doc = _cartRef.doc(item.productId);
    final snap = await doc.get();

    if (snap.exists) {
      await doc.update({
        'quantity': (snap['quantity'] ?? 1) + 1,
      });
    } else {
      await doc.set(item.toMap());
    }
  }

  static Stream<List<CartItem>> cartStream() {
    return _cartRef.snapshots().map(
      (snapshot) => snapshot.docs
          .map((e) => CartItem.fromMap(e.data() as Map<String, dynamic>))
          .toList(),
    );
  }

  static Future<void> clearCart() async {
    final items = await _cartRef.get();
    for (var doc in items.docs) {
      await doc.reference.delete();
cat > lib/features/cart/view/cart_page.dart <<'EOF'
import 'package:flutter/material.dart';
import '../service/cart_service.dart';
import '../model/cart_item.dart';

class CartPage extends StatelessWidget {
  const CartPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³Ù„Ø©')),
      body: StreamBuilder<List<CartItem>>(
        stream: CartService.cartStream(),
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          final items = snapshot.data!;
          if (items.isEmpty) {
            return const Center(child: Text('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±
import '../../cart/service/cart_service.dart';
import '../../cart/model/cart_item.dart';

ElevatedButton(
  onPressed: () {
    CartService.addToCart(
      CartItem(
        productId: product.id,
        name: product.name,
        price: product.price,
        quantity: 1,
      ),
    );
  },
  child: const Text('Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©'),
)
mkdir -p lib/core/auth
mkdir -p lib/features/auth/view
cat > lib/core/auth/auth_helper.dart <<'EOF'
import 'package:firebase_auth/firebase_auth.dart';

class AuthHelper {
  static User? get user => FirebaseAuth.instance.currentUser;

  static bool get isLoggedIn =>
      user != null && !user!.isAnonymous;

  static bool get isGuest =>
      user != null && user!.isAnonymous;
}
import 'package:flutter/material.dart';
import '../../../core/auth/guest_guard.dart';

class CheckoutButton extends StatelessWidget {
  const CheckoutButton({super.key});

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: () {
        GuestGuard.check(
          context: context,
          onAllowed: () {
            // Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ø¯ÙØ¹
            // Navigator.push(context, ...);
          },
        );
      },
      child: const Text('Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡'),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../core/auth/guest_guard.dart';

class CartPage extends StatelessWidget {
  const CartPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³Ù„Ø©')),
      body: Center(
        child: ElevatedButton(
          onPressed: () {
            GuestGuard.check(
              context: context,
              onAllowed: () {
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(content: Text('ØªÙ… Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ø¯ÙØ¹')),
                );
              },
            );
          },
          child: const Text('Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡'),
        ),
      ),
    );
  }
}
class CartService {
  static final List<String> _guestCart = [];
  static final List<String> _userCart = [];

  static Future<List<String>> getGuestCart() async => _guestCart;

  static Future<void> addToGuestCart(String item) async {
    _guestCart.add(item);
  }

  static Future<void> addToUserCart(String item) async {
    _userCart.add(item);
  }

  static Future<void> clearGuestCart() async {
    _guestCart.clear();
  }

  static List<String> get userCart => _userCart;
}
class Order {
  final String id;
  final String sellerId;
  final double productPrice;
  final double commission;
  final double sellerProfit;
  final DateTime createdAt;

  Order({
    required this.id,
    required this.sellerId,
    required this.productPrice,
    required this.commission,
    required this.sellerProfit,
    required this.createdAt,
  });

  factory Order.fromMap(String id, Map<String, dynamic> data) {
    return Order(
      id: id,
      sellerId: data['sellerId'],
      productPrice: data['productPrice'],
      commission: data['commission'],
      sellerProfit: data['sellerProfit'],
      createdAt: DateTime.parse(data['createdAt']),
    );
  }

  Map<String, dynamic> toMap() {
    return {
      'sellerId': sellerId,
      'productPrice': productPrice,
      'commission': commission,
      'sellerProfit': sellerProfit,
      'createdAt': createdAt.toIso8601String(),
    };
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'order_model.dart';

class OrderService {
  final _db = FirebaseFirestore.instance.collection('orders');

  Future<void> createOrder(String userId, OrderModel order) async {
    await _db.doc(userId).collection('user_orders').add(order.toJson());
  }
}
import 'package:flutter/material.dart';

class OrdersPage extends StatelessWidget {
  const OrdersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Orders')),
      body: const Center(
        child: Text('Orders History'),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class OrdersPage extends StatelessWidget {
  const OrdersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      appBar: AppBar(title: Text('Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
      body: Center(child: Text('Ø·Ù„Ø¨Ø§ØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©')),
    );
  }
}
import '../../payments/services/wallet_service.dart';

class OrderFinancialService {
  final WalletService _wallet = WalletService();

  Map<String, double> calculateOrder(double totalPrice) {
    final commission = _wallet.calculateCommission(totalPrice);
    final sellerProfit = _wallet.sellerNetProfit(totalPrice);

    return {
      'total': totalPrice,
      'commission': commission,
      'seller_profit': sellerProfit,
    };
  }
}
import 'package:flutter/material.dart';

class OrdersPage extends StatelessWidget {
  const OrdersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
      body: const Center(child: Text('Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
    );
  }
}
import 'package:flutter/material.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Yemen Market'),
      ),
      body: const Center(
        child: Text(
          'Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†',
          style: TextStyle(fontSize: 18),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        child: const Icon(Icons.chat),
        onPressed: () {
          Navigator.pushNamed(context, '/chat');
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';

class SectionCard extends StatelessWidget {
  final String title;
  final IconData icon;
  final VoidCallback onTap;

  const SectionCard({
    super.key,
    required this.title,
    required this.icon,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      child: ListTile(
        leading: Icon(icon),
        title: Text(title),
        trailing: const Icon(Icons.arrow_forward_ios),
        onTap: onTap,
      ),
    );
  }
}
import 'package:flutter/material.dart';

import '../widgets/animated_ad_banner.dart';
import '../../../admin/services/admin_ads_service.dart';

class ServicesPage extends StatelessWidget {
  const ServicesPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('ğŸ›ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª'),
        centerTitle: true,
      ),
      body: ListView(
        children: [
          /// ğŸ”¥ Ø¨Ø§Ù†Ø± Ø¥Ø¹Ù„Ø§Ù†ÙŠ Ù…ØªØ­Ø±Ùƒ (ÙŠØªØºÙŠØ± Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†)
          AnimatedAdBanner(
            animationPath: AdminAdsService.currentBanner(),
          ),

          const SizedBox(height: 12),

          /// ğŸ§  Ø¹Ù†ÙˆØ§Ù† Ø°ÙƒÙŠ
          const Padding(
            padding: EdgeInsets.symmetric(horizontal: 16),
            child: Text(
              'Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
              style: TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
              ),
            ),
          ),

          const SizedBox(height: 8),

          /// ğŸ“¦ Ù…Ø«Ø§Ù„ ÙƒØ±ÙˆØª Ø®Ø¯Ù…Ø§Øª (Ù…ÙƒØ§Ù† Ø§Ù„ØªÙˆØ³Ø¹Ø©)
          _ServiceCard(title: 'âœˆï¸ Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†'),
          _ServiceCard(title: 'ğŸ¨ Ø­Ø¬Ø² ÙÙ†Ø§Ø¯Ù‚'),
          _ServiceCard(title: 'ğŸ“¡ Ø´Ø­Ù† ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø¥Ù†ØªØ±Ù†Øª'),
          _ServiceCard(title: 'ğŸ® Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ´Ø­Ù†'),
          _ServiceCard(title: 'ğŸ’³ Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ'),
          _ServiceCard(title: 'ğŸ’ Ø®Ø¯Ù…Ø§Øª VIP'),
        ],
      ),
    );
  }
}

/// ğŸ§± ÙƒØ±Øª Ø®Ø¯Ù…Ø© â€“ Ø¨Ø³ÙŠØ· ÙˆÙ‚Ø§Ø¨Ù„ Ù„Ù„ØªØ·ÙˆÙŠØ±
class _ServiceCard extends StatelessWidget {
  final String title;

  const _ServiceCard({required this.title});

  @override
  Widget build(BuildContext context) {
    return Card(
      margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 6),
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(14),
      ),
      child: ListTile(
        title: Text(title),
        trailing: const Icon(Icons.arrow_forward_ios, size: 16),
        onTap: () {},
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../models/service_model.dart';

class ServiceDetailsPage extends StatelessWidget {
  const ServiceDetailsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final ServiceModel service =
        ModalRoute.of(context)!.settings.arguments as ServiceModel;

    return Scaffold(
      appBar: AppBar(
        title: Text(service.title),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              service.title,
              style: const TextStyle(
                fontSize: 22,
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 12),
            Text(
              service.description,
              style: const TextStyle(fontSize: 16),
            ),
            const Spacer(),
            ElevatedButton.icon(
              onPressed: () {
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(
                    content: Text('Ø³ÙŠØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø®Ø¯Ù…Ø© Ù‚Ø±ÙŠØ¨Ù‹Ø§ ğŸš€'),
                  ),
                );
              },
              icon: const Icon(Icons.shopping_cart),
              label: const Text('Ù…ØªØ§Ø¨Ø¹Ø©'),
              style: ElevatedButton.styleFrom(
                minimumSize: const Size(double.infinity, 48),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:lottie/lottie.dart';

class AnimatedAdBanner extends StatelessWidget {
  final String animationPath;

  const AnimatedAdBanner({
    super.key,
    required this.animationPath,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 180,
      margin: const EdgeInsets.all(12),
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(20),
        color: Colors.black12,
      ),
      child: ClipRRect(
        borderRadius: BorderRadius.circular(20),
        child: Lottie.asset(
          animationPath,
          fit: BoxFit.cover,
        ),
      ),
    );
  }
}
class ServiceModel {
  final String id;
  final String title;
  final String description;
  final String icon;
  final bool adminOnly;

  ServiceModel({
    required this.id,
    required this.title,
    required this.description,
    required this.icon,
    this.adminOnly = false,
  });
}
class ServiceStats {
  static final Map<String, int> usage = {};

  static void hit(String service) {
    usage[service] = (usage[service] ?? 0) + 1;
  }

  static List<String> sortByUsage(List<String> services) {
    services.sort(
      (a, b) => (usage[b] ?? 0).compareTo(usage[a] ?? 0),
    );
    return services;
  }
}
import 'package:flutter/material.dart';

class MarketCategory {
  final String id;
  final String title;
  final IconData icon;

  const MarketCategory({
    required this.id,
    required this.title,
    required this.icon,
  });
}
import 'package:flutter/material.dart';
import '../models/category_model.dart';

const marketCategories = [
  MarketCategory(id: 'food', title: 'Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ù…Ø£ÙƒÙˆÙ„Ø§Øª', icon: Icons.restaurant),
  MarketCategory(id: 'real_estate', title: 'Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª', icon: Icons.home),
  MarketCategory(id: 'travel', title: 'Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„Ø³ÙŠØ§Ø­Ø©', icon: Icons.flight),
  MarketCategory(id: 'digital', title: 'Ø´Ø­Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„Ø£Ø±ØµØ¯Ø©', icon: Icons.videogame_asset),
  MarketCategory(id: 'trade', title: 'Ø§Ù„ØªØ¬Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ù…Ø©', icon: Icons.store),
  MarketCategory(id: 'services', title: 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª', icon: Icons.handyman),
  MarketCategory(id: 'auctions', title: 'Ø§Ù„Ù…Ø²Ø§Ø¯Ø§Øª', icon: Icons.gavel),
  MarketCategory(id: 'events', title: 'Ø§Ù„Ø£Ø¹Ø±Ø§Ø³ ÙˆØ§Ù„ÙØ¹Ø§Ù„ÙŠØ§Øª', icon: Icons.celebration),
];
import 'package:flutter/material.dart';
import '../data/categories_data.dart';

class CategoriesPage extends StatelessWidget {
  const CategoriesPage({super.key});

  @override
  Widget build(BuildContext context) {
    return GridView.builder(
      padding: const EdgeInsets.all(16),
      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
        crossAxisCount: 2,
        childAspectRatio: 1.1,
        crossAxisSpacing: 16,
        mainAxisSpacing: 16,
      ),
      itemCount: marketCategories.length,
      itemBuilder: (context, i) {
        final c = marketCategories[i];
        return Card(
          elevation: 6,
          shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
          child: InkWell(
            borderRadius: BorderRadius.circular(16),
            onTap: () {},
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Icon(c.icon, size: 42),
                const SizedBox(height: 12),
                Text(c.title, textAlign: TextAlign.center),
              ],
            ),
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';

class StoreCard extends StatelessWidget {
  final String name;
  final String category;

  const StoreCard({
    super.key,
    required this.name,
    required this.category,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(16),
      decoration: const BoxDecoration(
        color: Color(0xFF1E293B),
        borderRadius: BorderRadius.vertical(top: Radius.circular(20)),
      ),
      child: Column(
        mainAxisSize: MainAxisSize.min,
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            name,
            style: const TextStyle(
              color: Colors.white,
              fontSize: 18,
              fontWeight: FontWeight.bold,
            ),
          ),
          const SizedBox(height: 6),
          Text(
            category,
            style: const TextStyle(color: Colors.white54),
          ),
          const SizedBox(height: 12),
          SizedBox(
            width: double.infinity,
            child: ElevatedButton(
              onPressed: () {},
              child: const Text('Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª'),
            ),
          )
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../data/store_service.dart';
import '../data/store_model.dart';

class MapPage extends StatelessWidget {
  MapPage({super.key});

  final StoreService _service = StoreService();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Stores Map')),
      body: StreamBuilder<List<Store>>(
        stream: _service.getStores(),
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          final stores = snapshot.data!;
          return ListView.builder(
            itemCount: stores.length,
            itemBuilder: (_, i) {
              final store = stores[i];
              return ListTile(
                leading: const Icon(Icons.store),
                title: Text(store.name),
                subtitle: Text('(${store.lat}, ${store.lng})'),
              );
            },
          );
        },
      ),
    );
  }
}
class Store {
  final String id;
  final String name;
  final double lat;
  final double lng;

  Store({
    required this.id,
    required this.name,
    required this.lat,
    required this.lng,
  });

  factory Store.fromMap(String id, Map<String, dynamic> data) {
    return Store(
      id: id,
      name: data['name'],
      lat: (data['lat'] as num).toDouble(),
      lng: (data['lng'] as num).toDouble(),
    );
  }

  Map<String, dynamic> toMap() {
    return {
      'name': name,
      'lat': lat,
      'lng': lng,
    };
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'store_model.dart';

class StoreService {
  final _db = FirebaseFirestore.instance;

  Stream<List<Store>> getStores() {
    return _db.collection('stores').snapshots().map(
          (s) => s.docs.map((d) => Store.fromMap(d.id, d.data())).toList(),
        );
  }
}
class SellerModel {
  final String id;
  final String storeName;
  final bool isApproved;

  SellerModel({
    required this.id,
    required this.storeName,
    required this.isApproved,
  });
}
class SellerProductModel {
  final String id;
  final String name;
  final double price;
  final bool approved;

  SellerProductModel({
    required this.id,
    required this.name,
    required this.price,
    required this.approved,
  });
}
class SellerContract {
  static const String terms = '''
1. ÙŠÙˆØ§ÙÙ‚ Ø§Ù„ØªØ§Ø¬Ø± Ø¹Ù„Ù‰ Ø®ØµÙ… Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.
2. ÙŠÙ„ØªØ²Ù… Ø§Ù„ØªØ§Ø¬Ø± Ø¨ØµØ­Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª.
3. ÙŠØ­Ù‚ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©.
4. Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ØªÙØ­ÙˆÙ‘Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¥Ù„Ù‰ Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªØ§Ø¬Ø±.
5. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø¶Ø¹Ø© Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ø¸Ø§Ù….
''';
}
import 'package:flutter/material.dart';

class StatCard extends StatelessWidget {
  final String title;
  final String value;

  const StatCard({
    super.key,
    required this.title,
    required this.value,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: const Color(0xFF1E293B),
        borderRadius: BorderRadius.circular(16),
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(title, style: const TextStyle(color: Colors.white54)),
          const SizedBox(height: 8),
          Text(
            value,
            style: const TextStyle(
              color: Colors.white,
              fontSize: 22,
              fontWeight: FontWeight.bold,
            ),
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'widgets/stat_card.dart';

class SellerDashboardPage extends StatelessWidget {
  const SellerDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xFF121826),
      appBar: AppBar(
        backgroundColor: const Color(0xFF121826),
        elevation: 0,
        title: const Text('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø±'),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {},
        child: const Icon(Icons.add),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            _statusBanner(),
            const SizedBox(height: 16),
            GridView.count(
              shrinkWrap: true,
              crossAxisCount: 2,
              mainAxisSpacing: 12,
              crossAxisSpacing: 12,
              childAspectRatio: 1.4,
              children: const [
                StatCard(title: 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', value: '12'),
                StatCard(title: 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©', value: '3'),
                StatCard(title: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª', value: '5'),
                StatCard(title: 'Ø§Ù„Ø­Ø³Ø§Ø¨', value: 'Ù…ÙØ¹Ù„'),
              ],
            ),
          ],
        ),
      ),
    );
  }

  Widget _statusBanner() {
    return Container(
      width: double.infinity,
      padding: const EdgeInsets.all(16),
      decoration: BoxDecoration(
        color: Colors.green.shade700,
        borderRadius: BorderRadius.circular(16),
      ),
      child: const Text(
        'Ø­Ø³Ø§Ø¨Ùƒ Ù…ÙØ¹Ù„ ÙˆÙŠÙ…ÙƒÙ†Ùƒ Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª',
        style: TextStyle(color: Colors.white),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../products/models/product.dart';
import '../../products/services/product_service.dart';

class AddProductPage extends StatelessWidget {
  AddProductPage({super.key});

  final TextEditingController nameCtrl = TextEditingController();
  final TextEditingController priceCtrl = TextEditingController();
  final ProductService _service = ProductService();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Add Product')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: nameCtrl,
              decoration: const InputDecoration(labelText: 'Product Name'),
            ),
            TextField(
              controller: priceCtrl,
              keyboardType: TextInputType.number,
              decoration: const InputDecoration(labelText: 'Price'),
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () async {
                final product = Product(
                  id: '',
                  name: nameCtrl.text,
                  price: double.parse(priceCtrl.text),
                  sellerId: 'SELLER_ID_HERE',
                  approved: false,
                );

                await _service.addProduct(product);
                Navigator.pop(context);
              },
              child: const Text('Submit'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class SellerDashboard extends StatelessWidget {
  const SellerDashboard({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      appBar: AppBar(title: Text('Ù„ÙˆØ­Ø© Ø§Ù„Ø¨Ø§Ø¦Ø¹')),
      body: Center(child: Text('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª / Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/admin_service.dart';
import '../models/admin_product_model.dart';

class ReviewProductsPage extends StatelessWidget {
  const ReviewProductsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final service = AdminService();

    service.products.add(
      AdminProduct(
        id: 'p1',
        name: 'Ø±Ø² ÙŠÙ…Ù†ÙŠ',
        price: 8000,
        sellerId: 's1',
        approved: false,
      ),
    );

    return Scaffold(
      appBar: AppBar(title: const Text('Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')),
      body: ListView.builder(
        itemCount: service.products.length,
        itemBuilder: (context, i) {
          final product = service.products[i];
          return Card(
            child: ListTile(
              title: Text(product.name),
              subtitle: Text('${product.price} Ø±ÙŠØ§Ù„'),
              trailing: ElevatedButton(
                onPressed: product.approved
                    ? null
                    : () => service.approveProduct(product.id),
                child: const Text('Ù…ÙˆØ§ÙÙ‚Ø©'),
              ),
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';

class AdminDashboardPage extends StatelessWidget {
  const AdminDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            _AdminButton(
              title: 'Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©',
              icon: Icons.account_balance_wallet,
              onTap: () =>
                  Navigator.pushNamed(context, '/wallet-settings'),
            ),
            _AdminButton(
              title: 'Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ',
              icon: Icons.payments,
              onTap: () =>
                  Navigator.pushNamed(context, '/manual-payment'),
            ),
          ],
        ),
      ),
    );
  }
}

class _AdminButton extends StatelessWidget {
  final String title;
  final IconData icon;
  final VoidCallback onTap;

  const _AdminButton({
    required this.title,
    required this.icon,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      margin: const EdgeInsets.only(bottom: 12),
      child: ListTile(
        leading: Icon(icon, size: 32),
        title: Text(
          title,
          style: const TextStyle(fontSize: 16, fontWeight: FontWeight.bold),
        ),
        trailing: const Icon(Icons.arrow_forward_ios),
        onTap: onTap,
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/admin_service.dart';
import '../models/seller_model.dart';

class ReviewSellersPage extends StatelessWidget {
  const ReviewSellersPage({super.key});

  @override
  Widget build(BuildContext context) {
    final service = AdminService();

    service.sellers.add(
      SellerModel(
        id: 's1',
        name: 'ØªØ§Ø¬Ø± ØµÙ†Ø¹Ø§Ø¡',
        approved: false,
        createdAt: DateTime.now(),
      ),
    );

    return Scaffold(
      appBar: AppBar(title: const Text('Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ØªØ¬Ø§Ø±')),
      body: ListView.builder(
        itemCount: service.sellers.length,
        itemBuilder: (context, i) {
          final seller = service.sellers[i];
          return Card(
            child: ListTile(
              title: Text(seller.name),
              subtitle: Text(
                seller.approved ? 'Ù…ÙØ¹Ù„' : 'Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©',
              ),
              trailing: ElevatedButton(
                onPressed: seller.approved
                    ? null
                    : () => service.approveSeller(seller.id),
                child: const Text('Ù…ÙˆØ§ÙÙ‚Ø©'),
              ),
            ),
          );
        },
      ),
    );
  }
}
class AdminReport {
  final String sellerId;
  final double totalSales;
  final double totalCommission;
  final double netProfit;

  AdminReport({
    required this.sellerId,
    required this.totalSales,
    required this.totalCommission,
    required this.netProfit,
  });

  Map<String, dynamic> toJson() => {
    'seller_id': sellerId,
    'total_sales': totalSales,
    'total_commission': totalCommission,
    'net_profit': netProfit,
  };
}
import 'admin_report_model.dart';

class AdminReportService {
  AdminReport generateReport({
    required String sellerId,
    required double totalSales,
    required double commission,
  }) {
    return AdminReport(
      sellerId: sellerId,
      totalSales: totalSales,
      totalCommission: commission,
      netProfit: totalSales - commission,
    );
  }
}
class AdminReport {
  final int totalOrders;
  final int totalSellers;
  final double totalRevenue;
  final double marketCommission;

  AdminReport({
    required this.totalOrders,
    required this.totalSellers,
    required this.totalRevenue,
    required this.marketCommission,
  });
}
import 'report_model.dart';

class ReportService {
  AdminReport generate({
    required int orders,
    required int sellers,
    required double revenue,
    required double commissionRate,
  }) {
    return AdminReport(
      totalOrders: orders,
      totalSellers: sellers,
      totalRevenue: revenue,
      marketCommission: revenue * commissionRate,
    );
  }
}
import 'package:flutter/material.dart';
import 'report_service.dart';

class AdminReportsPage extends StatelessWidget {
  const AdminReportsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final report = ReportService().generate(
      orders: 120,
      sellers: 15,
      revenue: 850000,
      commissionRate: 0.05,
    );

    return Scaffold(
      appBar: AppBar(title: const Text('ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³ÙˆÙ‚')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            _item('Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª', report.totalOrders.toString()),
            _item('Ø¹Ø¯Ø¯ Ø§Ù„ØªØ¬Ø§Ø±', report.totalSellers.toString()),
            _item('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', '${report.totalRevenue} Ø±ÙŠØ§Ù„'),
            _item('Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚', '${report.marketCommission} Ø±ÙŠØ§Ù„'),
          ],
        ),
      ),
    );
  }

  Widget _item(String title, String value) {
    return Card(
      child: ListTile(
        title: Text(title),
        trailing: Text(value,
            style: const TextStyle(fontWeight: FontWeight.bold)),
      ),
    );
  }
}
import '../models/seller_model.dart';
import '../models/admin_product_model.dart';

class AdminService {
  final List<SellerModel> sellers = [];
  final List<AdminProduct> products = [];

  void approveSeller(String id) {
    final index = sellers.indexWhere((s) => s.id == id);
    if (index != -1) {
      sellers[index] = sellers[index].copyWith(approved: true);
    }
  }

  void approveProduct(String id) {
    final index = products.indexWhere((p) => p.id == id);
    if (index != -1) {
      products[index] = products[index].copyWith(approved: true);
    }
  }
}
class AdminAdsService {
  static String currentBanner() {
    // Ù„Ø§Ø­Ù‚Ù‹Ø§: Firebase / API
    return 'assets/animations/banner.json';
  }
}
class SellerModel {
  final String id;
  final String name;
  final bool approved;
  final DateTime createdAt;

  SellerModel({
    required this.id,
    required this.name,
    required this.approved,
    required this.createdAt,
  });

  SellerModel copyWith({bool? approved}) {
    return SellerModel(
      id: id,
      name: name,
      approved: approved ?? this.approved,
      createdAt: createdAt,
    );
  }
}
class AdminProduct {
  final String id;
  final String name;
  final double price;
  final String sellerId;
  final bool approved;

  AdminProduct({
    required this.id,
    required this.name,
    required this.price,
    required this.sellerId,
    required this.approved,
  });

  AdminProduct copyWith({bool? approved}) {
    return AdminProduct(
      id: id,
      name: name,
      price: price,
      sellerId: sellerId,
      approved: approved ?? this.approved,
    );
  }
}
import 'package:flutter/material.dart';
import '../services/admin_offer_service.dart';

class AdminOffersPage extends StatelessWidget {
  const AdminOffersPage({super.key});

  @override
  Widget build(BuildContext context) {
    final offers = AdminOfferService.activeOffers;

    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶')),
      body: ListView.builder(
        itemCount: offers.length,
        itemBuilder: (_, i) => ListTile(
          title: Text(offers[i].title),
          subtitle: Text(offers[i].description),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          AdminOfferService.addOffer(
            AdminOffer(
              title: 'ğŸ”¥ Ø¹Ø±Ø¶ Ø¬Ø¯ÙŠØ¯',
              description: 'Ø®ØµÙ… Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©',
              route: '/services',
            ),
          );
        },
        child: const Icon(Icons.add),
      ),
    );
  }
}
import '../models/admin_offer.dart';

class AdminOfferService {
  static final List<AdminOffer> _offers = [];

  static List<AdminOffer> get activeOffers =>
      _offers.where((o) => o.active).toList();

  static void addOffer(AdminOffer offer) {
    _offers.add(offer);
  }

  static void removeOffer(AdminOffer offer) {
    _offers.remove(offer);
  }
}
class AdminOffer {
  final String title;
  final String description;
  final String route;
  final bool vipOnly;
  final bool active;

  AdminOffer({
    required this.title,
    required this.description,
    required this.route,
    this.vipOnly = false,
    this.active = true,
  });
}
import 'package:flutter/material.dart';

class AdminDashboardPage extends StatelessWidget {
  const AdminDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ› ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©')),
      body: ListView(
        padding: const EdgeInsets.all(16),
        children: const [
          ListTile(
            leading: Icon(Icons.campaign),
            title: Text('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª'),
          ),
          ListTile(
            leading: Icon(Icons.star),
            title: Text('Ø®Ø¯Ù…Ø§Øª VIP'),
          ),
          ListTile(
            leading: Icon(Icons.discount),
            title: Text('Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶'),
          ),
          ListTile(
            leading: Icon(Icons.analytics),
            title: Text('Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±'),
          ),
        ],
      ),
    );
  }
}
class PaymentMethod {
  final String id;
  final String name;
  final String type; // wallet | bank | cash
  final bool active;

  PaymentMethod({
    required this.id,
    required this.name,
    required this.type,
    required this.active,
  });

  factory PaymentMethod.fromMap(String id, Map<String, dynamic> data) {
    return PaymentMethod(
      id: id,
      name: data['name'],
      type: data['type'],
      active: data['active'],
    );
  }
}
class Wallet {
  final String ownerId;
  final double balance;

  Wallet({
    required this.ownerId,
    required this.balance,
  });

  factory Wallet.fromMap(Map<String, dynamic> data) {
    return Wallet(
      ownerId: data['ownerId'],
      balance: (data['balance'] as num).toDouble(),
    );
  }

  Map<String, dynamic> toMap() {
    return {
      'ownerId': ownerId,
      'balance': balance,
    };
  }
}
import 'package:flutter/material.dart';

class PaymentsPage extends StatelessWidget {
  const PaymentsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø·Ø±Ù‚ Ø§Ù„Ø¯ÙØ¹')),
      body: ListView(
        children: const [
          ListTile(title: Text('Ù…Ø­ÙØ¸Ø©')),
          ListTile(title: Text('ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ')),
          ListTile(title: Text('Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…')),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class PaymentPage extends StatelessWidget {
  final double amount;

  const PaymentPage({super.key, required this.amount});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¯ÙØ¹')),
      body: Center(
        child: Text('Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: $amount'),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/wallet_service.dart';
import '../models/wallet_model.dart';

class WalletPage extends StatelessWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context) {
    final wallet = Wallet(userId: 'seller_1', balance: 120000);
    final service = WalletService();

    return Scaffold(
      appBar: AppBar(title: const Text('Ù…Ø­ÙØ¸ØªÙŠ')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            Card(
              child: ListTile(
                title: const Text('Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ'),
                trailing: Text('${wallet.balance} Ø±ÙŠØ§Ù„'),
              ),
            ),
            const SizedBox(height: 16),
            Card(
              child: ListTile(
                title: const Text('Ù†Ø³Ø¨Ø© Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚'),
                trailing: Text('${WalletService.commissionRate * 100}%'),
              ),
            ),
            const SizedBox(height: 16),
            Card(
              child: ListTile(
                title: const Text('ØµØ§ÙÙŠ Ù…Ø¨Ù„Øº Ø·Ù„Ø¨ 10,000'),
                trailing: Text(
                  '${service.sellerNetAmount(10000)} Ø±ÙŠØ§Ù„',
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class MerchantContractPage extends StatelessWidget {
  const MerchantContractPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¹Ù‚Ø¯ Ø§Ù„ØªØ§Ø¬Ø±')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: const Text(
          '''
1- ÙŠÙ„ØªØ²Ù… Ø§Ù„ØªØ§Ø¬Ø± Ø¨Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.
2- Ù†Ø³Ø¨Ø© Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚ 5% Ù…Ù† ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹.
3- ÙŠØ­Ù‚ Ù„Ù„Ø³ÙˆÙ‚ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø®Ø§Ù„ÙØ©.
4- ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¥Ù„Ù‰ Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªØ§Ø¬Ø±.
5- ÙŠØ®Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù‚Ø¯ Ù„Ø£Ù†Ø¸Ù…Ø© Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†.
          ''',
          style: TextStyle(fontSize: 16),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/wallet_service.dart';

class WalletSettingsPage extends StatefulWidget {
  const WalletSettingsPage({super.key});

  @override
  State<WalletSettingsPage> createState() => _WalletSettingsPageState();
}

class _WalletSettingsPageState extends State<WalletSettingsPage> {
  final _nameController = TextEditingController();
  final _numberController = TextEditingController();

  @override
  void initState() {
    super.initState();
    _loadWallet();
  }

  Future<void> _loadWallet() async {
    final data = await WalletService.loadWallet();
    _nameController.text = data['name']!;
    _numberController.text = data['number']!;
  }

  Future<void> _saveWallet() async {
    await WalletService.saveWallet(
      name: _nameController.text,
      number: _numberController.text,
    );

    if (!mounted) return;
    ScaffoldMessenger.of(context).showSnackBar(
      const SnackBar(content: Text('ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø© âœ…')),
    );
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­ÙØ¸Ø©')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: _nameController,
              decoration: const InputDecoration(
                labelText: 'Ø§Ø³Ù… ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø­ÙØ¸Ø©',
              ),
            ),
            const SizedBox(height: 12),
            TextField(
              controller: _numberController,
              decoration: const InputDecoration(
                labelText: 'Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©',
              ),
              keyboardType: TextInputType.phone,
            ),
            const SizedBox(height: 24),
            ElevatedButton.icon(
              onPressed: _saveWallet,
              icon: const Icon(Icons.save),
              label: const Text('Ø­ÙØ¸'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

class ManualPaymentPage extends StatefulWidget {
  const ManualPaymentPage({super.key});

  @override
  State<ManualPaymentPage> createState() => _ManualPaymentPageState();
}

class _ManualPaymentPageState extends State<ManualPaymentPage> {
  final _amountController = TextEditingController();
  final _noteController = TextEditingController();
  bool _saved = false;

  Future<void> _savePayment() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString('last_manual_amount', _amountController.text);
    await prefs.setString('last_manual_note', _noteController.text);

    setState(() {
      _saved = true;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ (Ø£Ø¯Ù…Ù†)'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: _amountController,
              keyboardType: TextInputType.number,
              decoration: const InputDecoration(
                labelText: 'Ø§Ù„Ù…Ø¨Ù„Øº',
                border: OutlineInputBorder(),
              ),
            ),
            const SizedBox(height: 12),
            TextField(
              controller: _noteController,
              maxLines: 3,
              decoration: const InputDecoration(
                labelText: 'Ù…Ù„Ø§Ø­Ø¸Ø§Øª',
                border: OutlineInputBorder(),
              ),
            ),
            const SizedBox(height: 20),
            ElevatedButton.icon(
              icon: const Icon(Icons.save),
              label: const Text('Ø­ÙØ¸ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹'),
              onPressed: _savePayment,
            ),
            const SizedBox(height: 20),
            if (_saved)
              const Text(
                'âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ Ø¨Ù†Ø¬Ø§Ø­',
                style: TextStyle(color: Colors.green),
              ),
          ],
        ),
      ),
    );
  }
}
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';

import '../services/wallet_image_service.dart';

class WalletImagePage extends StatefulWidget {
  const WalletImagePage({super.key});

  @override
  State<WalletImagePage> createState() => _WalletImagePageState();
}

class _WalletImagePageState extends State<WalletImagePage> {
  final ImagePicker _picker = ImagePicker();

  Future<void> _pickImage() async {
    final picked =
        await _picker.pickImage(source: ImageSource.gallery);

    if (picked != null) {
      WalletImageService.setImage(File(picked.path));
      setState(() {});
    }
  }

  @override
  Widget build(BuildContext context) {
    final image = WalletImageService.getImage();

    return Scaffold(
      appBar: AppBar(title: const Text('ØµÙˆØ±Ø© Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¯ÙØ¹')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            GestureDetector(
              onTap: _pickImage,
              child: Container(
                height: 200,
                width: double.infinity,
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(12),
                  border: Border.all(color: Colors.grey),
                ),
                child: image == null
                    ? const Center(
                        child: Column(
                          mainAxisAlignment: MainAxisAlignment.center,
                          children: [
                            Icon(Icons.add_a_photo, size: 40),
                            SizedBox(height: 8),
                            Text('Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©'),
                          ],
                        ),
                      )
                    : ClipRRect(
                        borderRadius: BorderRadius.circular(12),
                        child: Image.file(
                          image,
                          fit: BoxFit.cover,
                        ),
                      ),
              ),
            ),
            const SizedBox(height: 20),
            ElevatedButton.icon(
              onPressed: () {
                ScaffoldMessenger.of(context).showSnackBar(
                  const SnackBar(
                    content: Text('âœ… ØªÙ… Ø­ÙØ¸ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©'),
                  ),
                );
              },
              icon: const Icon(Icons.save),
              label: const Text('Ø­ÙØ¸'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'dart:io';
import 'package:flutter/material.dart';

import '../services/wallet_image_service.dart';
import '../services/wallet_service.dart';

class PaymentInfoPage extends StatefulWidget {
  const PaymentInfoPage({super.key});

  @override
  State<PaymentInfoPage> createState() => _PaymentInfoPageState();
}

class _PaymentInfoPageState extends State<PaymentInfoPage> {
  String walletName = '';
  String walletNumber = '';

  @override
  void initState() {
    super.initState();
    _loadWallet();
  }

  Future<void> _loadWallet() async {
    final data = await WalletService.loadWallet();
    setState(() {
      walletName = data['name'] ?? '';
      walletNumber = data['number'] ?? '';
    });
  }

  @override
  Widget build(BuildContext context) {
    final File? walletImage = WalletImageService.getImage();

    return Scaffold(
      appBar: AppBar(title: const Text('Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙØ¹')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            const Text(
              'ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©:',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 16),

            if (walletImage != null)
              ClipRRect(
                borderRadius: BorderRadius.circular(12),
                child: Image.file(
                  walletImage,
                  height: 200,
                  width: double.infinity,
                  fit: BoxFit.cover,
                ),
              )
            else
              const Text('âš ï¸ Ù„Ù… ÙŠØªÙ… ØªØ¹ÙŠÙŠÙ† ØµÙˆØ±Ø© Ù„Ù„Ù…Ø­ÙØ¸Ø©'),

            const SizedBox(height: 16),
            Text('Ø§Ø³Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©: $walletName'),
            const SizedBox(height: 8),
            Text('Ø±Ù‚Ù… Ø§Ù„Ù…Ø­ÙØ¸Ø©: $walletNumber'),

            const SizedBox(height: 24),
            const Text(
              'Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„ØŒ ÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹.',
              style: TextStyle(color: Colors.grey),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/payment_log_service.dart';
import '../models/payment_record.dart';

class PaymentLogPage extends StatefulWidget {
  const PaymentLogPage({super.key});

  @override
  State<PaymentLogPage> createState() => _PaymentLogPageState();
}

class _PaymentLogPageState extends State<PaymentLogPage> {
  @override
  Widget build(BuildContext context) {
    final payments = PaymentLogService.all;

    return Scaffold(
      appBar: AppBar(title: const Text('Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¯ÙØ¹')),
      body: payments.isEmpty
          ? const Center(child: Text('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¯ÙØ¹'))
          : ListView.builder(
              itemCount: payments.length,
              itemBuilder: (context, i) {
                final p = payments[i];
                return Card(
                  margin: const EdgeInsets.all(8),
                  child: ListTile(
                    title: Text('Ø§Ù„Ù…Ø¨Ù„Øº: ${p.amount} Ø±ÙŠØ§Ù„'),
                    subtitle: Text(
                      'Ø§Ù„ØªØ§Ø±ÙŠØ®: ${p.date}',
                    ),
                    trailing: Row(
                      mainAxisSize: MainAxisSize.min,
                      children: [
                        Text(_statusText(p.status)),
                        const SizedBox(width: 8),
                        if (p.status == PaymentStatus.pending)
                          PopupMenuButton<String>(
                            onSelected: (v) {
                              setState(() {
                                if (v == 'approve') {
                                  PaymentLogService.approve(i);
                                } else {
                                  PaymentLogService.reject(i);
                                }
                              });
                            },
                            itemBuilder: (_) => const [
                              PopupMenuItem(
                                value: 'approve',
                                child: Text('Ù‚Ø¨ÙˆÙ„'),
                              ),
                              PopupMenuItem(
                                value: 'reject',
                                child: Text('Ø±ÙØ¶'),
                              ),
                            ],
                          ),
                      ],
                    ),
                  ),
                );
              },
            ),
    );
  }

  String _statusText(PaymentStatus status) {
    switch (status) {
      case PaymentStatus.approved:
        return 'âœ” Ù…Ù‚Ø¨ÙˆÙ„';
      case PaymentStatus.rejected:
        return 'âœ– Ù…Ø±ÙÙˆØ¶';
      default:
        return 'â³ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©';
    }
  }
}
import 'package:flutter/material.dart';
import '../models/payment_result.dart';

class PaymentSummaryWidget extends StatelessWidget {
  final PaymentResult result;

  const PaymentSummaryWidget({super.key, required this.result});

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 4,
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            Text('Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: ${result.originalPrice} Ø±ÙŠØ§Ù„'),
            Text('Ø§Ù„Ø®ØµÙ…: ${result.discountPercent}%'),
            const Divider(),
            Text(
              'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${result.finalPrice} Ø±ÙŠØ§Ù„',
              style: const TextStyle(
                fontSize: 18,
                fontWeight: FontWeight.bold,
                color: Colors.green,
              ),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../services/payment_service.dart';

class PaymentPage extends StatelessWidget {
  final double amount;
  const PaymentPage({super.key, required this.amount});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¯ÙØ¹')),
      body: Center(
        child: ElevatedButton(
          onPressed: () async {
            final success = await PaymentService.pay(amount: amount);
            if (success) {
              ScaffoldMessenger.of(context).showSnackBar(
                const SnackBar(content: Text('ØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­')),
              );
              Navigator.pop(context);
            }
          },
          child: Text('Ø§Ø¯ÙØ¹ $amount'),
        ),
      ),
    );
  }
}
class PaymentMethod {
  final String id;
  final String name;
  final String type; // bank | wallet

  PaymentMethod({
    required this.id,
    required this.name,
    required this.type,
  });
}
class Wallet {
  final String userId;
  final double balance;

  Wallet({
    required this.userId,
    required this.balance,
  });

  Wallet copyWith({double? balance}) {
    return Wallet(
      userId: userId,
      balance: balance ?? this.balance,
    );
  }
}
enum TransactionType { order, commission, payout }

class TransactionModel {
  final String id;
  final String userId;
  final double amount;
  final TransactionType type;
  final DateTime createdAt;

  TransactionModel({
    required this.id,
    required this.userId,
    required this.amount,
    required this.type,
    required this.createdAt,
  });
}
enum PaymentStatus {
  pending,
  approved,
  rejected,
}

class PaymentRecord {
  final double amount;
  final DateTime date;
  PaymentStatus status;

  PaymentRecord({
    required this.amount,
    required this.date,
    this.status = PaymentStatus.pending,
  });
}
class PaymentResult {
  final double originalPrice;
  final double discountPercent;
  final double finalPrice;

  PaymentResult({
    required this.originalPrice,
    required this.discountPercent,
    required this.finalPrice,
  });
}
class SimpleWallet {
  double balance;

  SimpleWallet({this.balance = 0});

  void deposit(double amount) {
    balance += amount;
  }

  bool withdraw(double amount) {
    if (balance >= amount) {
      balance -= amount;
      return true;
    }
    return false;
  }
}
import 'package:shared_preferences/shared_preferences.dart';

class WalletService {
  static const _walletNameKey = 'wallet_name';
  static const _walletNumberKey = 'wallet_number';

  static Future<void> saveWallet({
    required String name,
    required String number,
  }) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_walletNameKey, name);
    await prefs.setString(_walletNumberKey, number);
  }

  static Future<Map<String, String>> loadWallet() async {
    final prefs = await SharedPreferences.getInstance();
    return {
      'name': prefs.getString(_walletNameKey) ?? '',
      'number': prefs.getString(_walletNumberKey) ?? '',
    };
  }
}
class PaymentService {
  static Future<bool> pay({
    required double amount,
  }) async {
    await Future.delayed(const Duration(seconds: 2));
    return true; // Ù…Ø­Ø§ÙƒØ§Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¯ÙØ¹
  }
}
class PayoutService {
  Future<bool> payout({
    required String sellerId,
    required double amount,
  }) async {
    // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ­ÙˆÙŠÙ„
    await Future.delayed(const Duration(seconds: 2));
    return true; // Ù†Ø¬Ø­ Ø§Ù„ØªØ­ÙˆÙŠÙ„
  }
}
import 'dart:io';

class WalletImageService {
  static File? _walletImage;

  static void setImage(File image) {
    _walletImage = image;
  }

  static File? getImage() {
    return _walletImage;
  }

  static bool hasImage() {
    return _walletImage != null;
  }
}
import '../../../core/constants/feature_flags.dart';
import '../../wallet/wallet_service.dart';

class PaymentHandler {
  static void onPaymentSuccess(double amount) {
    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ ÙÙŠ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…ÙŠØ²Ø© Ù…ÙØ¹Ù„Ø©
    if (FeatureFlags.wallet) {
      WalletService.add(amount);
    }

    // Ù„Ø§Ø­Ù‚Ù‹Ø§:
    // AnalyticsService.log('payment_success', data: {'amount': amount});
  }
}
import 'dart:convert';
import 'package:shared_preferences/shared_preferences.dart';

class PaymentLogService {
  static const _key = 'payment_logs';

  static Future<void> addPayment(double amount) async {
    final prefs = await SharedPreferences.getInstance();
    final logs = prefs.getStringList(_key) ?? [];

    logs.add(jsonEncode({
      'amount': amount,
      'date': DateTime.now().toIso8601String(),
    }));

    await prefs.setStringList(_key, logs);
  }

  static Future<List<Map<String, dynamic>>> getPayments() async {
    final prefs = await SharedPreferences.getInstance();
    final logs = prefs.getStringList(_key) ?? [];

    return logs
        .map((e) => jsonDecode(e) as Map<String, dynamic>)
        .toList();
  }
}
import '../models/payment_result.dart';

class PaymentCalculator {
  static PaymentResult applyDiscount({
    required double price,
    double discountPercent = 0,
  }) {
    final discountValue = price * (discountPercent / 100);
    final finalPrice = price - discountValue;

    return PaymentResult(
      originalPrice: price,
      discountPercent: discountPercent,
      finalPrice: finalPrice,
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../../core/language/language_cubit.dart';

class SettingsPage extends StatelessWidget {
  const SettingsPage({super.key});

  @override
  Widget build(BuildContext context) {
    final lang = context.read<LanguageCubit>();

    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª')),
      body: ListView(
        children: [
          ListTile(
            title: const Text('Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'),
            onTap: lang.setArabic,
          ),
          ListTile(
            title: const Text('English'),
            onTap: lang.setEnglish,
          ),
          ListTile(
            title: const Text('Ø­Ø³Ø¨ Ù„ØºØ© Ø§Ù„Ù†Ø¸Ø§Ù…'),
            onTap: lang.followSystem,
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../../core/config/feature_flags.dart';

class SettingsPage extends StatelessWidget {
  const SettingsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª')),
      body: ListView(
        children: [
          const ListTile(title: Text('Ø§Ù„Ø­Ø³Ø§Ø¨')),
          const ListTile(title: Text('Ø§Ù„Ø·Ù„Ø¨Ø§Øª')),
          const ListTile(title: Text('Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª')),

          if (FeatureFlags.walletEnabled)
            const ListTile(title: Text('Ø§Ù„Ù…Ø­ÙØ¸Ø©')),

          if (FeatureFlags.vipEnabled)
            const ListTile(title: Text('VIP')),

          if (FeatureFlags.sellerEnabled)
            const ListTile(title: Text('ÙˆØ¶Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹')),
        ],
      ),
    );
  }
}
import 'package:hydrated_bloc/hydrated_bloc.dart';

class SettingsCubit extends HydratedCubit<bool> {
  SettingsCubit() : super(false);

  void toggle() => emit(!state);

  @override
  bool? fromJson(Map<String, dynamic> json) => json['dark'];

  @override
  Map<String, dynamic>? toJson(bool state) => {'dark': state};
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../cubit/settings_cubit.dart';

class SettingsView extends StatelessWidget {
  const SettingsView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<SettingsCubit, bool>(
      builder: (context, dark) {
        return Center(
          child: SwitchListTile(
            title: const Text("Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†"),
            value: dark,
            onChanged: (_) {
              context.read<SettingsCubit>().toggle();
            },
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import '../cubit/settings_cubit.dart';

class SettingsPage extends StatelessWidget {
  const SettingsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Center(
      child: BlocBuilder<SettingsCubit, bool>(
        builder: (_, dark) => SwitchListTile(
          title: const Text('Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ†'),
          value: dark,
          onChanged: (_) => context.read<SettingsCubit>().toggle(),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class SettingsPage extends StatelessWidget {
  const SettingsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª')),
      body: ListView(
        children: const [
          ListTile(title: Text('Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ')),
          ListTile(title: Text('Ø§Ù„Ù„ØºØ©')),
          ListTile(title: Text('Ø­ÙˆÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚')),
        ],
      ),
    );
  }
}
class StorageService {
  Future<void> uploadImage() async {
    // FirebaseStorage.instance.ref('products').putFile(...)
  }
}
class NotificationService {
  void notifyOrder(String userId, String message) {
    // Ù„Ø§Ø­Ù‚Ù‹Ø§: Firebase Cloud Messaging
    print('ğŸ“¢ Notification to $userId: $message');
  }

  void notifyAdmin(String message) {
    print('ğŸ“¢ Admin Alert: $message');
  }
}
class AppNotification {
  final String id;
  final String title;
  final String body;
  final DateTime createdAt;
  final bool isRead;

  AppNotification({
    required this.id,
    required this.title,
    required this.body,
    required this.createdAt,
    this.isRead = false,
  });
}
import 'notification_model.dart';

class NotificationService {
  final List<AppNotification> _notifications = [];

  List<AppNotification> getAll() => _notifications;

  void addNotification(AppNotification notification) {
    _notifications.insert(0, notification);
  }

  void markAsRead(String id) {
    final index = _notifications.indexWhere((n) => n.id == id);
    if (index != -1) {
      _notifications[index] =
          _notifications[index].copyWith(isRead: true);
    }
  }
}
class CategoryModel {
  final String id;
  final String name;
  final String description;
  final bool active;

  CategoryModel({
    required this.id,
    required this.name,
    required this.description,
    this.active = true,
  });

  CategoryModel copyWith({bool? active}) {
    return CategoryModel(
      id: id,
      name: name,
      description: description,
      active: active ?? this.active,
    );
  }
}
import '../models/category_model.dart';

class CategoryService {
  final List<CategoryModel> _categories = [];

  List<CategoryModel> get activeCategories =>
      _categories.where((c) => c.active).toList();

  List<CategoryModel> get all => _categories;

  void addCategory(CategoryModel category) {
    _categories.add(category);
  }

  void toggleCategory(String id) {
    final index = _categories.indexWhere((c) => c.id == id);
    if (index != -1) {
      _categories[index] =
          _categories[index].copyWith(active: !_categories[index].active);
    }
  }
}
import 'package:flutter/material.dart';
import '../services/category_service.dart';
import '../models/category_model.dart';

class AdminCategoriesPage extends StatelessWidget {
  const AdminCategoriesPage({super.key});

  @override
  Widget build(BuildContext context) {
    final service = CategoryService();

    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ù‚Ø³Ø§Ù…')),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          service.addCategory(
            CategoryModel(
              id: DateTime.now().toString(),
              name: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
              description: 'Ø£Ø±Ø² â€“ Ø¯Ù‚ÙŠÙ‚ â€“ Ø³ÙƒØ±',
            ),
          );
        },
        child: const Icon(Icons.add),
      ),
      body: ListView(
        children: service.all.map((c) {
          return SwitchListTile(
            title: Text(c.name),
            subtitle: Text(c.description),
            value: c.active,
            onChanged: (_) => service.toggleCategory(c.id),
          );
        }).toList(),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class CategoriesPage extends StatelessWidget {
  const CategoriesPage({super.key});

  @override
  Widget build(BuildContext context) {
    final categories = [
      'Ù…Ø·Ø§Ø¹Ù…',
      'Ø¹Ù‚Ø§Ø±Ø§Øª',
      'Ø³ÙØ±',
      'Ø´Ø­Ù† Ø£Ù„Ø¹Ø§Ø¨',
      'Ø¥Ù†ØªØ±Ù†Øª',
      'Ù…Ø²Ø§Ø¯Ø§Øª',
      'Ø­Ø¬ÙˆØ²Ø§Øª',
      'Ø®Ø¯Ù…Ø§Øª',
    ];

    return ListView.builder(
      scrollDirection: Axis.horizontal,
      itemCount: categories.length,
      itemBuilder: (_, i) => Padding(
        padding: const EdgeInsets.all(8),
        child: Chip(label: Text(categories[i])),
      ),
    );
  }
}
import 'dart:convert';
import 'package:http/http.dart' as http;

class RasaChatService {
  final String baseUrl = 'http://YOUR_SERVER_IP:5005/webhooks/rest/webhook';

  Future<String> sendMessage(String message) async {
    final response = await http.post(
      Uri.parse(baseUrl),
      headers: {'Content-Type': 'application/json'},
      body: jsonEncode({
        'sender': 'flutter_user',
        'message': message,
      }),
    );

    final data = jsonDecode(response.body);
    if (data.isNotEmpty) {
      return data[0]['text'];
    }
    return 'Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ ğŸ¤”';
  }
}
import 'dart:convert';
import 'package:http/http.dart' as http;

class ChatbotService {
  static const String _baseUrl = 'http://127.0.0.1:5005/webhooks/rest/webhook';

  static Future<String> sendMessage(String message) async {
    try {
      final response = await http.post(
        Uri.parse(_baseUrl),
        headers: {'Content-Type': 'application/json'},
        body: jsonEncode({
          'sender': 'user',
          'message': message,
        }),
      );

      final data = jsonDecode(response.body);
      if (data is List && data.isNotEmpty) {
        return data.first['text'] ?? 'ğŸ¤– Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø¯';
      }
      return 'ğŸ¤– Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ';
    } catch (e) {
      return 'âš ï¸ ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¨ÙˆØª';
    }
  }
}
class PriceService {
  static final Map<String, int> _prices = {
    'Ø³ÙƒØ±': 1200,
    'Ø£Ø±Ø²': 2500,
    'Ø¯Ù‚ÙŠÙ‚': 1800,
    'Ø²ÙŠØª': 3200,
  };

  static String getPrice(String product) {
    final price = _prices[product];
    if (price == null) {
      return 'Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹.';
    }
    return 'Ø³Ø¹Ø± $product Ù‡Ùˆ $price Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ.';
  }
}
class LanguageService {
  static bool isEnglish(String text) {
    return RegExp(r'[a-zA-Z]').hasMatch(text);
  }

  static String priceText({
    required String product,
    required int price,
    required bool en,
  }) {
    return en
        ? 'The price of $product is $price YER.'
        : 'Ø³Ø¹Ø± $product Ù‡Ùˆ $price Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ.';
  }

  static String notFound(bool en) {
    return en
        ? 'Product not available.'
        : 'Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹.';
  }

  static String help(bool en) {
    return en
        ? 'You can ask about prices, delivery, or commission.'
        : 'ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø£Ùˆ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©.';
  }
}
class ProductService {
  static final List<Map<String, dynamic>> products = [
    {'name_ar': 'Ø³ÙƒØ±', 'name_en': 'sugar', 'price': 1200},
    {'name_ar': 'Ø£Ø±Ø²', 'name_en': 'rice', 'price': 2500},
    {'name_ar': 'Ø¯Ù‚ÙŠÙ‚', 'name_en': 'flour', 'price': 1800},
    {'name_ar': 'Ø²ÙŠØª', 'name_en': 'oil', 'price': 3200},
  ];

  static Map<String, dynamic>? find(String text, bool en) {
    for (final p in products) {
      if (en && text.contains(p['name_en'])) return p;
      if (!en && text.contains(p['name_ar'])) return p;
    }
    return null;
  }
}
class AIAdapter {
  static Future<String?> remoteAI(String message) async {
    // ğŸ”’ Ù„Ø§Ø­Ù‚Ù‹Ø§:
    // Rasa / LLaMA / OpenAI / Local Server
    return null; // Ø§Ù„Ø¢Ù† ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„
  }
}
class ChatMessage {
  final String text;
  final bool isUser;

  ChatMessage({
    required this.text,
    required this.isUser,
  });
}
import 'package:flutter/material.dart';
import '../services/chatbot_service.dart';

class ChatPage extends StatefulWidget {
  const ChatPage({super.key});

  @override
  State<ChatPage> createState() => _ChatPageState();
}

class _ChatPageState extends State<ChatPage> {
  final TextEditingController _controller = TextEditingController();
  final List<Map<String, String>> _messages = [];

  bool _loading = false;

  Future<void> _sendMessage() async {
    final text = _controller.text.trim();
    if (text.isEmpty) return;

    setState(() {
      _messages.add({'role': 'user', 'text': text});
      _loading = true;
      _controller.clear();
    });

    final reply = await ChatbotService.sendMessage(text);

    setState(() {
      _messages.add({'role': 'bot', 'text': reply});
      _loading = false;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø°ÙƒÙŠØ© ğŸ¤–')),
      body: Column(
        children: [
          Expanded(
            child: ListView.builder(
              padding: const EdgeInsets.all(12),
              itemCount: _messages.length,
              itemBuilder: (context, index) {
                final msg = _messages[index];
                final isUser = msg['role'] == 'user';
                return Align(
                  alignment:
                      isUser ? Alignment.centerRight : Alignment.centerLeft,
                  child: Container(
                    margin: const EdgeInsets.symmetric(vertical: 4),
                    padding: const EdgeInsets.all(12),
                    decoration: BoxDecoration(
                      color: isUser
                          ? Colors.green.shade200
                          : Colors.grey.shade300,
                      borderRadius: BorderRadius.circular(14),
                    ),
                    child: Text(msg['text']!),
                  ),
                );
              },
            ),
          ),
          if (_loading)
            const Padding(
              padding: EdgeInsets.all(8),
              child: CircularProgressIndicator(),
            ),
          Padding(
            padding: const EdgeInsets.all(12),
            child: Row(
              children: [
                Expanded(
                  child: TextField(
                    controller: _controller,
                    decoration: const InputDecoration(
                      hintText: 'Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ...',
                    ),
                    onSubmitted: (_) => _sendMessage(),
                  ),
                ),
                IconButton(
                  icon: const Icon(Icons.send),
                  onPressed: _sendMessage,
                ),
              ],
            ),
          ),
        ],
      ),
    );
  }
}
import '../payments/services/payment_log_service.dart';

class ReportService {
  static Future<double> totalSales() async {
    final payments = await PaymentLogService.getPayments();
    return payments.fold(
      0.0,
      (sum, p) => sum + (p['amount'] as num).toDouble(),
    );
  }

  static Future<int> totalOrders() async {
    final payments = await PaymentLogService.getPayments();
    return payments.length;
  }
}
import 'package:flutter/material.dart';
import '../services/report_service.dart';

class ReportsPage extends StatelessWidget {
  const ReportsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø³ÙˆÙ‚')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            _info('Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª', ReportService.totalSales),
            _info('Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚', ReportService.totalCommission),
            _info('ØµØ§ÙÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­', ReportService.totalNetProfit),
            const Divider(height: 32),
            const Text(
              'Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø«Ø§Ø¨ØªØ©: 5%',
              style: TextStyle(color: Colors.grey),
            ),
          ],
        ),
      ),
    );
  }

  Widget _info(String title, double value) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8),
      child: Text(
        '$title: ${value.toStringAsFixed(2)}',
        style: const TextStyle(
          fontSize: 18,
          fontWeight: FontWeight.bold,
        ),
      ),
    );
  }
}
import '../../payments/services/payment_log_service.dart';
import '../../reports/services/report_service.dart';

class AdminStatsService {
  static double get totalSales => ReportService.totalSales;

  static int get totalPayments =>
      PaymentLogService.all.length;

  static int get pendingPayments =>
      PaymentLogService.all
          .where((p) => p.status.name == 'pending')
          .length;
}
import 'package:flutter/material.dart';

class AdminDashboardPage extends StatelessWidget {
  const AdminDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: GridView.count(
          crossAxisCount: 2,
          crossAxisSpacing: 12,
          mainAxisSpacing: 12,
          children: const [
            _DashboardCard(
              title: 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',
              value: '0 Ø±ÙŠØ§Ù„',
              icon: Icons.attach_money,
            ),
            _DashboardCard(
              title: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
              value: '0',
              icon: Icons.shopping_cart,
            ),
            _DashboardCard(
              title: 'Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª',
              value: 'Ø¹Ø±Ø¶',
              icon: Icons.payment,
            ),
            _DashboardCard(
              title: 'Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±',
              value: 'Ø¹Ø±Ø¶',
              icon: Icons.bar_chart,
            ),
          ],
        ),
      ),
    );
  }
}

class _DashboardCard extends StatelessWidget {
  final String title;
  final String value;
  final IconData icon;

  const _DashboardCard({
    required this.title,
    required this.value,
    required this.icon,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 3,
      child: Padding(
        padding: const EdgeInsets.all(12),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Icon(icon, size: 36),
            const SizedBox(height: 12),
            Text(
              title,
              style: const TextStyle(fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 6),
            Text(value),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../products/products_page.dart';
import '../search/search_page.dart';
import '../cart/cart_page.dart';
import '../profile/profile_page.dart';
import '../settings/settings_page.dart';

class RootPage extends StatefulWidget {
  const RootPage({super.key});

  @override
  State<RootPage> createState() => _RootPageState();
}

class _RootPageState extends State<RootPage> {
  int index = 0;

  final pages = const [
    ProductsPage(),
    SearchPage(),
    CartPage(),
    ProfilePage(),
    SettingsPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.store), label: 'Ø§Ù„Ø³ÙˆÙ‚'),
          BottomNavigationBarItem(icon: Icon(Icons.search), label: 'Ø¨Ø­Ø«'),
          BottomNavigationBarItem(icon: Icon(Icons.shopping_cart), label: 'Ø§Ù„Ø³Ù„Ø©'),
          BottomNavigationBarItem(icon: Icon(Icons.person), label: 'Ø­Ø³Ø§Ø¨ÙŠ'),
          BottomNavigationBarItem(icon: Icon(Icons.settings), label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../models/ai_suggestion.dart';

class SuggestionCard extends StatelessWidget {
  final AiSuggestion suggestion;

  const SuggestionCard({super.key, required this.suggestion});

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
      child: ListTile(
        title: Text(suggestion.title),
        subtitle: Text(suggestion.description),
        trailing: Text('${suggestion.price} Ø±ÙŠØ§Ù„'),
        onTap: () => Navigator.pushNamed(context, suggestion.route),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class AiConciergePage extends StatelessWidget {
  const AiConciergePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ')),
      body: const Center(
        child: Text(
          'Ø³Ø£Ù‚ØªØ±Ø­ Ø¹Ù„ÙŠÙƒ Ø£ÙØ¶Ù„ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ø¹Ø±ÙˆØ¶ ğŸ‘Œ',
          style: TextStyle(fontSize: 18),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class AIConciergePage extends StatelessWidget {
  const AIConciergePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ')),
      body: ListView(
        padding: const EdgeInsets.all(16),
        children: const [
          ListTile(
            leading: Icon(Icons.smart_toy),
            title: Text('Ø§Ù‚ØªØ±Ø­ Ù„ÙŠ Ø£ÙØ¶Ù„ Ø§Ù„Ø¹Ø±ÙˆØ¶'),
          ),
          ListTile(
            leading: Icon(Icons.shopping_bag),
            title: Text('ÙˆÙŠÙ† Ø£Ø±Ø®Øµ Ù…Ù†ØªØ¬ØŸ'),
          ),
          ListTile(
            leading: Icon(Icons.store),
            title: Text('Ø±Ø´Ù‘Ø­ Ù„ÙŠ Ø¨Ø§Ø¦Ø¹ Ù…ÙˆØ«ÙˆÙ‚'),
          ),
        ],
      ),
    );
  }
}
import '../models/ai_suggestion.dart';

class AiConciergeService {
  static List<AiSuggestion> suggest({
    required double budget,
  }) {
    final suggestions = <AiSuggestion>[];

    if (budget >= 10000) {
      suggestions.add(
        AiSuggestion(
          title: 'ğŸ“± Ø´Ø­Ù† Ø±ØµÙŠØ¯',
          description: 'Ø£ÙØ¶Ù„ Ø®ÙŠØ§Ø± Ø³Ø±ÙŠØ¹ Ø§Ù„ÙŠÙˆÙ…',
          price: 5000,
          route: '/payment-info',
        ),
      );
    }

    if (budget >= 30000) {
      suggestions.add(
        AiSuggestion(
          title: 'ğŸ® Ø´Ø­Ù† Ø£Ù„Ø¹Ø§Ø¨',
          description: 'Ø§Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
          price: 25000,
          route: '/services',
        ),
      );
    }

    if (budget >= 50000) {
      suggestions.add(
        AiSuggestion(
          title: 'âœˆï¸ Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†',
          description: 'Ø®ØµÙ… Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ù…ØºØ±ÙŠ',
          price: 48000,
          route: '/services',
        ),
      );
    }

    return suggestions;
  }
}
class AiSuggestion {
  final String title;
  final String description;
  final double price;
  final String route;

  AiSuggestion({
    required this.title,
    required this.description,
    required this.price,
    required this.route,
  });
}
import '../models/smart_offer.dart';

class SmartOfferService {
  static List<SmartOffer> getOffers({
    required bool isVip,
  }) {
    final offers = <SmartOffer>[
      SmartOffer(
        title: 'ğŸ”¥ Ø¹Ø±Ø¶ Ø´Ø­Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª',
        description: 'Ø®ØµÙ… 10Ùª Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©',
        route: '/internet',
      ),
      SmartOffer(
        title: 'ğŸ’ Ø¹Ø±Ø¶ VIP ÙƒØ±ÙŠØ¨ØªÙˆ',
        description: 'Ø£Ø³Ø¹Ø§Ø± Ø®Ø§ØµØ© Ù„Ø£Ø¹Ø¶Ø§Ø¡ VIP',
        route: '/crypto',
        vipOnly: true,
      ),
    ];

    return offers.where((o) => !o.vipOnly || isVip).toList();
  }
}
class SmartOffer {
  final String title;
  final String description;
  final String route;
  final bool vipOnly;

  SmartOffer({
    required this.title,
    required this.description,
    required this.route,
    this.vipOnly = false,
  });
}
class Offer {
  final String id;
  final String title;
  final double discount;
  final DateTime expiresAt;

  Offer({
    required this.id,
    required this.title,
    required this.discount,
    required this.expiresAt,
  });
}
import 'package:flutter/material.dart';

class OffersPage extends StatelessWidget {
  const OffersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Center(
      child: Text('ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ù‚Ø§Ø¯Ù…Ø© Ù‚Ø±ÙŠØ¨Ù‹Ø§'),
    );
  }
}
import '../models/offer_model.dart';

final offers = [
  Offer(
    id: '1',
    title: 'Ø®ØµÙ… 50% Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø·Ø§Ø¹Ù…',
    discount: 0.5,
    expiresAt: DateTime.now().add(Duration(hours: 5)),
  ),
  Offer(
    id: '2',
    title: 'Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø³ÙØ± Ø§Ù„ØµÙŠÙÙŠØ©',
    discount: 0.3,
    expiresAt: DateTime.now().add(Duration(days: 1)),
  ),
];
import 'package:flutter/material.dart';
import '../data/offers_data.dart';

class OffersWidget extends StatelessWidget {
  const OffersWidget({super.key});

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 140,
      child: ListView.separated(
        scrollDirection: Axis.horizontal,
        padding: const EdgeInsets.all(12),
        itemCount: offers.length,
        separatorBuilder: (_, __) => const SizedBox(width: 12),
        itemBuilder: (context, i) {
          final o = offers[i];
          return Container(
            width: 240,
            padding: const EdgeInsets.all(16),
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(16),
              gradient: LinearGradient(
                colors: [Colors.orange, Colors.redAccent],
              ),
            ),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(o.title,
                    style: const TextStyle(color: Colors.white, fontSize: 16)),
                const Spacer(),
                Text('Ø®ØµÙ… ${(o.discount * 100).toInt()}%',
                    style: const TextStyle(
                        color: Colors.white,
                        fontSize: 22,
                        fontWeight: FontWeight.bold)),
              ],
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';

class FlashSalesPage extends StatelessWidget {
  const FlashSalesPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('âš¡ Ø¹Ø±ÙˆØ¶ ÙÙ„Ø§Ø´')),
      body: Center(
        child: Text(
          'â³ ÙŠÙ†ØªÙ‡ÙŠ Ø§Ù„Ø¹Ø±Ø¶ Ø®Ù„Ø§Ù„ 01:23:45',
          style: Theme.of(context).textTheme.headlineSmall,
        ),
      ),
    );
  }
}
class AiOfferService {
  static String suggestOffer({
    required String lastService,
    required bool isVip,
  }) {
    if (lastService == 'internet') {
      return 'ğŸ”¥ Ø®ØµÙ… Ø¹Ù„Ù‰ Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©';
    }

    if (lastService == 'games') {
      return 'ğŸ® Ø´Ø­Ù† Ø£Ù„Ø¹Ø§Ø¨ + Bonus';
    }

    if (isVip) {
      return 'ğŸ’ Ø¹Ø±Ø¶ VIP Ø®Ø§Øµ Ù„Ùƒ';
    }

    return 'âœ¨ Ø¹Ø±Ø¶ Ù…Ù…ÙŠØ² Ø§Ù„ÙŠÙˆÙ…';
  }
}
class Discount {
  final String title;
  final String code;
  final double percent;
  final bool vipOnly;
  final DateTime expiry;

  Discount({
    required this.title,
    required this.code,
    required this.percent,
    required this.expiry,
    this.vipOnly = false,
  });

  bool get isValid => DateTime.now().isBefore(expiry);
}
import '../models/discount.dart';

class DiscountService {
  static final List<Discount> _discounts = [
    Discount(
      title: 'ğŸ”¥ Ø®ØµÙ… Ø§Ù„Ø§ÙØªØªØ§Ø­',
      code: 'WELCOME10',
      percent: 10,
      expiry: DateTime(2099),
    ),
    Discount(
      title: 'ğŸ’ VIP Special',
      code: 'VIP25',
      percent: 25,
      vipOnly: true,
      expiry: DateTime(2099),
    ),
  ];

  static List<Discount> getAvailable(bool isVip) {
    return _discounts.where((d) =>
        d.isValid && (!d.vipOnly || isVip)).toList();
  }
}
import 'package:flutter/material.dart';
import '../../models/discount.dart';

class DiscountCard extends StatelessWidget {
  final Discount discount;

  const DiscountCard({super.key, required this.discount});

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 6,
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
      child: ListTile(
        leading: const Icon(Icons.local_offer, color: Colors.green),
        title: Text(discount.title),
        subtitle: Text('ÙƒÙˆØ¯ Ø§Ù„Ø®ØµÙ…: ${discount.code}'),
        trailing: Text(
          '-${discount.percent.toInt()}%',
          style: const TextStyle(
            fontSize: 18,
            fontWeight: FontWeight.bold,
            color: Colors.red,
          ),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../services/discount_service.dart';
import 'widgets/discount_card.dart';

class DiscountsPage extends StatelessWidget {
  final bool isVip;

  const DiscountsPage({super.key, required this.isVip});

  @override
  Widget build(BuildContext context) {
    final discounts = DiscountService.getAvailable(isVip);

    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª')),
      body: ListView.builder(
        padding: const EdgeInsets.all(12),
        itemCount: discounts.length,
        itemBuilder: (_, i) =>
            DiscountCard(discount: discounts[i]),
      ),
    );
  }
}
class DiscountService {
  static bool enabled = false; // ØªÙØ¹ÙŠÙ„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¨Ø¹Ø¯ Ø´Ù‡Ø±Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

  static double apply(double price) {
    if (!enabled) return price;
    return price * 0.9; // Ø®ØµÙ… 10%
  }
}
import 'package:flutter/material.dart';
import '../categories/presentation/categories_page.dart';
import '../cart/cart_page.dart';
import '../orders/orders_page.dart';

class RootPage extends StatefulWidget {
  const RootPage({super.key});

  @override
  State<RootPage> createState() => _RootPageState();
}

class _RootPageState extends State<RootPage> {
  int index = 0;

  final pages = const [
    CategoriesPage(),
    CartPage(),
    OrdersPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(
            icon: Icon(Icons.storefront),
            label: 'Ø§Ù„Ø³ÙˆÙ‚',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.shopping_cart),
            label: 'Ø§Ù„Ø³Ù„Ø©',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.receipt_long),
            label: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../data/mock_data.dart';

class OffersSection extends StatelessWidget {
  const OffersSection({super.key});

  @override
  Widget build(BuildContext context) {
    final offers = products.where((p) => p.isOffer).toList();

    if (offers.isEmpty) return const SizedBox();

    return SizedBox(
      height: 160,
      child: ListView.separated(
        scrollDirection: Axis.horizontal,
        itemCount: offers.length,
        separatorBuilder: (_, __) => const SizedBox(width: 12),
        itemBuilder: (context, index) {
          final product = offers[index];
          return Container(
            width: 260,
            padding: const EdgeInsets.all(16),
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(20),
              gradient: LinearGradient(
                colors: [
                  Colors.deepPurple.shade700,
                  Colors.deepPurple.shade400,
                ],
              ),
            ),
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(
                  'Ø¹Ø±Ø¶ Ø®Ø§Øµ ğŸ”¥',
                  style: Theme.of(context)
                      .textTheme
                      .titleMedium
                      ?.copyWith(color: Colors.white),
                ),
                const Spacer(),
                Text(
                  product.name,
                  style: const TextStyle(color: Colors.white),
                ),
                Text(
                  '\$${product.price}',
                  style: const TextStyle(
                    color: Colors.greenAccent,
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../../products/presentation/cubit/products_cubit.dart';
import '../../products/presentation/cubit/products_state.dart';

class ProductsGrid extends StatefulWidget {
  const ProductsGrid({super.key});

  @override
  State<ProductsGrid> createState() => _ProductsGridState();
}

class _ProductsGridState extends State<ProductsGrid> {
  final ScrollController controller = ScrollController();

  @override
  void initState() {
    super.initState();
    controller.addListener(() {
      if (controller.position.pixels >=
          controller.position.maxScrollExtent - 300) {
        context.read<ProductsCubit>().loadMore();
      }
    });
  }

  @override
  void dispose() {
    controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<ProductsCubit, ProductsState>(
      builder: (context, state) {
        if (state is ProductsLoading) {
          return const Center(child: CircularProgressIndicator());
        }

        if (state is ProductsError) {
          return Center(child: Text(state.message));
        }

        if (state is ProductsLoaded) {
          if (state.products.isEmpty) {
            return const Center(child: Text('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª'));
          }

          return GridView.builder(
            controller: controller,
            padding: const EdgeInsets.all(12),
            gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
              crossAxisCount: 2,
              childAspectRatio: 0.7,
              crossAxisSpacing: 12,
              mainAxisSpacing: 12,
            ),
            itemCount: state.products.length,
            itemBuilder: (context, index) {
              final product = state.products[index];
              return Card(
                child: Column(
                  children: [
                    const Expanded(child: Placeholder()),
                    Padding(
                      padding: const EdgeInsets.all(8),
                      child: Text(
                        product.name,
                        maxLines: 2,
                        overflow: TextOverflow.ellipsis,
                      ),
                    ),
                    Text(product.price.toString()),
                  ],
                ),
              );
            },
          );
        }

        return const SizedBox.shrink();
      },
    );
  }
}
import 'package:flutter/material.dart';
import '../../../data/moc/offers_moc.dart';

class OffersBanner extends StatelessWidget {
  const OffersBanner({super.key});

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 120,
      child: ListView.builder(
        scrollDirection: Axis.horizontal,
        itemCount: mockOffers.length,
        itemBuilder: (_, i) {
          final offer = mockOffers[i];
          return Container(
            width: 220,
            margin: const EdgeInsets.all(8),
            decoration: BoxDecoration(
              borderRadius: BorderRadius.circular(16),
              gradient: const LinearGradient(
                colors: [Colors.green, Colors.lightGreen],
              ),
            ),
            child: Padding(
              padding: const EdgeInsets.all(12),
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(
                    offer.title,
                    style: const TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.bold,
                        color: Colors.white),
                  ),
                  Text(
                    offer.subtitle,
                    style: const TextStyle(color: Colors.white70),
                  ),
                ],
              ),
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';

class HomeAppBar extends StatelessWidget implements PreferredSizeWidget {
  const HomeAppBar({super.key});

  @override
  Widget build(BuildContext context) {
    return AppBar(
      elevation: 0,
      backgroundColor: Colors.white,
      title: Container(
        height: 42,
        padding: const EdgeInsets.symmetric(horizontal: 12),
        decoration: BoxDecoration(
          color: Colors.grey.shade100,
          borderRadius: BorderRadius.circular(12),
        ),
        child: const Row(
          children: [
            Icon(Icons.search, color: Colors.grey),
            SizedBox(width: 8),
            Text(
              'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø¹Ø±Ø¶',
              style: TextStyle(color: Colors.grey, fontSize: 14),
            ),
          ],
        ),
      ),
      actions: [
        IconButton(
          icon: const Icon(Icons.notifications_none),
          onPressed: () {},
        ),
      ],
    );
  }

  @override
  Size get preferredSize => const Size.fromHeight(60);
}
import 'package:flutter/material.dart';

class HeroBanner extends StatelessWidget {
  const HeroBanner({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 160,
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(16),
        gradient: const LinearGradient(
          colors: [Color(0xFF1E3C72), Color(0xFF2A5298)],
        ),
      ),
      child: const Center(
        child: Text(
          'ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹\nğŸ‘‘ Ø®Ø¯Ù…Ø§Øª VIP Ø­ØµØ±ÙŠØ©',
          textAlign: TextAlign.center,
          style: TextStyle(
            color: Colors.white,
            fontSize: 20,
            fontWeight: FontWeight.bold,
          ),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../products/presentation/widgets/products_grid.dart';

class HomeBody extends StatelessWidget {
  const HomeBody({super.key});

  @override
  Widget build(BuildContext context) {
    return const ProductsGrid();
  }
}
import 'package:flutter/material.dart';

class HomeBottomNav extends StatelessWidget {
  final int currentIndex;
  final Function(int) onTap;

  const HomeBottomNav({
    super.key,
    required this.currentIndex,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return BottomNavigationBar(
      currentIndex: currentIndex,
      onTap: onTap,
      selectedItemColor: Colors.blue,
      unselectedItemColor: Colors.grey,
      type: BottomNavigationBarType.fixed,
      items: const [
        BottomNavigationBarItem(
          icon: Icon(Icons.storefront),
          label: 'Ø§Ù„Ø³ÙˆÙ‚',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.local_offer),
          label: 'Ø§Ù„Ø¹Ø±ÙˆØ¶',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.account_balance_wallet),
          label: 'Ø§Ù„Ù…Ø­ÙØ¸Ø©',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.person),
          label: 'Ø­Ø³Ø§Ø¨ÙŠ',
        ),
      ],
    );
  }
}
import 'package:flutter/material.dart';

class HomeSkeleton extends StatelessWidget {
  const HomeSkeleton({super.key});

  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      padding: const EdgeInsets.all(16),
      itemCount: 6,
      itemBuilder: (_, __) => Container(
        margin: const EdgeInsets.only(bottom: 16),
        height: 90,
        decoration: BoxDecoration(
          color: Colors.grey.shade300,
          borderRadius: BorderRadius.circular(12),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class QuickActions extends StatelessWidget {
  const QuickActions({super.key});

  @override
  Widget build(BuildContext context) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceAround,
      children: [
        _action(Icons.person, 'Ø­Ø³Ø§Ø¨ÙŠ'),
        _action(Icons.account_balance_wallet, 'Ø§Ù„Ù…Ø­ÙØ¸Ø©'),
        _action(Icons.receipt_long, 'Ø·Ù„Ø¨Ø§ØªÙŠ'),
      ],
    );
  }

  Widget _action(IconData icon, String title) {
    return Column(
      children: [
        CircleAvatar(
          radius: 24,
          child: Icon(icon),
        ),
        const SizedBox(height: 6),
        Text(title),
      ],
    );
  }
}
import 'package:flutter/material.dart';

class ServicesGrid extends StatelessWidget {
  const ServicesGrid({super.key});

  @override
  Widget build(BuildContext context) {
    final services = [
      {'icon': Icons.flight, 'title': 'Ø³ÙØ±'},
      {'icon': Icons.hotel, 'title': 'ÙÙ†Ø§Ø¯Ù‚'},
      {'icon': Icons.wifi, 'title': 'Ø§ØªØµØ§Ù„Ø§Øª'},
      {'icon': Icons.videogame_asset, 'title': 'Ø£Ù„Ø¹Ø§Ø¨'},
      {'icon': Icons.currency_bitcoin, 'title': 'ÙƒØ±ÙŠØ¨ØªÙˆ'},
      {'icon': Icons.star, 'title': 'VIP'},
    ];

    return GridView.builder(
      shrinkWrap: true,
      physics: const NeverScrollableScrollPhysics(),
      itemCount: services.length,
      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
        crossAxisCount: 3,
        mainAxisSpacing: 12,
        crossAxisSpacing: 12,
      ),
      itemBuilder: (context, index) {
        return Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(14),
            color: Colors.white,
            boxShadow: [
              BoxShadow(
                color: Colors.black.withOpacity(0.05),
                blurRadius: 8,
              )
            ],
          ),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Icon(services[index]['icon'] as IconData, size: 32),
              const SizedBox(height: 8),
              Text(
                services[index]['title'] as String,
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
            ],
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';

class TopPicksSection extends StatelessWidget {
  const TopPicksSection({super.key});

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        const Text(
          'â­ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
          style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
        ),
        const SizedBox(height: 10),
        Container(
          padding: const EdgeInsets.all(16),
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(14),
            color: Colors.amber.shade100,
          ),
          child: const Text(
            'ğŸ”¥ Ø´Ø­Ù† Ø§ØªØµØ§Ù„Ø§Øª â€“ Ø®ØµÙ… 15%\nâ±ï¸ ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹ØªÙŠÙ†',
            style: TextStyle(fontWeight: FontWeight.w600),
          ),
        ),
      ],
    );
  }
}
import 'package:flutter/material.dart';
import '../../offers/presentation/offers_widget.dart';
import '../../marketplace/categories/presentation/categories_page.dart';

class HomeDashboard extends StatelessWidget {
  const HomeDashboard({super.key});

  @override
  Widget build(BuildContext context) {
    return CustomScrollView(
      slivers: [
        SliverAppBar(
          floating: true,
          title: const Text('Yemen Market'),
          actions: [
            IconButton(
              icon: const Icon(Icons.notifications),
              onPressed: () {},
            )
          ],
        ),
        SliverToBoxAdapter(child: OffersWidget()),
        SliverFillRemaining(child: CategoriesPage()),
      ],
    );
  }
}
import 'package:hydrated_bloc/hydrated_bloc.dart';

class HomeCubit extends HydratedCubit<int> {
  HomeCubit() : super(0);

  void increment() => emit(state + 1);

  @override
  int? fromJson(Map<String, dynamic> json) => json['value'];

  @override
  Map<String, dynamic>? toJson(int state) => {'value': state};
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../cubit/home_cubit.dart';

class HomeView extends StatelessWidget {
  const HomeView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<HomeCubit, String>(
      builder: (context, state) {
        return Center(
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Text(state, style: const TextStyle(fontSize: 18)),
              const SizedBox(height: 20),
              ElevatedButton(
                onPressed: () {
                  context.read<HomeCubit>().updateText();
                },
                child: const Text("ØªØ­Ø¯ÙŠØ«"),
              ),
            ],
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';
import '../widgets/home_sections.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      appBar: AppBar(title: Text('Yemen Market')),
      body: HomeSections(),
    );
  }
}
import 'package:flutter/material.dart';
import '../../../../core/config/feature_flags.dart';

class HomeSections extends StatelessWidget {
  const HomeSections({super.key});

  @override
  Widget build(BuildContext context) {
    return ListView(
      children: [
        _card(context, 'ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ø§Ù„ÙŠÙˆÙ…', Icons.local_offer),
        _card(context, 'ğŸ›ï¸ Ø§Ù„Ù…ØªØ§Ø¬Ø±', Icons.store),

        if (FeatureFlags.aiEnabled)
          _card(context, 'ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ', Icons.smart_toy),

        if (FeatureFlags.vipEnabled)
          _card(context, 'ğŸ‘‘ VIP', Icons.workspace_premium),

        if (FeatureFlags.walletEnabled)
          _card(context, 'ğŸ’³ Ø§Ù„Ù…Ø­ÙØ¸Ø©', Icons.account_balance_wallet),
      ],
    );
  }

  Widget _card(BuildContext context, String title, IconData icon) {
    return Card(
      margin: const EdgeInsets.all(12),
      child: ListTile(
        leading: Icon(icon),
        title: Text(title),
        onTap: () {},
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:firebase_auth/firebase_auth.dart';

class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final user = FirebaseAuth.instance.currentUser;

    return Scaffold(
      appBar: AppBar(title: const Text('Yemen Market')),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Text(
              user?.isAnonymous == true
                  ? 'Ø£Ù†Øª Ø¯Ø§Ø®Ù„ ÙƒØ¶ÙŠÙ'
                  : 'Ù…Ø±Ø­Ø¨Ø§Ù‹ ${user?.phoneNumber}',
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () async {
                await FirebaseAuth.instance.signOut();
              },
              child: const Text('ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬'),
            )
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../core/features/feature_registry.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    final features = enabledFeatures();

    return ListView(
      padding: const EdgeInsets.all(16),
      children: [
        const Text('Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ğŸ‘‹', style: TextStyle(fontSize: 22)),
        const SizedBox(height: 16),
        GridView.count(
          crossAxisCount: 2,
          shrinkWrap: true,
          physics: const NeverScrollableScrollPhysics(),
          children: features.map((f) {
            return Card(
              child: InkWell(
                onTap: () {
                  Navigator.push(
                    context,
                    MaterialPageRoute(builder: (_) => f.page),
                  );
                },
                child: Column(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    Icon(f.icon, size: 32),
                    const SizedBox(height: 8),
                    Text(f.title),
                  ],
                ),
              ),
            );
          }).toList(),
        ),
      ],
    );
  }
}
import 'package:flutter/material.dart';

class SearchPage extends StatelessWidget {
  const SearchPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¨Ø­Ø« Ø´Ø§Ù…Ù„')),
      body: ListView(
        children: const [
          ListTile(title: Text('Ù…Ù†ØªØ¬Ø§Øª')),
          ListTile(title: Text('Ù…ØªØ§Ø¬Ø±')),
          ListTile(title: Text('Ø¹Ø±ÙˆØ¶')),
          ListTile(title: Text('Ø¨Ø§Ø¦Ø¹ÙŠÙ†')),
        ],
      ),
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';

class SearchService {
  static Future<List<Map<String, dynamic>>> searchProducts(String query) async {
    final snapshot = await FirebaseFirestore.instance
        .collection('products')
        .where('keywords', arrayContains: query.toLowerCase())
        .get();

    return snapshot.docs.map((d) => d.data()).toList();
  }
}
import 'package:flutter/material.dart';

class SearchPage extends StatelessWidget {
  const SearchPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¨Ø­Ø«')),
      body: const Center(child: Text('Ø¨Ø­Ø« Ø°ÙƒÙŠ Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')),
    );
  }
}
import 'package:flutter/material.dart';

class ChartsPage extends StatelessWidget {
  const ChartsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠØ©')),
      body: const Center(
        child: Text('ğŸ“ˆ Trading Charts Ù‚Ø±ÙŠØ¨Ù‹Ø§'),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class ChartsPage extends StatelessWidget {
  const ChartsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±')),
      body: const Center(
        child: Text(
          'ğŸ“ˆ Charts & Trading (Ù‚Ø§Ø¯Ù…)',
          style: TextStyle(fontSize: 22),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class WalletPage extends StatelessWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      body: Center(child: Text('Ø§Ù„Ù…Ø­ÙØ¸Ø©')),
    );
  }
}
class WalletService {
  static double _balance = 0;

  static double get balance => _balance;

  static void add(double amount) {
    _balance += amount;
  }

  static bool deduct(double amount) {
    if (_balance < amount) return false;
    _balance -= amount;
    return true;
  }
}
import 'package:flutter/material.dart';

class AiOffersPage extends StatelessWidget {
  const AiOffersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¹Ø±ÙˆØ¶ Ø°ÙƒÙŠØ©')),
      body: ListView(
        padding: const EdgeInsets.all(16),
        children: const [
          ListTile(title: Text('ğŸ”¥ Ø¹Ø±Ø¶ Ù…Ù†Ø§Ø³Ø¨ Ù„Ùƒ')),
          ListTile(title: Text('ğŸ¤– Ø§Ù‚ØªØ±Ø§Ø­ AI')),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class VendorsPage extends StatelessWidget {
  const VendorsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø§Ù„Ø¨Ø§Ø¦Ø¹ÙˆÙ†')),
      body: ListView.builder(
        itemCount: 5,
        itemBuilder: (_, i) => ListTile(
          leading: const Icon(Icons.store),
          title: Text('Ù…ØªØ¬Ø± Ø±Ù‚Ù… ${i + 1}'),
          subtitle: const Text('Ù…Ù†ØªØ¬Ø§Øª + ØªÙ‚ÙŠÙŠÙ…'),
        ),
      ),
    );
  }
}
class AnalyticsService {
  static void log(String event, {Map<String, dynamic>? data}) {
    // Ù„Ø§Ø­Ù‚Ù‹Ø§ Firebase / Mixpanel / Segment
    print('[ANALYTICS] $event => $data');
  }
}
import 'package:flutter/material.dart';

class VipGuard extends StatelessWidget {
  final bool isVip;
  final Widget child;

  const VipGuard({
    super.key,
    required this.isVip,
    required this.child,
  });

  @override
  Widget build(BuildContext context) {
    if (!isVip) {
      return const Scaffold(
        body: Center(
          child: Text(
            'ğŸ’ Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø®ØµØµØ© Ù„Ø£Ø¹Ø¶Ø§Ø¡ VIP',
            style: TextStyle(fontSize: 18),
          ),
        ),
      );
    }
    return child;
  }
}
import 'package:flutter/material.dart';
import '../home/home_page.dart';

class RootPage extends StatefulWidget {
  const RootPage({super.key});

  @override
  State<RootPage> createState() => _RootPageState();
}

class _RootPageState extends State<RootPage> {
  int currentIndex = 0;

  final List<Widget> pages = const [
    HomePage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[currentIndex],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: currentIndex,
        onTap: (index) {
          setState(() {
            currentIndex = index;
          });
        },
        items: const [
          BottomNavigationBarItem(
            icon: Icon(Icons.storefront),
            label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class VendorDashboardPage extends StatelessWidget {
  const VendorDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ§Ø¬Ø±')),
      body: const Center(child: Text('Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª')),
    );
  }
}
import 'dart:io';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_storage/firebase_storage.dart';
import '../domain/product_model.dart';

class ProductService {
  final _db = FirebaseFirestore.instance;
  final _storage = FirebaseStorage.instance;

  Future<List<String>> uploadImages(List<File> files, String productId) async {
    List<String> urls = [];
    for (int i = 0; i < files.length; i++) {
      final ref = _storage.ref('products/$productId/img_$i.jpg');
      await ref.putFile(files[i]);
      urls.add(await ref.getDownloadURL());
    }
    return urls;
  }

  Future<void> addProduct(Product product) async {
    await _db.collection('products').doc(product.id).set(product.toMap());
  }
}
class Product {
  final String id;
  final String name;
  final String description;
  final double price;
  final List<String> images;
  final String merchantId;

  Product({
    required this.id,
    required this.name,
    required this.description,
    required this.price,
    required this.images,
    required this.merchantId,
  });

  Map<String, dynamic> toMap() => {
    'id': id,
    'name': name,
    'description': description,
    'price': price,
    'images': images,
    'merchantId': merchantId,
    'createdAt': DateTime.now(),
  };

  factory Product.fromMap(Map<String, dynamic> map) => Product(
    id: map['id'],
    name: map['name'],
    description: map['description'],
    price: (map['price'] as num).toDouble(),
    images: List<String>.from(map['images']),
    merchantId: map['merchantId'],
  );
}
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import '../../data/product_service.dart';
import '../../domain/product_model.dart';

class AddProductPage extends StatefulWidget {
  const AddProductPage({super.key});
  @override
  State<AddProductPage> createState() => _AddProductPageState();
}

class _AddProductPageState extends State<AddProductPage> {
  final name = TextEditingController();
  final desc = TextEditingController();
  final price = TextEditingController();
  final service = ProductService();
  List<File> images = [];

  pickImages() async {
    final picker = ImagePicker();
    final picked = await picker.pickMultiImage();
    if (picked != null) {
      setState(() => images = picked.map((e) => File(e.path)).toList());
    }
  }

  submit() async {
    final id = DateTime.now().millisecondsSinceEpoch.toString();
    final urls = await service.uploadImages(images, id);
    final product = Product(
      id: id,
      name: name.text,
      description: desc.text,
      price: double.parse(price.text),
      images: urls,
      merchantId: 'merchant_001',
    );
    await service.addProduct(product);
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(children: [
          TextField(controller: name, decoration: const InputDecoration(labelText: 'Ø§Ù„Ø§Ø³Ù…')),
          TextField(controller: desc, decoration: const InputDecoration(labelText: 'Ø§Ù„ÙˆØµÙ')),
          TextField(controller: price, decoration: const InputDecoration(labelText: 'Ø§Ù„Ø³Ø¹Ø±')),
          ElevatedButton(onPressed: pickImages, child: const Text('Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±')),
          ElevatedButton(onPressed: submit, child: const Text('Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬')),
        ]),
      ),
    );
  }
}
// Product Form Widget
import 'package:flutter/material.dart';

class ProfilePage extends StatelessWidget {
  const ProfilePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø­Ø³Ø§Ø¨ÙŠ')),
      body: const Center(child: Text('Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…')),
    );
  }
}
import 'dart:io';
import 'package:image_picker/image_picker.dart';

class ImagePickerHelper {
  static Future<File?> pickImage() async {
    final picker = ImagePicker();
    final picked = await picker.pickImage(source: ImageSource.gallery);
    if (picked == null) return null;
    return File(picked.path);
  }
}
import 'dart:io';
import 'package:flutter/material.dart';
import '../../services/product_service.dart';
import 'image_picker_helper.dart';

class AddProductPage extends StatefulWidget {
  const AddProductPage({super.key});

  @override
  State<AddProductPage> createState() => _AddProductPageState();
}

class _AddProductPageState extends State<AddProductPage> {
  final nameCtrl = TextEditingController();
  final priceCtrl = TextEditingController();
  File? image;
  bool loading = false;

  Future<void> submit() async {
    if (image == null) return;

    setState(() => loading = true);

    await ProductService().addProduct(
      name: nameCtrl.text,
      price: priceCtrl.text,
      image: image!,
      merchantId: 'merchant_001', // Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† auth
    );

    setState(() => loading = false);
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            GestureDetector(
              onTap: () async {
                image = await ImagePickerHelper.pickImage();
                setState(() {});
              },
              child: Container(
                height: 140,
                decoration: BoxDecoration(
                  color: Colors.grey.shade200,
                  borderRadius: BorderRadius.circular(16),
                ),
                child: image == null
                    ? const Icon(Icons.add_a_photo, size: 40)
                    : Image.file(image!, fit: BoxFit.cover),
              ),
            ),
            const SizedBox(height: 12),
            TextField(
              controller: nameCtrl,
              decoration: const InputDecoration(labelText: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬'),
            ),
            TextField(
              controller: priceCtrl,
              decoration: const InputDecoration(labelText: 'Ø§Ù„Ø³Ø¹Ø±'),
              keyboardType: TextInputType.number,
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: loading ? null : submit,
              child: loading
                  ? const CircularProgressIndicator()
                  : const Text('Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class AppButton extends StatelessWidget {
  final String title;
  final VoidCallback onPressed;
  final IconData? icon;

  const AppButton({
    super.key,
    required this.title,
    required this.onPressed,
    this.icon,
  });

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      width: double.infinity,
      child: ElevatedButton.icon(
        icon: Icon(icon ?? Icons.arrow_forward),
        label: Text(title),
        style: ElevatedButton.styleFrom(
          padding: const EdgeInsets.symmetric(vertical: 14),
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(14),
          ),
        ),
        onPressed: onPressed,
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:lottie/lottie.dart';

class AnimatedBanner extends StatelessWidget {
  final String asset;
  final double height;

  const AnimatedBanner({
    super.key,
    required this.asset,
    this.height = 160,
  });

  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(16),
      child: Lottie.asset(
        asset,
        height: height,
        fit: BoxFit.cover,
        repeat: true,
      ),
    );
  }
}
import 'package:flutter/material.dart';

import 'injection.dart';
import 'theme/app_theme.dart';
import 'screens/home/home_page.dart';

void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await configureDependencies();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Yemen Market',
      theme: AppTheme.light,
      home: const HomePage(),
    );
  }
}
import 'package:flutter/material.dart';
import 'app_shell/root_page.dart';
import 'core/theme/app_theme.dart';

class YemenMarketApp extends StatelessWidget {
  const YemenMarketApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      theme: AppTheme.light,
      darkTheme: AppTheme.dark,
      home: const RootPage(),
    );
  }
}
import 'package:get_it/get_it.dart';
import 'features/products/presentation/cubit/products_cubit.dart';

final sl = GetIt.instance;

void initInjection() {
  sl.registerFactory<ProductsCubit>(() => ProductsCubit());
}
import 'package:firebase_auth/firebase_auth.dart';
import 'package:cloud_firestore/cloud_firestore.dart';

class AuthService {
  final FirebaseAuth _auth = FirebaseAuth.instance;
  final FirebaseFirestore _db = FirebaseFirestore.instance;

  Future<void> register(
    String email,
    String password,
    String role,
  ) async {
    final cred = await _auth.createUserWithEmailAndPassword(
      email: email,
      password: password,
    );

    await _db.collection('users').doc(cred.user!.uid).set({
      'email': email,
      'role': role,
      'createdAt': FieldValue.serverTimestamp(),
    });
  }

  Future<void> login(String email, String password) async {
    await _auth.signInWithEmailAndPassword(
      email: email,
      password: password,
    );
  }
}
class AppUser {
  final String uid;
  final String email;
  final String role;

  AppUser({
    required this.uid,
    required this.email,
    required this.role,
  });

  Map<String, dynamic> toMap() {
    return {
      'uid': uid,
      'email': email,
      'role': role,
    };
  }
}
class ProductModel {
  final String id;
  final String name;
  final String description;
  final double price;
  final String imageUrl;
  final String traderId;

  ProductModel({
    required this.id,
    required this.name,
    required this.description,
    required this.price,
    required this.imageUrl,
    required this.traderId,
  });

  Map<String, dynamic> toMap() {
    return {
      'name': name,
      'description': description,
      'price': price,
      'imageUrl': imageUrl,
      'traderId': traderId,
      'createdAt': DateTime.now(),
    };
  }
}
class Shop {
  final String id;
  final String name;
  final double lat;
  final double lng;
  final bool approved;

  Shop({
    required this.id,
    required this.name,
    required this.lat,
    required this.lng,
    required this.approved,
  });

  Map<String, dynamic> toMap() {
    return {
      'name': name,
      'lat': lat,
      'lng': lng,
      'approved': approved,
    };
  }
}
class PaymentMethod {
  final String id;
  final String name;
  final String type; // wallet | bank | cash
  final bool enabled;

  PaymentMethod({
    required this.id,
    required this.name,
    required this.type,
    required this.enabled,
  });

  Map<String, dynamic> toMap() {
    return {
      'name': name,
      'type': type,
      'enabled': enabled,
    };
  }
}
class Product {
  final String name;
  final double price;
  final String image;

  Product({
    required this.name,
    required this.price,
    required this.image,
  });
}
class Category {
  final String id;
  final String title;
  final String icon;

  const Category({
    required this.id,
    required this.title,
    required this.icon,
  });
}
import 'package:flutter/material.dart';

class ProductCard extends StatelessWidget {
  final String name;
  final double price;

  const ProductCard({super.key, required this.name, required this.price});

  @override
  Widget build(BuildContext context) {
    return Card(
      margin: const EdgeInsets.only(bottom: 12),
      child: ListTile(
        title: Text(name),
        subtitle: Text('$price YER'),
        trailing: const Icon(Icons.arrow_forward_ios),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class CategoryCard extends StatelessWidget {
  final String title;
  final IconData icon;

  const CategoryCard({super.key, required this.title, required this.icon});

  @override
  Widget build(BuildContext context) {
    return Container(
      width: 80,
      margin: const EdgeInsets.only(right: 10),
      decoration: BoxDecoration(
        color: Theme.of(context).cardColor,
        borderRadius: BorderRadius.circular(12),
      ),
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(icon),
          const SizedBox(height: 5),
          Text(title, textAlign: TextAlign.center),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class PayButton extends StatelessWidget {
  const PayButton({super.key});

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: () =>
          Navigator.pushNamed(context, '/payment-info'),
      child: const Text('Ø§Ù„Ø¯ÙØ¹'),
    );
  }
}
import 'package:flutter/material.dart';
import '../localization/lang_controller.dart';
import '../localization/strings.dart';
import 'marketplace/marketplace_page.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return ValueListenableBuilder(
      valueListenable: LangController.lang,
      builder: (_, lang, __) {
        return Scaffold(
          backgroundColor: const Color(0xFF121826),
          appBar: AppBar(
            backgroundColor: const Color(0xFF121826),
            elevation: 0,
            title: Text(Strings.text('title', lang)),
            actions: [
              IconButton(
                icon: const Icon(Icons.language),
                onPressed: LangController.toggle,
              ),
            ],
          ),
          body: Padding(
            padding: const EdgeInsets.all(16),
            child: Column(
              children: [
                ElevatedButton(
                  onPressed: () {
                    Navigator.push(
                      context,
                      MaterialPageRoute(
                        builder: (_) => const MarketplacePage(),
                      ),
                    );
                  },
                  child: const Text('Open Marketplace'),
                ),
              ],
            ),
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';
import '../../trader/trader_service.dart';

class AddProductPage extends StatefulWidget {
  const AddProductPage({super.key});

  @override
  State<AddProductPage> createState() => _AddProductPageState();
}

class _AddProductPageState extends State<AddProductPage> {
  final _nameController = TextEditingController();
  final _priceController = TextEditingController();
  final _service = TraderService();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Add Product')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: _nameController,
              decoration: const InputDecoration(labelText: 'Product Name'),
            ),
            TextField(
              controller: _priceController,
              decoration: const InputDecoration(labelText: 'Price'),
              keyboardType: TextInputType.number,
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () async {
                await _service.addProduct(
                  name: _nameController.text,
                  price: double.parse(_priceController.text),
                );
                Navigator.pop(context);
              },
              child: const Text('Submit'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../widgets/product_card.dart';
import '../widgets/category_card.dart';

class MarketplacePage extends StatelessWidget {
  const MarketplacePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xFF0F172A),
      appBar: AppBar(
        backgroundColor: const Color(0xFF0F172A),
        elevation: 0,
        title: const Text('Marketplace'),
      ),
      body: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const SizedBox(height: 10),
          SizedBox(
            height: 90,
            child: ListView(
              scrollDirection: Axis.horizontal,
              padding: const EdgeInsets.symmetric(horizontal: 16),
              children: const [
                CategoryCard(title: 'Food'),
                CategoryCard(title: 'Electronics'),
                CategoryCard(title: 'Clothes'),
                CategoryCard(title: 'Services'),
              ],
            ),
          ),
          const SizedBox(height: 10),
          Expanded(
            child: StreamBuilder<QuerySnapshot>(
              stream: FirebaseFirestore.instance
                  .collection('products')
                  .where('approved', isEqualTo: true)
                  .snapshots(),
              builder: (context, snapshot) {
                if (!snapshot.hasData) {
                  return const Center(child: CircularProgressIndicator());
                }

                return ListView(
                  padding: const EdgeInsets.all(16),
                  children: snapshot.data!.docs.map((doc) {
                    final data = doc.data() as Map<String, dynamic>;
                    return ProductCard(
                      name: data['name'],
                      price: (data['price'] as num).toDouble(),
                    );
                  }).toList(),
                );
              },
            ),
          ),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';

class MapPage extends StatefulWidget {
  const MapPage({super.key});

  @override
  State<MapPage> createState() => _MapPageState();
}

class _MapPageState extends State<MapPage> {
  late GoogleMapController mapController;

  final LatLng _center = const LatLng(15.3694, 44.1910); // ØµÙ†Ø¹Ø§Ø¡

  final Set<Marker> _markers = {
    const Marker(
      markerId: MarkerId('shop1'),
      position: LatLng(15.3710, 44.1930),
      infoWindow: InfoWindow(
        title: 'Ù…ØªØ¬Ø± Ø§Ù„ÙŠÙ…Ù†',
        snippet: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
      ),
    ),
    const Marker(
      markerId: MarkerId('shop2'),
      position: LatLng(15.3680, 44.1890),
      infoWindow: InfoWindow(
        title: 'Ø³ÙˆÙ‚ Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
        snippet: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª',
      ),
    ),
  };

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xFF0F172A),
      appBar: AppBar(
        title: const Text('Ø§Ù„Ø®Ø±ÙŠØ·Ø©'),
        backgroundColor: const Color(0xFF0F172A),
      ),
      body: GoogleMap(
        initialCameraPosition: CameraPosition(
          target: _center,
          zoom: 14.0,
        ),
        markers: _markers,
        onMapCreated: (controller) {
          mapController = controller;
        },
        myLocationButtonEnabled: true,
        zoomControlsEnabled: false,
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../../map/shop_service.dart';

class AddShopPage extends StatefulWidget {
  const AddShopPage({super.key});

  @override
  State<AddShopPage> createState() => _AddShopPageState();
}

class _AddShopPageState extends State<AddShopPage> {
  final _nameController = TextEditingController();
  final _latController = TextEditingController();
  final _lngController = TextEditingController();
  final _service = ShopService();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Add Shop')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: _nameController,
              decoration: const InputDecoration(labelText: 'Shop Name'),
            ),
            TextField(
              controller: _latController,
              decoration: const InputDecoration(labelText: 'Latitude'),
            ),
            TextField(
              controller: _lngController,
              decoration: const InputDecoration(labelText: 'Longitude'),
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () async {
                await _service.addShop(
                  name: _nameController.text,
                  lat: double.parse(_latController.text),
                  lng: double.parse(_lngController.text),
                );
                Navigator.pop(context);
              },
              child: const Text('Submit'),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../../payment/payment_service.dart';

class PaymentPage extends StatelessWidget {
  final double amount;
  const PaymentPage({super.key, required this.amount});

  @override
  Widget build(BuildContext context) {
    final service = PaymentService();

    return Scaffold(
      appBar: AppBar(title: const Text('Payment')),
      body: StreamBuilder<QuerySnapshot>(
        stream: service.getAvailableMethods(),
        builder: (context, snapshot) {
          if (!snapshot.hasData) {
            return const Center(child: CircularProgressIndicator());
          }

          return ListView(
            children: snapshot.data!.docs.map((doc) {
              final data = doc.data() as Map<String, dynamic>;
              return ListTile(
                title: Text(data['name']),
                subtitle: Text(data['type']),
                onTap: () async {
                  await service.createPayment(
                    userId: 'TEMP_USER',
                    amount: amount,
                    method: data['name'],
                  );
                  Navigator.pop(context);
                },
              );
            }).toList(),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../home/home_page.dart';
import '../map/map_page.dart';
import '../payment/payment_page.dart';

class MainLayout extends StatefulWidget {
  const MainLayout({super.key});

  @override
  State<MainLayout> createState() => _MainLayoutState();
}

class _MainLayoutState extends State<MainLayout> {
  int index = 0;

  final pages = const [
    HomePage(),
    MapPage(),
    PaymentPage(amount: 0),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'Home'),
          BottomNavigationBarItem(icon: Icon(Icons.map), label: 'Map'),
          BottomNavigationBarItem(icon: Icon(Icons.payment), label: 'Pay'),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:lottie/lottie.dart';

class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Yemen Market'),
        actions: [
          IconButton(
            icon: const Icon(Icons.search),
            onPressed: () {},
          ),
          IconButton(
            icon: const Icon(Icons.notifications_none),
            onPressed: () {},
          ),
        ],
      ),
      body: SingleChildScrollView(
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            // ğŸ”¥ Animated Banner
            SizedBox(
              height: 180,
              width: double.infinity,
              child: Lottie.asset(
                'assets/animations/banner.json',
                fit: BoxFit.cover,
              ),
            ),

            const Padding(
              padding: EdgeInsets.all(16),
              child: Text(
                'âš¡ Ø§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©',
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
              ),
            ),

            GridView.count(
              crossAxisCount: 4,
              shrinkWrap: true,
              physics: const NeverScrollableScrollPhysics(),
              children: const [
                _ServiceIcon(icon: Icons.payment, label: 'Ø¯ÙØ¹'),
                _ServiceIcon(icon: Icons.phone_android, label: 'Ø§ØªØµØ§Ù„Ø§Øª'),
                _ServiceIcon(icon: Icons.flight, label: 'Ø³ÙØ±'),
                _ServiceIcon(icon: Icons.sports_esports, label: 'Ø£Ù„Ø¹Ø§Ø¨'),
                _ServiceIcon(icon: Icons.shopping_cart, label: 'ØªØ³ÙˆÙ‚'),
                _ServiceIcon(icon: Icons.currency_bitcoin, label: 'ÙƒØ±ÙŠØ¨ØªÙˆ'),
                _ServiceIcon(icon: Icons.wifi, label: 'Ø¥Ù†ØªØ±Ù†Øª'),
                _ServiceIcon(icon: Icons.star, label: 'VIP'),
              ],
            ),

            const Padding(
              padding: EdgeInsets.all(16),
              child: Text(
                'ğŸ’ Ø®Ø¯Ù…Ø§Øª VIP',
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
              ),
            ),

            SizedBox(
              height: 120,
              child: ListView(
                scrollDirection: Axis.horizontal,
                children: const [
                  _VipCard(title: 'Crypto Pro'),
                  _VipCard(title: 'Forex Signals'),
                  _VipCard(title: 'Smart Discounts'),
                ],
              ),
            ),

            const Padding(
              padding: EdgeInsets.all(16),
              child: Text(
                'ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
                style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
              ),
            ),

            const ListTile(
              leading: Icon(Icons.trending_up),
              title: Text('Ø´Ø­Ù† Ø±ØµÙŠØ¯ ÙÙˆØ±ÙŠ'),
              subtitle: Text('Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‹Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹'),
            ),

            const ListTile(
              leading: Icon(Icons.trending_up),
              title: Text('Ø­Ø¬Ø² ÙÙ†Ø§Ø¯Ù‚'),
              subtitle: Text('Ø¹Ø±ÙˆØ¶ Ø­ØµØ±ÙŠØ©'),
            ),
          ],
        ),
      ),
    );
  }
}

class _ServiceIcon extends StatelessWidget {
  final IconData icon;
  final String label;

  const _ServiceIcon({required this.icon, required this.label});

  @override
  Widget build(BuildContext context) {
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        CircleAvatar(
          radius: 24,
          child: Icon(icon),
import 'package:flutter/material.dart';

class SplashPage extends StatefulWidget {
  const SplashPage({super.key});

  @override
  State<SplashPage> createState() => _SplashPageState();
}

class _SplashPageState extends State<SplashPage> {
  @override
  void initState() {
    super.initState();

    Future.delayed(const Duration(seconds: 2), () {
      Navigator.pushReplacementNamed(context, '/');
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Colors.green,
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: const [
            Icon(Icons.storefront, size: 80, color: Colors.white),
            SizedBox(height: 16),
            Text(
              'Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†ÙŠ',
              style: TextStyle(
                color: Colors.white,
                fontSize: 28,
                fontWeight: FontWeight.bold,
              ),
            ),
            SizedBox(height: 8),
            Text(
              'ØªØ³ÙˆÙ‚ Ø¨Ø°ÙƒØ§Ø¡',
              style: TextStyle(color: Colors.white70),
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import '../../features/products/presentation/pages/products_page.dart';
import '../../features/cart/presentation/pages/cart_page.dart';
import '../../features/orders/presentation/pages/orders_page.dart';
import '../../features/auth/presentation/pages/profile_page.dart';

class MainPage extends StatefulWidget {
  const MainPage({super.key});

  @override
  State<MainPage> createState() => _MainPageState();
}

class _MainPageState extends State<MainPage> {
  int _index = 0;

  final pages = const [
    ProductsPage(),
    CartPage(),
    OrdersPage(),
    ProfilePage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: IndexedStack(
        index: _index,
        children: pages,
      ),
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: _index,
        onTap: (i) => setState(() => _index = i),
        type: BottomNavigationBarType.fixed,
        items: const [
          BottomNavigationBarItem(
            icon: Icon(Icons.store),
            label: 'Ø§Ù„Ù…ØªØ¬Ø±',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.shopping_cart),
            label: 'Ø§Ù„Ø³Ù„Ø©',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.receipt_long),
            label: 'Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.person),
            label: 'Ø­Ø³Ø§Ø¨ÙŠ',
          ),
        ],
      ),
    );
  }
}
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:image_picker/image_picker.dart';
import '../../services/product_service.dart';
import '../../models/product_model.dart';
import 'package:firebase_auth/firebase_auth.dart';

class AddProductPage extends StatefulWidget {
  const AddProductPage({super.key});

  @override
  State<AddProductPage> createState() => _AddProductPageState();
}

class _AddProductPageState extends State<AddProductPage> {
  final _name = TextEditingController();
  final _desc = TextEditingController();
  final _price = TextEditingController();
  File? _image;

  Future pickImage() async {
    final img = await ImagePicker().pickImage(source: ImageSource.gallery);
    if (img != null) setState(() => _image = File(img.path));
  }

  Future submit() async {
    final product = ProductModel(
      id: '',
      name: _name.text,
      description: _desc.text,
      price: double.parse(_price.text),
      imageUrl: '',
      traderId: FirebaseAuth.instance.currentUser!.uid,
    );

    await ProductService().addProduct(product, _image!);
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(controller: _name, decoration: const InputDecoration(labelText: 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬')),
            TextField(controller: _desc, decoration: const InputDecoration(labelText: 'Ø§Ù„ÙˆØµÙ')),
            TextField(controller: _price, decoration: const InputDecoration(labelText: 'Ø§Ù„Ø³Ø¹Ø±')),
            const SizedBox(height: 10),
            ElevatedButton(onPressed: pickImage, child: const Text('Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©')),
            const SizedBox(height: 10),
            ElevatedButton(onPressed: submit, child: const Text('Ø±ÙØ¹ Ø§Ù„Ù…Ù†ØªØ¬')),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class LangController {
  static ValueNotifier<String> lang = ValueNotifier('ar');

  static void toggle() {
    lang.value = lang.value == 'ar' ? 'en' : 'ar';
  }
}
class Strings {
  static String text(String key, String lang) {
    const data = {
      'title': {
        'ar': 'Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†',
        'en': 'Yemen Market',
      },
      'categories': {
        'ar': 'Ø§Ù„Ø£Ù‚Ø³Ø§Ù…',
        'en': 'Categories',
      },
    };

    return data[key]?[lang] ?? '';
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';

class FirestoreService {
  final FirebaseFirestore _db = FirebaseFirestore.instance;

  CollectionReference get users => _db.collection('users');
  CollectionReference get products => _db.collection('products');
  CollectionReference get shops => _db.collection('shops');
  CollectionReference get orders => _db.collection('orders');
}
import 'package:firebase_auth/firebase_auth.dart';

class GuestAuthService {
  static Future<void> signIn() async {
    final auth = FirebaseAuth.instance;
    if (auth.currentUser == null) {
      await auth.signInAnonymously();
    }
  }
}
import 'dart:io';
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_storage/firebase_storage.dart';
import 'package:firebase_auth/firebase_auth.dart';
import '../models/product_model.dart';

class ProductService {
  final _firestore = FirebaseFirestore.instance;
  final _storage = FirebaseStorage.instance;
  final _auth = FirebaseAuth.instance;

  Future<void> addProduct(ProductModel product, File image) async {
    final uid = _auth.currentUser!.uid;

    final ref = _storage
        .ref('products/$uid/${DateTime.now().millisecondsSinceEpoch}.jpg');

    await ref.putFile(image);
    final imageUrl = await ref.getDownloadURL();

    await _firestore.collection('products').add(
      product.toMap()..['imageUrl'] = imageUrl,
    );
  }
}
import 'dart:convert';
import 'package:http/http.dart' as http;
import 'package:firebase_auth/firebase_auth.dart';

class AiChatService {
  static const String _endpoint =
      'https://YOUR_CLOUD_FUNCTION_URL/chat';

  static Future<String> sendMessage(String message) async {
    final user = FirebaseAuth.instance.currentUser;

    final response = await http.post(
      Uri.parse(_endpoint),
      headers: {
        'Content-Type': 'application/json',
      },
      body: jsonEncode({
        'uid': user?.uid,
        'message': message,
      }),
    );

    if (response.statusCode == 200) {
      final data = jsonDecode(response.body);
      return data['reply'];
    } else {
      return 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ';
    }
  }
}
import 'package:firebase_auth/firebase_auth.dart';
import 'package:cloud_firestore/cloud_firestore.dart';

class FirebaseService {
  static final _auth = FirebaseAuth.instance;
  static final _db = FirebaseFirestore.instance;

  static Future<User?> signInGuest() async {
    final cred = await _auth.signInAnonymously();
    final user = cred.user;

    if (user != null) {
      await _db.collection('users').doc(user.uid).set({
        'uid': user.uid,
        'createdAt': FieldValue.serverTimestamp(),
        'wallet': 0,
        'vip': false,
      }, SetOptions(merge: true));
    }
    return user;
  }
}
import 'package:firebase_core/firebase_core.dart';
import 'package:flutter/foundation.dart';

class DefaultFirebaseOptions {
  static FirebaseOptions get currentPlatform {
    if (kIsWeb) {
      throw UnsupportedError('Web not configured yet');
    }
    return android;
  }

  static const FirebaseOptions android = FirebaseOptions(
    apiKey: 'AIzaSyDB5ckT9-C7n-Am6LFCj-4dnmSbMXWTEAY',
    appId: '1:282862193658:android:c423e9488897ace99c3243',
    messagingSenderId: '282862193658',
    projectId: 'yemenmarketapp',
    storageBucket: 'yemenmarketapp.firebasestorage.app',
  );
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

class TraderService {
  final FirebaseFirestore _db = FirebaseFirestore.instance;
  final FirebaseAuth _auth = FirebaseAuth.instance;

  Future<void> addProduct({
    required String name,
    required double price,
  }) async {
    final uid = _auth.currentUser!.uid;

    await _db.collection('products').add({
      'name': name,
      'price': price,
      'sellerId': uid,
      'approved': false,
      'createdAt': FieldValue.serverTimestamp(),
    });
  }
}
import 'package:flutter/material.dart';
import 'package:cloud_firestore/cloud_firestore.dart';
import '../admin_service.dart';

class AdminDashboard extends StatelessWidget {
  const AdminDashboard({super.key});

  @override
  Widget build(BuildContext context) {
    final adminService = AdminService();

    return Scaffold(
      backgroundColor: const Color(0xFF121826),
      appBar: AppBar(
        title: const Text('Admin Dashboard'),
        backgroundColor: const Color(0xFF121826),
        elevation: 0,
      ),
      body: StreamBuilder<QuerySnapshot>(
        stream: FirebaseFirestore.instance
            .collection('products')
            .where('approved', isEqualTo: false)
            .snapshots(),
        builder: (context, snapshot) {
          if (snapshot.connectionState == ConnectionState.waiting) {
            return const Center(child: CircularProgressIndicator());
          }

          if (!snapshot.hasData || snapshot.data!.docs.isEmpty) {
            return const Center(
              child: Text(
                'No pending products',
                style: TextStyle(color: Colors.white),
              ),
            );
          }

          return ListView(
            padding: const EdgeInsets.all(16),
            children: snapshot.data!.docs.map((doc) {
              final data = doc.data() as Map<String, dynamic>;
              return Card(
                color: const Color(0xFF1E293B),
                child: ListTile(
                  title: Text(
                    data['name'],
                    style: const TextStyle(color: Colors.white),
                  ),
                  subtitle: Text(
                    'Price: ${data['price']}',
                    style: const TextStyle(color: Colors.white70),
                  ),
                  trailing: Row(
                    mainAxisSize: MainAxisSize.min,
                    children: [
                      IconButton(
                        icon: const Icon(Icons.check, color: Colors.green),
                        onPressed: () =>
                            adminService.approveProduct(doc.id),
                      ),
                      IconButton(
                        icon: const Icon(Icons.close, color: Colors.red),
                        onPressed: () =>
                            adminService.rejectProduct(doc.id),
                      ),
                    ],
                  ),
                ),
              );
            }).toList(),
          );
        },
      ),
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';

class AdminService {
  final FirebaseFirestore _db = FirebaseFirestore.instance;

  Future<void> approveProduct(String productId) async {
    await _db.collection('products').doc(productId).update({
      'approved': true,
      'approvedAt': FieldValue.serverTimestamp(),
    });
  }

  Future<void> rejectProduct(String productId) async {
    await _db.collection('products').doc(productId).delete();
  }
}
import '../../core/services/wallet_service.dart';

class AdminWalletService {
  static void addBalance(double amount) {
    WalletService.add(amount, title: 'Ø´Ø­Ù† Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
  }

  static void deductBalance(double amount) {
    WalletService.spend(amount, title: 'Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©');
  }
}
import 'package:flutter/material.dart';
import 'admin_wallet_service.dart';

class AdminWalletPage extends StatefulWidget {
  const AdminWalletPage({super.key});

  @override
  State<AdminWalletPage> createState() => _AdminWalletPageState();
}

class _AdminWalletPageState extends State<AdminWalletPage> {
  final controller = TextEditingController();

  void _add() {
    final value = double.tryParse(controller.text);
    if (value != null) {
      AdminWalletService.addBalance(value);
      controller.clear();
      setState(() {});
    }
  }

  void _deduct() {
    final value = double.tryParse(controller.text);
    if (value != null) {
      AdminWalletService.deductBalance(value);
      controller.clear();
      setState(() {});
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©')),
      body: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(
          children: [
            TextField(
              controller: controller,
              keyboardType: TextInputType.number,
              decoration: const InputDecoration(
                labelText: 'Ø§Ù„Ù…Ø¨Ù„Øº',
                border: OutlineInputBorder(),
              ),
            ),
            const SizedBox(height: 16),
            Row(
              children: [
                Expanded(
                  child: ElevatedButton(
                    onPressed: _add,
                    child: const Text('â• Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯'),
                  ),
                ),
                const SizedBox(width: 12),
                Expanded(
                  child: ElevatedButton(
                    onPressed: _deduct,
                    style: ElevatedButton.styleFrom(
                      backgroundColor: Colors.red,
                    ),
                    child: const Text('â– Ø®ØµÙ… Ø±ØµÙŠØ¯'),
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:firebase_auth/firebase_auth.dart';

class ShopService {
  final FirebaseFirestore _db = FirebaseFirestore.instance;
  final FirebaseAuth _auth = FirebaseAuth.instance;

  Future<void> addShop({
    required String name,
    required double lat,
    required double lng,
  }) async {
    final uid = _auth.currentUser!.uid;

    await _db.collection('shops').add({
      'name': name,
      'lat': lat,
      'lng': lng,
      'ownerId': uid,
      'approved': false,
      'createdAt': FieldValue.serverTimestamp(),
    });
  }
}
import 'package:cloud_firestore/cloud_firestore.dart';

class PaymentService {
  final FirebaseFirestore _db = FirebaseFirestore.instance;

  Stream<QuerySnapshot> getAvailableMethods() {
    return _db
        .collection('payment_methods')
        .where('enabled', isEqualTo: true)
        .snapshots();
  }

  Future<void> createPayment({
    required String userId,
    required double amount,
    required String method,
  }) async {
    await _db.collection('payments').add({
      'userId': userId,
      'amount': amount,
      'method': method,
      'status': 'pending',
      'createdAt': FieldValue.serverTimestamp(),
    });
  }
}
import 'package:flutter/material.dart';

import '../home/home_page.dart';
import '../categories/categories_page.dart';
import '../search/search_page.dart';
import '../cart/cart_page.dart';
import '../settings/settings_page.dart';

class RootPage extends StatefulWidget {
  const RootPage({super.key});

  @override
  State<RootPage> createState() => _RootPageState();
}

class _RootPageState extends State<RootPage> {
  int index = 0;

  final pages = const [
    HomePage(),
    CategoriesPage(),
    SearchPage(),
    CartPage(),
    SettingsPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        type: BottomNavigationBarType.fixed,
        items: const [
          BottomNavigationBarItem(
            icon: Icon(Icons.home),
            label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.category),
            label: 'Ø§Ù„Ø£Ù‚Ø³Ø§Ù…',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.search),
            label: 'Ø¨Ø­Ø«',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.shopping_cart),
            label: 'Ø§Ù„Ø³Ù„Ø©',
          ),
          BottomNavigationBarItem(
            icon: Icon(Icons.settings),
            label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª',
          ),
        ],
      ),
    );
  }
}
import '../models/product.dart';
import '../models/category.dart';

final categories = [
  Category(id: 'c1', title: 'Ø¬ÙˆØ§Ù„Ø§Øª', icon: 'ğŸ“±'),
  Category(id: 'c2', title: 'Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª', icon: 'ğŸ’»'),
  Category(id: 'c3', title: 'Ø³Ù…Ø§Ø¹Ø§Øª', icon: 'ğŸ§'),
  Category(id: 'c4', title: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', icon: 'âŒš'),
];

final products = [
  Product(
    id: 'p1',
    name: 'Ø¢ÙŠÙÙˆÙ† 14',
    image: 'assets/images/iphone.png',
    price: 500,
    category: 'Ø¬ÙˆØ§Ù„Ø§Øª',
    isOffer: true,
  ),
  Product(
    id: 'p2',
    name: 'Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬ S23',
    image: 'assets/images/samsung.png',
    price: 250,
    category: 'Ø¬ÙˆØ§Ù„Ø§Øª',
  ),
  Product(
    id: 'p3',
    name: 'Ø³Ù…Ø§Ø¹Ø§Øª',
    image: 'assets/images/headphones.png',
    price: 40,
    category: 'Ø³Ù…Ø§Ø¹Ø§Øª',
  ),
  Product(
    id: 'p4',
    name: 'Ù„Ø§Ø¨ØªÙˆØ¨',
    image: 'assets/images/laptop.png',
    price: 800,
    category: 'Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª',
  ),
];
class CategoryMoc {
  final String id;
  final String name;
  final String icon;

  CategoryMoc({
    required this.id,
    required this.name,
    required this.icon,
  });
}

final List<CategoryMoc> mockCategories = [
  CategoryMoc(id: '1', name: 'Ù‡ÙˆØ§ØªÙ', icon: 'ğŸ“±'),
  CategoryMoc(id: '2', name: 'Ù„Ø§Ø¨ØªÙˆØ¨Ø§Øª', icon: 'ğŸ’»'),
  CategoryMoc(id: '3', name: 'Ø³Ù…Ø§Ø¹Ø§Øª', icon: 'ğŸ§'),
  CategoryMoc(id: '4', name: 'Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª', icon: 'âŒš'),
];
class Product {
  final String name;
  final double price;
  final String image;

  Product(this.name, this.price, this.image);
}

final products = List.generate(
  50,
  (i) => Product(
    'Ù…Ù†ØªØ¬ ${i + 1}',
    (10 + i).toDouble(),
    'https://picsum.photos/200?random=$i',
  ),
);
final offers = [
  {'title': 'ğŸ”¥ Ø®ØµÙ… 50%', 'subtitle': 'Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©'},
  {'title': 'âš¡ Flash Sale', 'subtitle': 'ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø§Øª'},
];
import 'package:flutter/material.dart';

class AppTheme {
  static ThemeData light = ThemeData(
    useMaterial3: true,
    colorScheme: ColorScheme.fromSeed(
      seedColor: const Color(0xFF2563EB),
      brightness: Brightness.light,
    ),
    scaffoldBackgroundColor: const Color(0xFFF8FAFC),
    appBarTheme: const AppBarTheme(
      centerTitle: true,
      elevation: 0,
    ),
    cardTheme: CardThemeData(
      elevation: 2,
      shape: RoundedRectangleBorder(
        borderRadius: BorderRadius.circular(16),
      ),
    ),
  );
}
import 'package:hydrated_bloc/hydrated_bloc.dart';

class AppCubit extends HydratedCubit<int> {
  AppCubit() : super(0);

  void changeTab(int index) => emit(index);

  @override
  int? fromJson(Map<String, dynamic> json) {
    return json['tab'] as int?;
  }

  @override
  Map<String, dynamic>? toJson(int state) {
    return {'tab': state};
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';

import 'app_cubit.dart';
import '../features/home/view/home_view.dart';
import '../features/settings/view/settings_view.dart';

class AppView extends StatelessWidget {
  const AppView({super.key});

  @override
  Widget build(BuildContext context) {
    return BlocBuilder<AppCubit, int>(
      builder: (context, index) {
        return Scaffold(
          body: IndexedStack(
            index: index,
            children: const [
              HomeView(),
              SettingsView(),
            ],
          ),
          bottomNavigationBar: BottomNavigationBar(
            currentIndex: index,
            onTap: (i) => context.read<AppCubit>().changeTab(i),
            items: const [
              BottomNavigationBarItem(
                icon: Icon(Icons.home),
                label: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
              ),
              BottomNavigationBarItem(
                icon: Icon(Icons.settings),
                label: "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
              ),
            ],
          ),
        );
      },
    );
  }
}
import 'package:flutter/widgets.dart';
import 'package:hydrated_bloc/hydrated_bloc.dart';
import 'package:path_provider/path_provider.dart';

import '../core/di/service_locator.dart';
import 'app.dart';

class AppBootstrap {
  static Future<void> run() async {
    WidgetsFlutterBinding.ensureInitialized();

    final storage = await HydratedStorage.build(
      storageDirectory: await getApplicationDocumentsDirectory(),
    );
    HydratedBloc.storage = storage;

    setupLocator();

    runApp(const YemenMarketApp());
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import '../injection.dart';
import '../features/products/presentation/cubit/products_cubit.dart';
import '../features/home/presentation/pages/home_page.dart';

class AppRoot extends StatelessWidget {
  const AppRoot({super.key});

  @override
  Widget build(BuildContext context) {
    return MultiBlocProvider(
      providers: [
        BlocProvider(
          create: (_) => sl<ProductsCubit>()..loadInitial(),
        ),
      ],
      child: MaterialApp(
        debugShowCheckedModeBanner: false,
        title: 'Yemen Market',
        theme: ThemeData(useMaterial3: true),
        home: const HomePage(),
      ),
    );
  }
}
import 'package:flutter/material.dart';

import '../features/home/view/home_page.dart';
import '../features/settings/view/settings_page.dart';

class AppShell extends StatefulWidget {
  const AppShell({super.key});

  @override
  State<AppShell> createState() => _AppShellState();
}

class _AppShellState extends State<AppShell> {
  int index = 0;

  final pages = const [
    HomePage(),
    SettingsPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'),
          BottomNavigationBarItem(icon: Icon(Icons.settings), label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../features/home/home_page.dart';
import '../features/cart/cart_page.dart';
import '../features/offers/offers_page.dart';

class Dashboard extends StatefulWidget {
  const Dashboard({super.key});

  @override
  State<Dashboard> createState() => _DashboardState();
}

class _DashboardState extends State<Dashboard> {
  int index = 0;

  final pages = const [
    HomePage(),
    CartPage(),
    OffersPage(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.store), label: 'Ø§Ù„Ø³ÙˆÙ‚'),
          BottomNavigationBarItem(icon: Icon(Icons.shopping_cart), label: 'Ø§Ù„Ø³Ù„Ø©'),
          BottomNavigationBarItem(icon: Icon(Icons.local_offer), label: 'Ø§Ù„Ø¹Ø±ÙˆØ¶'),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class StatCard extends StatelessWidget {
  final String title;
  final String value;
  final IconData icon;

  const StatCard({
    super.key,
    required this.title,
    required this.value,
    required this.icon,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Row(
          children: [
            Icon(icon, size: 32),
            const SizedBox(width: 12),
            Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(title, style: const TextStyle(color: Colors.grey)),
                Text(
                  value,
                  style: const TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ],
            )
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class ProductCard extends StatelessWidget {
  final String title;
  final String price;

  const ProductCard({
    super.key,
    required this.title,
    required this.price,
  });

  @override
  Widget build(BuildContext context) {
    return Card(
      child: Padding(
        padding: const EdgeInsets.all(12),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Container(
              height: 120,
              decoration: BoxDecoration(
                color: Colors.grey.shade200,
                borderRadius: BorderRadius.circular(12),
              ),
              child: const Center(child: Icon(Icons.image, size: 40)),
            ),
            const SizedBox(height: 8),
            Text(title,
                style: const TextStyle(fontWeight: FontWeight.bold)),
            const SizedBox(height: 4),
            Text('$price Ø±.ÙŠ',
                style: const TextStyle(color: Colors.green)),
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:lottie/lottie.dart';

class AnimatedAdBanner extends StatelessWidget {
  final String animationPath;

  const AnimatedAdBanner({super.key, required this.animationPath});

  @override
  Widget build(BuildContext context) {
    return SizedBox(
      height: 160,
      child: Lottie.asset(animationPath),
    );
  }
}
import 'package:flutter/material.dart';

class MainBottomNav extends StatelessWidget {
  final int currentIndex;
  final Function(int) onTap;

  const MainBottomNav({
    super.key,
    required this.currentIndex,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return BottomNavigationBar(
      currentIndex: currentIndex,
      onTap: onTap,
      type: BottomNavigationBarType.fixed,
      items: const [
        BottomNavigationBarItem(icon: Icon(Icons.store), label: 'Ø§Ù„Ø³ÙˆÙ‚'),
        BottomNavigationBarItem(icon: Icon(Icons.local_offer), label: 'Ø§Ù„Ø¹Ø±ÙˆØ¶'),
        BottomNavigationBarItem(icon: Icon(Icons.account_balance_wallet), label: 'Ø§Ù„Ù…Ø­ÙØ¸Ø©'),
        BottomNavigationBarItem(icon: Icon(Icons.person), label: 'Ø­Ø³Ø§Ø¨ÙŠ'),
      ],
    );
  }
}
import 'presentation/games_page.dart';

class GamesModule {
  static routes() => {
    '/games': (_) => const GamesPage(),
  };
}
import 'package:flutter/material.dart';

class PaymentsPage extends StatelessWidget {
  const PaymentsPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ’³ Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ')),
      body: const Center(child: Text('Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø¯ÙØ¹')),
    );
  }
}
class PaymentService {
  static Future<bool> processPayment(double amount) async {
    // Ù„Ø§Ø­Ù‚Ù‹Ø§: API / Ø¨ÙˆØ§Ø¨Ø© Ø¯ÙØ¹
    await Future.delayed(const Duration(seconds: 1));
    return true;
  }
}
import 'presentation/payments_page.dart';

class PaymentModule {
  static routes() => {
    '/payments': (_) => const PaymentsPage(),
  };
}
import 'package:flutter/material.dart';

class TelecomPage extends StatelessWidget {
  const TelecomPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ“¡ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª')),
      body: const Center(child: Text('Ø´Ø­Ù† ÙˆØ¨Ø·Ø§Ù‚Ø§Øª Ø¥Ù†ØªØ±Ù†Øª')),
    );
  }
}
import 'presentation/telecom_page.dart';

class TelecomModule {
  static routes() => {
    '/telecom': (_) => const TelecomPage(),
  };
}
import 'package:flutter/material.dart';

class TravelPage extends StatelessWidget {
  const TravelPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('âœˆï¸ Ø§Ù„Ø³ÙØ± ÙˆØ§Ù„Ø³ÙŠØ§Ø­Ø©')),
      body: GridView.count(
        padding: const EdgeInsets.all(16),
        crossAxisCount: 2,
        childAspectRatio: 0.9,
        children: const [
          _ServiceCard('Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†', Icons.flight),
          _ServiceCard('ÙÙ†Ø§Ø¯Ù‚', Icons.hotel),
          _ServiceCard('ØªØ£Ø´ÙŠØ±Ø§Øª', Icons.description),
          _ServiceCard('Ø±Ø­Ù„Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ©', Icons.map),
        ],
      ),
    );
  }
}

class _ServiceCard extends StatelessWidget {
  final String title;
  final IconData icon;
  const _ServiceCard(this.title, this.icon);

  @override
  Widget build(BuildContext context) {
    return Card(
      elevation: 4,
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: [
          Icon(icon, size: 40),
          const SizedBox(height: 12),
          Text(title, style: const TextStyle(fontWeight: FontWeight.bold)),
        ],
      ),
    );
  }
}
import 'presentation/travel_page.dart';

class TravelModule {
  static routes() => {
    '/travel': (_) => const TravelPage(),
  };
}
import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;
import 'dart:convert';

class ChatPage extends StatefulWidget {
  const ChatPage({super.key});

  @override
  State<ChatPage> createState() => _ChatPageState();
}

class _ChatPageState extends State<ChatPage> {
  final TextEditingController _controller = TextEditingController();
  final List<Map<String, String>> _messages = [];

  bool _loading = false;

  Future<void> sendMessage(String msg) async {
    setState(() {
      _messages.add({'user': msg});
      _loading = true;
    });
    _controller.clear();

    // Ø±Ø§Ø¨Ø· Firebase Function
    final url = Uri.parse('https://us-central1-YOUR_PROJECT.cloudfunctions.net/chatAI');

    final response = await http.post(url,
        headers: {'Content-Type': 'application/json'},
        body: jsonEncode({'message': msg}));

    if (response.statusCode == 200) {
      final data = jsonDecode(response.body);
      setState(() {
        _messages.add({'bot': data['reply']});
        _loading = false;
      });
    } else {
      setState(() {
        _messages.add({'bot': 'âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„'});
        _loading = false;
      });
    }
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ¤– Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø³ÙˆÙ‚')),
      body: Column(
        children: [
          Expanded(
            child: ListView.builder(
              padding: const EdgeInsets.all(16),
              itemCount: _messages.length,
              itemBuilder: (_, index) {
                final msg = _messages[index];
                if (msg.containsKey('user')) {
                  return Align(
                    alignment: Alignment.centerRight,
                    child: Card(
                      color: Colors.green.shade100,
                      child: Padding(
                        padding: const EdgeInsets.all(8.0),
                        child: Text(msg['user']!),
                      ),
                    ),
                  );
                } else {
                  return Align(
                    alignment: Alignment.centerLeft,
                    child: Card(
                      color: Colors.grey.shade200,
                      child: Padding(
                        padding: const EdgeInsets.all(8.0),
                        child: Text(msg['bot']!),
                      ),
                    ),
                  );
                }
              },
            ),
          ),
          if (_loading) const LinearProgressIndicator(),
          Padding(
            padding: const EdgeInsets.all(8.0),
            child: Row(
              children: [
                Expanded(
                  child: TextField(
                    controller: _controller,
                    decoration: const InputDecoration(hintText: 'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§'),
                  ),
                ),
                IconButton(
                  icon: const Icon(Icons.send),
                  onPressed: () {
                    if (_controller.text.isNotEmpty) sendMessage(_controller.text);
                  },
                )
              ],
            ),
          )
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class HomeAppBar extends StatelessWidget implements PreferredSizeWidget {
  const HomeAppBar({super.key});

  @override
  Widget build(BuildContext context) {
    return AppBar(
      elevation: 0,
      backgroundColor: Colors.white,
      title: Container(
        height: 42,
        padding: const EdgeInsets.symmetric(horizontal: 12),
        decoration: BoxDecoration(
          color: Colors.grey.shade100,
          borderRadius: BorderRadius.circular(12),
        ),
        child: const Row(
          children: [
            Icon(Icons.search, color: Colors.grey),
            SizedBox(width: 8),
            Text(
              'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø¹Ø±Ø¶',
              style: TextStyle(color: Colors.grey, fontSize: 14),
            ),
          ],
        ),
      ),
      actions: [
        IconButton(
          icon: const Icon(Icons.notifications_none),
          onPressed: () {},
        ),
      ],
    );
  }

  @override
  Size get preferredSize => const Size.fromHeight(60);
}
import 'package:flutter/material.dart';

class HeroBanner extends StatelessWidget {
  const HeroBanner({super.key});

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 160,
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(16),
        gradient: const LinearGradient(
          colors: [Color(0xFF1E3C72), Color(0xFF2A5298)],
        ),
      ),
      child: const Center(
        child: Text(
          'ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹\nğŸ‘‘ Ø®Ø¯Ù…Ø§Øª VIP Ø­ØµØ±ÙŠØ©',
          textAlign: TextAlign.center,
          style: TextStyle(
            color: Colors.white,
            fontSize: 20,
            fontWeight: FontWeight.bold,
          ),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class HomeBottomNav extends StatelessWidget {
  final int currentIndex;
  final Function(int) onTap;

  const HomeBottomNav({
    super.key,
    required this.currentIndex,
    required this.onTap,
  });

  @override
  Widget build(BuildContext context) {
    return BottomNavigationBar(
      currentIndex: currentIndex,
      onTap: onTap,
      selectedItemColor: Colors.blue,
      unselectedItemColor: Colors.grey,
      type: BottomNavigationBarType.fixed,
      items: const [
        BottomNavigationBarItem(
          icon: Icon(Icons.storefront),
          label: 'Ø§Ù„Ø³ÙˆÙ‚',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.local_offer),
          label: 'Ø§Ù„Ø¹Ø±ÙˆØ¶',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.account_balance_wallet),
          label: 'Ø§Ù„Ù…Ø­ÙØ¸Ø©',
        ),
        BottomNavigationBarItem(
          icon: Icon(Icons.person),
          label: 'Ø­Ø³Ø§Ø¨ÙŠ',
        ),
      ],
    );
  }
}
import 'package:flutter/material.dart';

class HomeSkeleton extends StatelessWidget {
  const HomeSkeleton({super.key});

  @override
  Widget build(BuildContext context) {
    return ListView.builder(
      padding: const EdgeInsets.all(16),
      itemCount: 6,
      itemBuilder: (_, __) => Container(
        margin: const EdgeInsets.only(bottom: 16),
        height: 90,
        decoration: BoxDecoration(
          color: Colors.grey.shade300,
          borderRadius: BorderRadius.circular(12),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class QuickActions extends StatelessWidget {
  const QuickActions({super.key});

  @override
  Widget build(BuildContext context) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceAround,
      children: [
        _action(Icons.person, 'Ø­Ø³Ø§Ø¨ÙŠ'),
        _action(Icons.account_balance_wallet, 'Ø§Ù„Ù…Ø­ÙØ¸Ø©'),
        _action(Icons.receipt_long, 'Ø·Ù„Ø¨Ø§ØªÙŠ'),
      ],
    );
  }

  Widget _action(IconData icon, String title) {
    return Column(
      children: [
        CircleAvatar(
          radius: 24,
          child: Icon(icon),
        ),
        const SizedBox(height: 6),
        Text(title),
      ],
    );
  }
}
import 'package:flutter/material.dart';

class ServicesGrid extends StatelessWidget {
  const ServicesGrid({super.key});

  @override
  Widget build(BuildContext context) {
    final services = [
      {'icon': Icons.flight, 'title': 'Ø³ÙØ±'},
      {'icon': Icons.hotel, 'title': 'ÙÙ†Ø§Ø¯Ù‚'},
      {'icon': Icons.wifi, 'title': 'Ø§ØªØµØ§Ù„Ø§Øª'},
      {'icon': Icons.videogame_asset, 'title': 'Ø£Ù„Ø¹Ø§Ø¨'},
      {'icon': Icons.currency_bitcoin, 'title': 'ÙƒØ±ÙŠØ¨ØªÙˆ'},
      {'icon': Icons.star, 'title': 'VIP'},
    ];

    return GridView.builder(
      shrinkWrap: true,
      physics: const NeverScrollableScrollPhysics(),
      itemCount: services.length,
      gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
        crossAxisCount: 3,
        mainAxisSpacing: 12,
        crossAxisSpacing: 12,
      ),
      itemBuilder: (context, index) {
        return Container(
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(14),
            color: Colors.white,
            boxShadow: [
              BoxShadow(
                color: Colors.black.withOpacity(0.05),
                blurRadius: 8,
              )
            ],
          ),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Icon(services[index]['icon'] as IconData, size: 32),
              const SizedBox(height: 8),
              Text(
                services[index]['title'] as String,
                style: const TextStyle(fontWeight: FontWeight.bold),
              ),
            ],
          ),
        );
      },
    );
  }
}
import 'package:flutter/material.dart';

class TopPicksSection extends StatelessWidget {
  const TopPicksSection({super.key});

  @override
  Widget build(BuildContext context) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        const Text(
          'â­ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
          style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
        ),
        const SizedBox(height: 10),
        Container(
          padding: const EdgeInsets.all(16),
          decoration: BoxDecoration(
            borderRadius: BorderRadius.circular(14),
            color: Colors.amber.shade100,
          ),
          child: const Text(
            'ğŸ”¥ Ø´Ø­Ù† Ø§ØªØµØ§Ù„Ø§Øª â€“ Ø®ØµÙ… 15%\nâ±ï¸ ÙŠÙ†ØªÙ‡ÙŠ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹ØªÙŠÙ†',
            style: TextStyle(fontWeight: FontWeight.w600),
          ),
        ),
      ],
    );
  }
}
import 'package:flutter/material.dart';

import '../../features/products/presentation/pages/products_page.dart';
import 'widgets/home_bottom_nav.dart';

class HomePage extends StatefulWidget {
  const HomePage({super.key});

  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  int _currentIndex = 0;

  late final List<Widget> _pages = [
    const ProductsPage(), // Ø§Ù„Ø³ÙˆÙ‚
    const Center(child: Text('Ø§Ù„Ø¹Ø±ÙˆØ¶')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ OffersPage
    const Center(child: Text('Ø§Ù„Ù…Ø­ÙØ¸Ø©')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ WalletPage
    const Center(child: Text('Ø­Ø³Ø§Ø¨ÙŠ')), // Ù„Ø§Ø­Ù‚Ù‹Ø§ ProfilePage
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: IndexedStack(
        index: _currentIndex,
        children: _pages,
      ),
      bottomNavigationBar: HomeBottomNav(
        currentIndex: _currentIndex,
        onTap: (index) {
          setState(() {
            _currentIndex = index;
          });
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';

class LoginPage extends StatelessWidget {
  const LoginPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Padding(
        padding: const EdgeInsets.all(24),
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const Text(
              'ğŸ‘‹ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†',
              style: TextStyle(fontSize: 26, fontWeight: FontWeight.bold),
            ).animate().fade().slideY(),

            const SizedBox(height: 12),

            const Text(
              'ÙƒÙ„ Ø®Ø¯Ù…Ø§ØªÙƒ Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯',
              style: TextStyle(fontSize: 16, color: Colors.grey),
            ).animate().fade(delay: 200.ms),

            const SizedBox(height: 32),

            TextField(
              decoration: InputDecoration(
                hintText: 'ğŸ”‘ Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„',
                border: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(16),
                ),
              ),
            ),

            const SizedBox(height: 16),

            TextButton(
              onPressed: () {
                Navigator.pushReplacementNamed(context, '/home');
              },
              child: const Text('Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒØ¶ÙŠÙ'),
            ),

            const SizedBox(height: 24),

            ElevatedButton(
              onPressed: () {
                Navigator.pushReplacementNamed(context, '/home');
              },
              child: const Text('ğŸš€ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³ÙˆÙ‚'),
            )
          ],
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../home_screen.dart';
import '../services_screen.dart';
import '../support_screen.dart';
import '../settings_screen.dart';

class MainNavigation extends StatefulWidget {
  const MainNavigation({super.key});

  @override
  State<MainNavigation> createState() => _MainNavigationState();
}

class _MainNavigationState extends State<MainNavigation> {
  int index = 0;

  final pages = const [
    HomeScreen(),
    ServicesScreen(),
    SupportScreen(),
    SettingsScreen(),
  ];

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: pages[index],
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        selectedItemColor: Colors.deepPurple,
        unselectedItemColor: Colors.grey,
        items: const [
          BottomNavigationBarItem(icon: Icon(Icons.home), label: 'Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'),
          BottomNavigationBarItem(icon: Icon(Icons.store), label: 'Ø§Ù„Ø®Ø¯Ù…Ø§Øª'),
          BottomNavigationBarItem(icon: Icon(Icons.support), label: 'Ø§Ù„Ø¯Ø¹Ù…'),
          BottomNavigationBarItem(icon: Icon(Icons.settings), label: 'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª'),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class OffersPage extends StatelessWidget {
  const OffersPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ø°ÙƒÙŠØ©')),
      body: ListView(
        children: const [
          ListTile(title: Text('ğŸ’¸ Ø®ØµÙ… 20% Ø¹Ù„Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„Ø§Øª')),
          ListTile(title: Text('ğŸ® Ø¹Ø±ÙˆØ¶ Ø£Ù„Ø¹Ø§Ø¨ VIP')),
          ListTile(title: Text('âœˆï¸ Ø®ØµÙ… Ø±Ø­Ù„Ø§Øª')),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class UserDashboardPage extends StatelessWidget {
  const UserDashboardPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Profile')),
      body: ListView(
        padding: const EdgeInsets.all(16),
        children: const [
          CircleAvatar(radius: 40, child: Icon(Icons.person, size: 40)),
          SizedBox(height: 12),
          Center(child: Text('Guest User', style: TextStyle(fontSize: 18))),
          SizedBox(height: 24),
          ListTile(leading: Icon(Icons.settings), title: Text('Settings')),
          ListTile(leading: Icon(Icons.history), title: Text('Orders')),
          ListTile(leading: Icon(Icons.logout), title: Text('Logout')),
        ],
      ),
    );
  }
}
import 'package:flutter/material.dart';

class WalletPage extends StatelessWidget {
  const WalletPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Wallet')),
      body: Center(
        child: Card(
          margin: const EdgeInsets.all(24),
          child: Padding(
            padding: const EdgeInsets.all(24),
            child: Column(
              mainAxisSize: MainAxisSize.min,
              children: const [
                Icon(Icons.account_balance_wallet, size: 60),
                SizedBox(height: 12),
                Text('Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ', style: TextStyle(fontSize: 18)),
                SizedBox(height: 8),
                Text('0.00 YER', style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold)),
              ],
            ),
          ),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class LoginScreen extends StatelessWidget {
  const LoginScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xfff6f2f8),
      body: Center(
        child: Padding(
          padding: const EdgeInsets.all(20),
          child: Card(
            elevation: 8,
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(20),
            ),
            child: Padding(
              padding: const EdgeInsets.all(24),
              child: Column(
                mainAxisSize: MainAxisSize.min,
                children: [
                  const Icon(Icons.lock, size: 60, color: Colors.deepPurple),
                  const SizedBox(height: 16),
                  const Text(
                    'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„',
                    style: TextStyle(
                      fontSize: 22,
                      fontWeight: FontWeight.bold,
                    ),
                  ),
                  const SizedBox(height: 20),

                  TextField(
                    textAlign: TextAlign.center,
                    decoration: InputDecoration(
                      hintText: 'Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„',
                      prefixIcon: const Icon(Icons.key),
                      border: OutlineInputBorder(
                        borderRadius: BorderRadius.circular(12),
                      ),
                    ),
                  ),

                  const SizedBox(height: 20),

                  SizedBox(
                    width: double.infinity,
                    height: 48,
                    child: ElevatedButton(
                      style: ElevatedButton.styleFrom(
                        shape: RoundedRectangleBorder(
                          borderRadius: BorderRadius.circular(12),
                        ),
                      ),
                      onPressed: () {
                        Navigator.pushReplacementNamed(context, '/home');
                      },
                      child: const Text(
                        'Ø¯Ø®ÙˆÙ„',
                        style: TextStyle(fontSize: 18),
                      ),
                    ),
                  ),
                ],
              ),
            ),
          ),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: const Color(0xfff4f4f4),
      appBar: AppBar(
        backgroundColor: Colors.deepPurple,
        title: const Text('Ø³ÙˆÙ‚ Ø§Ù„ÙŠÙ…Ù†'),
        centerTitle: true,
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [

            // ğŸ”¥ Banner
            Container(
              height: 160,
              decoration: BoxDecoration(
                borderRadius: BorderRadius.circular(16),
                gradient: const LinearGradient(
                  colors: [Colors.deepPurple, Colors.purpleAccent],
                ),
              ),
              child: const Center(
                child: Text(
                  'ğŸ”¥ Ø¹Ø±ÙˆØ¶ Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù…Ù…ÙŠØ²Ø©\nğŸ’ Ø®Ø¯Ù…Ø§Øª VIP',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    color: Colors.white,
                    fontSize: 22,
                    fontWeight: FontWeight.bold,
                  ),
                ),
              ),
            ),

            const SizedBox(height: 20),

            // ğŸ” Search
            TextField(
              decoration: InputDecoration(
                hintText: 'Ø§Ø¨Ø­Ø« Ø¹Ù† Ø®Ø¯Ù…Ø© Ø£Ùˆ Ù…Ù†ØªØ¬',
                prefixIcon: const Icon(Icons.search),
                filled: true,
                fillColor: Colors.white,
                border: OutlineInputBorder(
                  borderRadius: BorderRadius.circular(12),
                  borderSide: BorderSide.none,
                ),
              ),
            ),

            const SizedBox(height: 24),

            // âš¡ Ø®Ø¯Ù…Ø§Øª Ø³Ø±ÙŠØ¹Ø©
            const Text(
              'âš¡ Ø®Ø¯Ù…Ø§Øª Ø³Ø±ÙŠØ¹Ø©',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 12),

            GridView.count(
              crossAxisCount: 4,
              shrinkWrap: true,
              physics: const NeverScrollableScrollPhysics(),
              children: const [
                _ServiceIcon(icon: Icons.payment, label: 'Ø¯ÙØ¹'),
                _ServiceIcon(icon: Icons.flight, label: 'Ø·ÙŠØ±Ø§Ù†'),
                _ServiceIcon(icon: Icons.hotel, label: 'ÙÙ†Ø§Ø¯Ù‚'),
                _ServiceIcon(icon: Icons.videogame_asset, label: 'Ø£Ù„Ø¹Ø§Ø¨'),
              ],
            ),

            const SizedBox(height: 24),

            // ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§
            const Text(
              'ğŸ”¥ Ø§Ù„Ø£ÙƒØ«Ø± Ø·Ù„Ø¨Ù‹Ø§',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 12),

            SizedBox(
              height: 160,
              child: ListView(
                scrollDirection: Axis.horizontal,
                children: const [
                  _PopularCard(title: 'Ø´Ø­Ù† Ø±ØµÙŠØ¯', rating: 4.5),
                  _PopularCard(title: 'Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†', rating: 4.2),
                  _PopularCard(title: 'Ø¨Ø·Ø§Ù‚Ø§Øª Ø£Ù„Ø¹Ø§Ø¨', rating: 4.8),
                ],
              ),
            ),

            const SizedBox(height: 24),

            // ğŸ’ VIP
            const Text(
              'ğŸ’ Ø®Ø¯Ù…Ø§Øª VIP',
              style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 12),

            Row(
              children: const [
                _VipCard(title: 'Crypto'),
                _VipCard(title: 'AI Concierge'),
              ],
            ),
          ],
        ),
      ),
    );
  }
import 'package:flutter/material.dart';

class MarketplacePage extends StatelessWidget {
  const MarketplacePage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      body: Center(
        child: Text(
          'Marketplace coming soon',
          style: TextStyle(fontSize: 18),
        ),
      ),
    );
  }
}
import 'package:flutter/material.dart';

class ServicesScreen extends StatelessWidget {
  const ServicesScreen({super.key});

  @override
  Widget build(BuildContext context) {
    final services = [
      'Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
      'Ø­Ø¬Ø² Ø·ÙŠØ±Ø§Ù†',
      'ÙÙ†Ø§Ø¯Ù‚',
      'Ø´Ø­Ù† Ø£Ù„Ø¹Ø§Ø¨',
      'Ø¨Ø·Ø§Ù‚Ø§Øª Ø¥Ù†ØªØ±Ù†Øª',
      'Ø¹Ù…Ù„Ø§Øª Ø±Ù‚Ù…ÙŠØ©',
      'Ø­Ø¬ÙˆØ²Ø§Øª',
      'Ø®Ø¯Ù…Ø§Øª VIP',
    ];

    return Scaffold(
      appBar: AppBar(title: const Text('ğŸ›ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª')),
      body: GridView.builder(
        padding: const EdgeInsets.all(16),
        itemCount: services.length,
        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
          crossAxisCount: 2,
          childAspectRatio: 1.2,
          crossAxisSpacing: 12,
          mainAxisSpacing: 12,
        ),
        itemBuilder: (context, i) {
          return Card(
            elevation: 4,
            shape: RoundedRectangleBorder(
              borderRadius: BorderRadius.circular(16),
            ),
            child: Center(
              child: Text(
                services[i],
                textAlign: TextAlign.center,
                style: const TextStyle(
                  fontSize: 16,
                  fontWeight: FontWeight.bold,
                ),
              ),
            ),
          );
        },
      ),
    );
  }
}
import 'package:flutter/material.dart';
import '../core/features/feature_registry.dart';

class RootPage extends StatefulWidget {
  const RootPage({super.key});

  @override
  State<RootPage> createState() => _RootPageState();
}

class _RootPageState extends State<RootPage> {
  int index = 0;

  @override
  Widget build(BuildContext context) {
    final bottomFeatures = features.take(3).toList();

    return Scaffold(
      appBar: AppBar(title: Text(bottomFeatures[index].title)),
      drawer: Drawer(
        child: ListView(
          children: [
            const DrawerHeader(child: Text('Yemen Market')),
            ...features.map((f) => ListTile(
                  leading: Icon(f.icon),
                  title: Text(f.title),
                  onTap: () {
                    Navigator.pop(context);
                    Navigator.push(
                      context,
                      MaterialPageRoute(builder: (_) => f.page),
                    );
                  },
                )),
          ],
        ),
      ),
      body: bottomFeatures[index].page,
      bottomNavigationBar: BottomNavigationBar(
        currentIndex: index,
        onTap: (i) => setState(() => index = i),
        items: bottomFeatures
            .map((f) => BottomNavigationBarItem(
                  icon: Icon(f.icon),
                  label: f.title,
                ))
            .toList(),
      ),
    );
  }
}
